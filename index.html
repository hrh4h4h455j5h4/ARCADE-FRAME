<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>
<style>
  /* GLOBAL SCROLLING ENABLED */
  html { scroll-behavior: smooth; overflow-y: auto; }
  body {
    background: #0a0a0c; color: white; font-family: sans-serif;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; margin: 0; padding-bottom: 150px; 
    -webkit-overflow-scrolling: touch; 
    background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 100% 4px;
    touch-action: pan-y; /* CRITICAL: Allows vertical scrolling on the page */
  }
  
  /* --- NAVIGATION --- */
  .menu-toggle {
    position: fixed; top: 15px; left: 15px; 
    background: #1a1a1c; color: #fff; border: 1px solid rgba(255,255,255,0.1); 
    padding: 8px 12px; border-radius: 4px; font-weight: bold; cursor: pointer; z-index: 100000;
    font-size: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.5);
  }
  .switch-container { position: fixed; top: 15px; right: 15px; z-index: 100000; }
  #switch-btn {
    background: #ff0000; color: white; border: 2px solid #ffffff; 
    padding: 8px 14px; border-radius: 4px; font-weight: bold; cursor: pointer;
    font-size: 11px; text-transform: uppercase; letter-spacing: 1px;
    box-shadow: 0 0 10px rgba(255,0,0,0.5); display: flex; gap: 5px; align-items: center;
  }
  #switch-menu {
    position: absolute; top: 45px; right: 0; background: #1a1a1c; 
    border: 1px solid #ff0000; border-radius: 8px; width: 220px;
    display: none; flex-direction: column; overflow: hidden;
    box-shadow: 0 10px 20px rgba(0,0,0,0.8);
  }
  #switch-menu button {
    background: transparent; color: #aaa; border: none; padding: 14px;
    text-align: left; font-weight: bold; font-size: 11px; cursor: pointer;
    border-bottom: 1px solid rgba(255,255,255,0.05); text-transform: uppercase;
  }
  #switch-menu button.active-link { color: #00ffff; background: rgba(0,255,255,0.1); border-left: 3px solid #00ffff; }

  /* SIDE PANEL */
  #menu-panel {
    position: fixed; top: 0; left: -260px; width: 240px; height: 100%;
    background: #1a1a1c; padding-top: 60px; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); z-index: 99999;
    display: flex; flex-direction: column; gap: 10px; padding-left: 15px; padding-right: 15px;
    box-shadow: 2px 0 15px rgba(0,0,0,0.5);
    box-sizing: border-box; padding-bottom: 80px;
  }
  #menu-panel.open { left: 0; }
  
  /* BRANDING */
  .designed-by {
    position: absolute; bottom: 0; left: 0; width: 100%;
    padding: 20px 0; border-top: 1px solid rgba(255,255,255,0.1);
    text-align: center; font-size: 11px; font-weight: 900; color: #888;
    text-transform: uppercase; letter-spacing: 2px; background: #1a1a1c;
  }
  .designed-by b { color: #ff0000; text-shadow: 0 0 8px rgba(255,0,0,0.6); }

  .music-section {
    border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.03);
    border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 8px;
  }
  .lnk {
    display: flex; align-items: center; gap: 10px; padding: 12px;
    text-decoration: none; color: white; font-size: 13px; font-weight: bold;
    border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);
  }
  .lnk svg { width: 18px; height: 18px; fill: white; }

  /* HEADERS */
  h1 {
    color: #fff; margin: 60px 0 0 0; font-family: "Arial Black", sans-serif; font-style: italic;
    font-size: 36px; text-transform: uppercase; letter-spacing: -1px;
    text-shadow: 2px 2px 0px #ff0000, -1px -1px 10px rgba(255, 0, 0, 0.8);
    animation: arcadeBounce 1.8s infinite ease-in-out;
  }
  @keyframes arcadeBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .sub { color: #fff; font-weight: bold; margin: 2px 0 15px 0; text-transform: uppercase; font-size: 11px; letter-spacing: 2px; text-align: center; }
  
  .studio-sec { display: none; width: 320px; flex-direction: column; align-items: center; }
  .active-sec { display: flex; }

  /* üñºÔ∏è FRAME STUDIO */
  #box {
    position: relative; width: 310px; height: 310px; border-radius: 50%; overflow: hidden;
    background-image: linear-gradient(45deg, #1a1a1c 25%, transparent 25%), linear-gradient(-45deg, #1a1a1c 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #1a1a1c 75%), linear-gradient(-45deg, transparent 75%, #1a1a1c 75%);
    background-color: transparent; background-size: 20px 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); 
    -webkit-mask-image: -webkit-radial-gradient(white,black); z-index: 10;
  }
  
  /* CRITICAL FIX: Only block touch gestures ON THE CANVAS, allow scroll elsewhere */
  canvas { 
    position: absolute; top: 0; left: 0; width: 310px; height: 310px; z-index: 15; 
    touch-action: none; /* Prevents scroll ONLY on the image */
  }
  
  /* ‚úçÔ∏è FONT GENERATOR (PERFECT LAYOUT) */
  .font-input {
    width: 100%; background: #111; border: 2px solid #00ffff; color: #fff;
    padding: 15px; border-radius: 8px; font-weight: bold; text-align: center; margin-bottom: 15px;
    font-size: 16px; outline: none; box-sizing: border-box;
  }
  .font-scroll {
    width: 100%; max-height: 500px; 
    overflow-y: auto; /* Enable Scrolling */
    -webkit-overflow-scrolling: touch; /* Smooth iOS scroll */
    display: flex; flex-direction: column;
    gap: 0; border-radius: 8px; overflow-x: hidden;
    border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box;
    touch-action: pan-y; /* Explicitly allow vertical panning */
  }
  .font-item {
    background: #1a1a1c; border: none; border-bottom: 1px solid rgba(255,255,255,0.1);
    padding: 16px; width: 100%; text-align: center; cursor: pointer; color: #eee;
    white-space: pre-wrap; overflow-wrap: break-word; box-sizing: border-box; font-size: 16px;
  }
  .font-item:last-child { border-bottom: none; }
  .font-item:active { background: #00ffff; color: #000; }

  /* UI GLOBAL */
  .ui { margin-top: 20px; width: 310px; display: flex; flex-direction: column; gap: 6px; }
  .btn { background: #111; border: 2px solid #ffffff; color: white; padding: 10px; text-align: center; border-radius: 8px; font-weight: bold; display: block; font-size: 12px; cursor: pointer; text-transform: uppercase; }
  .btn-r { border-color: #ff0000; }
  .lbl { font-size: 9px; color: #888; text-transform: uppercase; margin-top: 2px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
  .val-tag { color: #ff0000; font-weight: bold; font-family: monospace; font-size: 10px; }
  input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; margin: 10px 0; cursor: pointer; }
  input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 8px; background: linear-gradient(to right, #ff0000 var(--v, 0%), #00ffff var(--v, 0%)); border-radius: 4px; }
  input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #ff0000; margin-top: -6px; box-shadow: 0 0 10px #ff0000; border: 2px solid #ffffff; }
  #save { background: #ff0000; border: none; font-size: 14px; color: white; padding: 12px; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer; text-transform: uppercase; opacity: 0.4; pointer-events: none; }
  #save.active { opacity: 1; pointer-events: auto; }
  input[type=file], #yt-player { display: none; }
</style>
</head>
<body onclick="startAudio()">

<button class="menu-toggle" onclick="toggleMenu(event)">MENU ‚ò∞</button>

<div class="switch-container">
  <button id="switch-btn" onclick="toggleSwitchMenu(event)">SWITCH TO üìÇ</button>
  <div id="switch-menu">
    <button id="nav-frame" class="active-link" onclick="changeStudio('frame')">üñºÔ∏è Frame Studio</button>
    <button id="nav-font" onclick="changeStudio('font')">‚úçÔ∏è Font Generator</button>
  </div>
</div>

<div id="menu-panel">
  <div class="music-section">
    <div class="music-btn" style="display:flex; justify-content:space-between; font-size:12px; font-weight:bold; cursor:pointer;" onclick="toggleMusic()">
      <span>MUSIC PLAYER</span> <span id="m-status" style="color:#ff0000;">ON</span>
    </div>
    <select class="station-select" style="width:100%; margin-top:5px;" onchange="changeMusic(this.value)">
      <option value="jfKfPfyJRdk" selected>‚òï Lofi Focus</option>
      <option value="nv_2rz5BFDA">üïπÔ∏è Retro Wave</option>
    </select>
  </div>

  <a href="https://discord.gg/ardc" target="_blank" class="lnk" style="border-color:#5865F2;"><svg viewBox="0 0 127.14 96.36"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c2.36-24.44-5.42-48.18-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/></svg><span>Discord Server</span></a>
  <a href="https://platopedia.com/groups/arcade" target="_blank" class="lnk" style="border-color:#00ffff;"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg><span>Arcade Website</span></a>

  <div class="designed-by">DESIGNED BY <b>RISK</b></div>
</div>

<div id="yt-player"></div>

<h1 id="studio-name">ARCADE</h1>
<p class="sub" id="studio-sub">FRAME STUDIO</p>

<div id="frame-studio" class="studio-sec active-sec">
  <div id="box"><canvas id="c" width="800" height="800"></canvas></div>
  <div class="ui">
    <label class="btn" onclick="playClick()">CHOOSE IMAGE<input type="file" id="u1" accept="image/*" onchange="handleFile(event)"></label>
    <label class="btn btn-r" onclick="playClick()">APPLY FRAME<input type="file" id="u2" accept="image/*" onchange="handleFrame(event)"></label>
    <button class="btn" style="border-color:#00ffff; color:#00ffff;" onclick="centerSubject()">CENTER SUBJECT üéØ</button>
    <div class="lbl">ZOOM <span id="z-val" class="val-tag">100%</span></div>
    <input type="range" id="z" min="0.1" max="4" step="0.01" value="1" oninput="updateZ(this.value)">
    <div class="lbl">ROTATE <span id="r-val" class="val-tag">0¬∞</span></div>
    <input type="range" id="r" min="0" max="360" step="1" value="0" oninput="updateR(this.value)">
    <div class="lbl">CIRCLE SIZE <span id="m-val" class="val-tag">375px</span></div>
    <input type="range" id="m" min="300" max="400" step="1" value="375" oninput="updateM(this.value)">
    <button id="save" onclick="downloadPic()">DOWNLOAD PICTURE</button>
  </div>
</div>

<div id="font-studio" class="studio-sec">
  <input type="text" id="font-input" class="font-input" placeholder="Type text here..." oninput="genFonts()">
  <div class="lbl">TAP TO COPY <span class="val-tag" id="font-count">0 STYLES</span></div>
  <div id="font-results" class="font-scroll"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const c=document.getElementById('c'),x=c.getContext('2d'),zSl=document.getElementById('z'),mSl=document.getElementById('m'),rSl=document.getElementById('r'),sBtn=document.getElementById('save'),panel=document.getElementById('menu-panel'),mStat=document.getElementById('m-status'), sName=document.getElementById('studio-name'), sSub=document.getElementById('studio-sub'), swMenu=document.getElementById('switch-menu');
const zVal=document.getElementById('z-val'),rVal=document.getElementById('r-val'),mVal=document.getElementById('m-val');
let i=new Image(),f=new Image(),cfg={s:1,m:375,x:400,y:400,r:0,d:false,lx:0,ly:0},player,musicOn=true,audioStarted=false;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function changeStudio(mode) {
  playClick(); document.querySelectorAll('.studio-sec').forEach(s => s.classList.remove('active-sec')); document.querySelectorAll('#switch-menu button').forEach(b => b.classList.remove('active-link')); swMenu.style.display = 'none';
  if(mode === 'frame') {
    document.getElementById('frame-studio').classList.add('active-sec'); document.getElementById('nav-frame').classList.add('active-link');
    sName.innerText = "ARCADE"; sSub.innerText = "FRAME STUDIO";
  } else {
    document.getElementById('font-studio').classList.add('active-sec'); document.getElementById('nav-font').classList.add('active-link');
    sName.innerText = "FONTS"; sSub.innerText = "GENERATOR STUDIO";
  }
}
function toggleSwitchMenu(e) { e.stopPropagation(); swMenu.style.display = swMenu.style.display === 'flex' ? 'none' : 'flex'; playClick(); }

// --- üöÄ REAL INFINITE FONT GENERATOR (30+ BASES HARDCODED) ---
const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
const bases = [
  {m:"ùêÄùêÅùêÇùêÉùêÑùêÖùêÜùêáùêàùêâùêäùêãùêåùêçùêéùêèùêêùêëùêíùêìùêîùêïùêñùêóùêòùêôùêöùêõùêúùêùùêûùêüùê†ùê°ùê¢ùê£ùê§ùê•ùê¶ùêßùê®ùê©ùê™ùê´ùê¨ùê≠ùêÆùêØùê∞ùê±ùê≤ùê≥ùüéùüèùüêùüëùüíùüìùüîùüïùüñùüó"}, // Bold
  {m:"ùê¥ùêµùê∂ùê∑ùê∏ùêπùê∫ùêªùêºùêΩùêæùêøùëÄùëÅùëÇùëÉùëÑùëÖùëÜùëáùëàùëâùëäùëãùëåùëçùëéùëèùëêùëëùëíùëìùëî‚Ñéùëñùëóùëòùëôùëöùëõùëúùëùùëûùëüùë†ùë°ùë¢ùë£ùë§ùë•ùë¶ùëß0123456789"}, // Italic
  {m:"ùë®ùë©ùë™ùë´ùë¨ùë≠ùëÆùëØùë∞ùë±ùë≤ùë≥ùë¥ùëµùë∂ùë∑ùë∏ùëπùë∫ùëªùëºùëΩùëæùëøùíÄùíÅùíÇùíÉùíÑùíÖùíÜùíáùíàùíâùíäùíãùíåùíçùíéùíèùíêùíëùííùíìùíîùíïùíñùíóùíòùíôùíöùíõ0123456789"}, // Bold Italic
  {m:"ùíú‚Ñ¨ùíûùíü‚Ñ∞‚Ñ±ùí¢‚Ñã‚Ñêùí•ùí¶‚Ñí‚Ñ≥ùí©ùí™ùí´ùí¨‚ÑõùíÆùíØùí∞ùí±ùí≤ùí≥ùí¥ùíµùí∂ùí∑ùí∏ùíπ‚ÑØùíª‚ÑäùíΩùíæùíøùìÄùìÅùìÇùìÉ‚Ñ¥ùìÖùìÜùìáùìàùìâùìäùìãùìåùìçùìéùìè0123456789"}, // Script
  {m:"ùìêùìëùìíùììùìîùìïùìñùìóùìòùìôùìöùìõùìúùìùùìûùìüùì†ùì°ùì¢ùì£ùì§ùì•ùì¶ùìßùì®ùì©ùì™ùì´ùì¨ùì≠ùìÆùìØùì∞ùì±ùì≤ùì≥ùì¥ùìµùì∂ùì∑ùì∏ùìπùì∫ùìªùìºùìΩùìæùìøùîÄùîÅùîÇùîÉ0123456789"}, // Bold Script
  {m:"ùîÑùîÖ‚Ñ≠ùîáùîàùîâùîä‚Ñå‚Ñëùîçùîéùîèùîêùîëùîíùîìùîî‚Ñúùîñùîóùîòùîôùîöùîõùîúùîùùîûùîüùî†ùî°ùî¢ùî£ùî§ùî•ùî¶ùîßùî®ùî©ùî™ùî´ùî¨ùî≠ùîÆùîØùî∞ùî±ùî≤ùî≥ùî¥ùîµùî∂ùî∑0123456789"}, // Fraktur
  {m:"ùï¨ùï≠ùïÆùïØùï∞ùï±ùï≤ùï≥ùï¥ùïµùï∂ùï∑ùï∏ùïπùï∫ùïªùïºùïΩùïæùïøùñÄùñÅùñÇùñÉùñÑùñÖùñÜùñáùñàùñâùñäùñãùñåùñçùñéùñèùñêùñëùñíùñìùñîùñïùññùñóùñòùñôùñöùñõùñúùñùùñûùñü0123456789"}, // Bold Fraktur
  {m:"ùî∏ùîπ‚ÑÇùîªùîºùîΩùîæ‚ÑçùïÄùïÅùïÇùïÉùïÑ‚ÑïùïÜ‚Ñô‚Ñö‚Ñùùïäùïãùïåùïçùïéùïèùïê‚Ñ§ùïíùïìùïîùïïùïñùïóùïòùïôùïöùïõùïúùïùùïûùïüùï†ùï°ùï¢ùï£ùï§ùï•ùï¶ùïßùï®ùï©ùï™ùï´ùüòùüôùüöùüõùüúùüùùüûùüüùü†ùü°"}, // Double
  {m:"ùñ†ùñ°ùñ¢ùñ£ùñ§ùñ•ùñ¶ùñßùñ®ùñ©ùñ™ùñ´ùñ¨ùñ≠ùñÆùñØùñ∞ùñ±ùñ≤ùñ≥ùñ¥ùñµùñ∂ùñ∑ùñ∏ùñπùñ∫ùñªùñºùñΩùñæùñøùóÄùóÅùóÇùóÉùóÑùóÖùóÜùóáùóàùóâùóäùóãùóåùóçùóéùóèùóêùóëùóíùóìùü¢ùü£ùü§ùü•ùü¶ùüßùü®ùü©ùü™ùü´"}, // Sans
  {m:"ùóîùóïùóñùóóùóòùóôùóöùóõùóúùóùùóûùóüùó†ùó°ùó¢ùó£ùó§ùó•ùó¶ùóßùó®ùó©ùó™ùó´ùó¨ùó≠ùóÆùóØùó∞ùó±ùó≤ùó≥ùó¥ùóµùó∂ùó∑ùó∏ùóπùó∫ùóªùóºùóΩùóæùóøùòÄùòÅùòÇùòÉùòÑùòÖùòÜùòáùü¨ùü≠ùüÆùüØùü∞ùü±ùü≤ùü≥ùü¥ùüµ"}, // Sans Bold
  {m:"ùòàùòâùòäùòãùòåùòçùòéùòèùòêùòëùòíùòìùòîùòïùòñùòóùòòùòôùòöùòõùòúùòùùòûùòüùò†ùò°ùò¢ùò£ùò§ùò•ùò¶ùòßùò®ùò©ùò™ùò´ùò¨ùò≠ùòÆùòØùò∞ùò±ùò≤ùò≥ùò¥ùòµùò∂ùò∑ùò∏ùòπùò∫ùòª0123456789"}, // Sans Italic
  {m:"ùòºùòΩùòæùòøùôÄùôÅùôÇùôÉùôÑùôÖùôÜùôáùôàùôâùôäùôãùôåùôçùôéùôèùôêùôëùôíùôìùôîùôïùôñùôóùôòùôôùôöùôõùôúùôùùôûùôüùô†ùô°ùô¢ùô£ùô§ùô•ùô¶ùôßùô®ùô©ùô™ùô´ùô¨ùô≠ùôÆùôØ0123456789"}, // Sans Bold Italic
  {m:"ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâùöäùöãùöåùöçùöéùöèùöêùöëùöíùöìùöîùöïùöñùöóùöòùöôùööùöõùöúùöùùöûùöüùö†ùö°ùö¢ùö£ùü∂ùü∑ùü∏ùüπùü∫ùüªùüºùüΩùüæùüø"}, // Mono
  {m:"‚í∂‚í∑‚í∏‚íπ‚í∫‚íª‚íº‚íΩ‚íæ‚íø‚ìÄ‚ìÅ‚ìÇ‚ìÉ‚ìÑ‚ìÖ‚ìÜ‚ìá‚ìà‚ìâ‚ìä‚ìã‚ìå‚ìç‚ìé‚ìè‚ìê‚ìë‚ìí‚ìì‚ìî‚ìï‚ìñ‚ìó‚ìò‚ìô‚ìö‚ìõ‚ìú‚ìù‚ìû‚ìü‚ì†‚ì°‚ì¢‚ì£‚ì§‚ì•‚ì¶‚ìß‚ì®‚ì©‚ì™‚ë†‚ë°‚ë¢‚ë£‚ë§‚ë•‚ë¶‚ëß‚ë®"}, // Circles
  {m:"üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©‚ìø‚ûä‚ûã‚ûå‚ûç‚ûé‚ûè‚ûê‚ûë‚ûí"}, // Dark Circles
  {m:"üÑêüÑëüÑíüÑìüÑîüÑïüÑñüÑóüÑòüÑôüÑöüÑõüÑúüÑùüÑûüÑüüÑ†üÑ°üÑ¢üÑ£üÑ§üÑ•üÑ¶üÑßüÑ®üÑ©üÑêüÑëüÑíüÑìüÑîüÑïüÑñüÑóüÑòüÑôüÑöüÑõüÑúüÑùüÑûüÑüüÑ†üÑ°üÑ¢üÑ£üÑ§üÑ•üÑ¶üÑßüÑ®üÑ©0123456789"}, // Parenthesized
  {m:"Ôº°Ôº¢Ôº£Ôº§Ôº•Ôº¶ÔºßÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞Ôº±Ôº≤Ôº≥Ôº¥ÔºµÔº∂Ôº∑Ôº∏ÔºπÔº∫ÔΩÅÔΩÇÔΩÉÔΩÑÔΩÖÔΩÜÔΩáÔΩàÔΩâÔΩäÔΩãÔΩåÔΩçÔΩéÔΩèÔΩêÔΩëÔΩíÔΩìÔΩîÔΩïÔΩñÔΩóÔΩòÔΩôÔΩöÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô"}, // Fullwidth
  {m:"·¥Ä ô·¥Ñ·¥Ö·¥á“ì…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥ò«´ Äs·¥õ·¥ú·¥†·¥°x è·¥¢·¥Ä ô·¥Ñ·¥Ö·¥á“ì…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥ò«´ Äs·¥õ·¥ú·¥†·¥°x è·¥¢0123456789"}, // Small Caps
  {m:"üÑ∞üÑ±üÑ≤üÑ≥üÑ¥üÑµüÑ∂üÑ∑üÑ∏üÑπüÑ∫üÑªüÑºüÑΩüÑæüÑøüÖÄüÖÅüÖÇüÖÉüÖÑüÖÖüÖÜüÖáüÖàüÖâ0123456789"}, // Squares
  {m:"üÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üÖπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâ0123456789"}, // Dark Squares
  {m:"…êq…îp«ù…ü∆É…•·¥â…æ ûl…Øuodb…πs án å çx éz0123456789"}, // Inverted
  {m:"A·ó∫∆ÜD∆éÍüªGHI·Ç±K‚ÖÉM–òOÍüºQ–Ø∆ßTUVWXYZ0123456789"}, // Reversed
  {m:"Ã∂AÃ∂BÃ∂CÃ∂DÃ∂EÃ∂FÃ∂GÃ∂HÃ∂IÃ∂JÃ∂KÃ∂LÃ∂MÃ∂NÃ∂OÃ∂PÃ∂QÃ∂RÃ∂SÃ∂TÃ∂UÃ∂VÃ∂WÃ∂XÃ∂YÃ∂ZÃ∂0Ã∂1Ã∂2Ã∂3Ã∂4Ã∂5Ã∂6Ã∂7Ã∂8Ã∂9"}, // Crossout
  {m:"Ã≥AÃ≥BÃ≥CÃ≥DÃ≥EÃ≥FÃ≥GÃ≥HÃ≥IÃ≥JÃ≥KÃ≥LÃ≥MÃ≥NÃ≥OÃ≥PÃ≥QÃ≥RÃ≥SÃ≥TÃ≥UÃ≥VÃ≥WÃ≥XÃ≥YÃ≥ZÃ≥0Ã≥1Ã≥2Ã≥3Ã≥4Ã≥5Ã≥6Ã≥7Ã≥8Ã≥9"}, // Underline
  {m:"Ã∑AÃ∑BÃ∑CÃ∑DÃ∑EÃ∑FÃ∑GÃ∑HÃ∑IÃ∑JÃ∑KÃ∑LÃ∑MÃ∑NÃ∑OÃ∑PÃ∑QÃ∑RÃ∑SÃ∑TÃ∑UÃ∑VÃ∑WÃ∑XÃ∑YÃ∑ZÃ∑0Ã∑1Ã∑2Ã∑3Ã∑4Ã∑5Ã∑6Ã∑7Ã∑8Ã∑9"}, // Slash
  {m:"AÃ≤BÃ≤CÃ≤DÃ≤EÃ≤FÃ≤GÃ≤HÃ≤IÃ≤JÃ≤KÃ≤LÃ≤MÃ≤NÃ≤OÃ≤PÃ≤QÃ≤RÃ≤SÃ≤TÃ≤UÃ≤VÃ≤WÃ≤XÃ≤YÃ≤ZÃ≤0Ã≤1Ã≤2Ã≤3Ã≤4Ã≤5Ã≤6Ã≤7Ã≤8Ã≤9"}, // Low Line
  {m:"AÃÖBÃÖCÃÖDÃÖEÃÖFÃÖGÃÖHÃÖIÃÖJÃÖKÃÖLÃÖMÃÖNÃÖOÃÖPÃÖQÃÖRÃÖSÃÖTÃÖUÃÖVÃÖWÃÖXÃÖYÃÖZÃÖ0ÃÖ1ÃÖ2ÃÖ3ÃÖ4ÃÖ5ÃÖ6ÃÖ7ÃÖ8ÃÖ9"}, // Overline
  {m:"AÕéBÕéCÕéDÕéEÕéFÕéGÕéHÕéIÕéJÕéKÕéLÕéMÕéNÕéOÕéPÕéQÕéRÕéSÕéTÕéUÕéVÕéWÕéXÕéYÕéZÕé0Õé1Õé2Õé3Õé4Õé5Õé6Õé7Õé8Õé9"}, // Arrows Below
  {m:"AÃΩÕìBÃΩÕìCÃΩÕìDÃΩÕìEÃΩÕìFÃΩÕìGÃΩÕìHÃΩÕìIÃΩÕìJÃΩÕìKÃΩÕìLÃΩÕìMÃΩÕìNÃΩÕìOÃΩÕìPÃΩÕìQÃΩÕìRÃΩÕìSÃΩÕìTÃΩÕìUÃΩÕìVÃΩÕìWÃΩÕìXÃΩÕìYÃΩÕìZÃΩÕì0ÃΩÕì1ÃΩÕì2ÃΩÕì3ÃΩÕì4ÃΩÕì5ÃΩÕì6ÃΩÕì7ÃΩÕì8ÃΩÕì9"}, // Cross Hatch
  {m:"A‚ô•B‚ô•C‚ô•D‚ô•E‚ô•F‚ô•G‚ô•H‚ô•I‚ô•J‚ô•K‚ô•L‚ô•M‚ô•N‚ô•O‚ô•P‚ô•Q‚ô•R‚ô•S‚ô•T‚ô•U‚ô•V‚ô•W‚ô•X‚ô•Y‚ô•Z‚ô•0‚ô•1‚ô•2‚ô•3‚ô•4‚ô•5‚ô•6‚ô•7‚ô•8‚ô•9"} // Hearts
];

const decorators = [
  " ", "‚òÖ|‚òÖ", "„Äé|„Äè", "„Äê|„Äë", "ÍßÅ|ÍßÇ", "ÀóÀè|ÀéÀó", "‚¶ó|‚¶ò", "‚ÅÖ|‚ÅÜ", "‚òæ|‚òΩ", "√ó|√ó", "‚òÜ|‚òÜ", "‚óè|‚óè", "‚ñ†|‚ñ†", "‚Üí|‚Üê", "‚ö°|‚ö°", "‚ò†|‚ò†", "‚òÆ|‚òÆ", 
  "‚úà|‚úà", "‚ù§|‚ù§", "‚ôõ|‚ôõ", "‚àû|‚àû", "¬ß|¬ß", "‚Ç™|‚Ç™", "‚Ü∫|‚Üª", "‚ùÑ|‚ùÑ", "‚òÅ|‚òÅ", "‚òÇ|‚òÇ", "‚úÇ|‚úÇ", "‚úé|‚úé", "‚öî|‚öî", "‚öì|‚öì", "‚öô|‚öô", 
  "‚öõ|‚öõ", "‚öú|‚öú", "‚ö†|‚ö†", "‚ö°Ô∏è|‚ö°Ô∏è", "‚úß|‚úß", "‚ú©|‚ú©", "‚ú™|‚ú™", "‚ú´|‚ú´", "‚ú¨|‚ú¨", "‚ú≠|‚ú≠", "‚úÆ|‚úÆ", "‚úØ|‚úØ", "‚ú∞|‚ú∞", "‚ú±|‚ú±", "‚ú≤|‚ú≤", "‚ú≥|‚ú≥"
];

function genFonts() {
  const val = document.getElementById('font-input').value, resBox = document.getElementById('font-results');
  resBox.innerHTML = ""; if(!val) return;
  let count = 0;
  
  // 1. BASES (RAW)
  bases.forEach(b => { addF(mapText(val, b.m), resBox); count++; });
  
  // 2. MIXER: BASE X DECORATOR
  bases.forEach((b, idx) => {
    if(idx < 18) { 
      let baseTxt = mapText(val, b.m);
      decorators.forEach(dec => {
        let [p,s] = dec.split("|");
        addF(p + baseTxt + s, resBox);
        count++;
      });
    }
  });

  // 3. EXTRA TRANSFORMS
  addF("‚ñë‚ñí‚ñì "+val.toUpperCase()+" ‚ñì‚ñí‚ñë", resBox); 
  addF(val.split('').join(' '), resBox); 
  addF(val.split('').join('  '), resBox); 
  count += 3;
  
  document.getElementById('font-count').innerText = count + " STYLES";
}
function mapText(t, m) { let r="", mArr=Array.from(m); for(let c of t) { let idx=chars.indexOf(c); r += (idx!==-1 && mArr[idx]) ? mArr[idx] : c; } return r; }
function addF(t, b) { let d=document.createElement('div'); d.className="font-item"; d.innerText=t; d.onclick=()=>{navigator.clipboard.writeText(t); playShutter();}; b.appendChild(d); }

// --- AUDIO TRIGGER ---
function initAudio() {
    if(!audioStarted) { 
        audioCtx.resume().then(() => {
            audioStarted = true;
            if(player && musicOn) { player.unMute(); player.playVideo(); }
            window.removeEventListener('click', initAudio);
            window.removeEventListener('touchstart', initAudio);
            window.removeEventListener('scroll', initAudio);
        });
    }
}
window.addEventListener('click', initAudio, {capture: true});
window.addEventListener('touchstart', initAudio, {capture: true});
window.addEventListener('scroll', initAudio, {capture: true});

window.onclick = e => { if (panel.classList.contains('open') && !panel.contains(e.target) && !e.target.classList.contains('menu-toggle')) { panel.classList.remove('open'); playClick(); } swMenu.style.display = 'none'; }
function onYouTubeIframeAPIReady() { player = new YT.Player('yt-player', { height: '0', width: '0', videoId: 'jfKfPfyJRdk', playerVars: { 'autoplay': 1, 'loop': 1, 'playlist': 'jfKfPfyJRdk', 'mute':0 }, events: { 'onReady': e => { e.target.setVolume(25); } } }); }
function changeMusic(id) { if(player) player.loadVideoById(id); playShutter(); }
function toggleMusic() { initAudio(); playClick(); musicOn = !musicOn; if(musicOn) { player.playVideo(); mStat.innerText = "ON"; mStat.style.color = "#ff0000"; } else { player.pauseVideo(); mStat.innerText = "OFF"; mStat.style.color = "#888"; } }
function toggleMenu(e) { e.stopPropagation(); initAudio(); playClick(); panel.classList.toggle('open'); }
function playClick() { const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.frequency.setValueAtTime(800, audioCtx.currentTime); g.gain.setValueAtTime(0.05, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime + 0.1); }
function playShutter() { const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type='square'; o.frequency.setValueAtTime(200, audioCtx.currentTime); g.gain.setValueAtTime(0.05, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime + 0.1); }
function updateSliderColor(el) { el.style.setProperty('--v', ((el.value-el.min)/(el.max-el.min)*100)+'%'); }

// --- CANVAS & CIRCLE SIZE FIX ---
function d(){ x.clearRect(0,0,800,800); x.save(); x.beginPath(); x.arc(400,400,cfg.m,0,6.28); x.clip(); if(i.src){ let w=i.width*cfg.s, h=i.height*cfg.s; x.save(); x.translate(cfg.x, cfg.y); x.rotate(cfg.r * Math.PI/180); x.drawImage(i, -w/2, -h/2, w, h); x.restore(); } x.restore(); if(f.src) x.drawImage(f, 0, 0, 800, 800); if (i.src || f.src) sBtn.classList.add('active'); }
function handleFile(e) { if(!e.target.files[0]) return; let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{ i=n; cfg.s=Math.max(800/i.width,800/i.height); cfg.x=400; cfg.y=400; cfg.r=0; zSl.value=cfg.s; document.getElementById('r').value=0; rVal.innerText="0¬∞"; updateSliderColor(zSl); d(); playClick(); }; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); }
function handleFrame(e) { let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{ f=n; d(); playClick(); }; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); }
function updateZ(v) { cfg.s=parseFloat(v); zVal.innerText=Math.round(v*100)+"%"; d(); }
function updateR(v) { cfg.r=parseInt(v); rVal.innerText=v+"¬∞"; d(); }
function updateM(v) { cfg.m=parseInt(v); mVal.innerText=v+"px"; d(); } // RE-ADDED CIRCLE CONTROL
function centerSubject() { if(!i.src) return; playShutter(); cfg.x=400; cfg.y=400; cfg.r=0; rVal.innerText="0¬∞"; d(); }

let lastDist=0, lastAng=0;
function getDist(t){ return Math.hypot(t[0].clientX-t[1].clientX, t[0].clientY-t[1].clientY); }
function getAng(t){ return Math.atan2(t[1].clientY-t[0].clientY, t[1].clientX-t[0].clientX) * 180/Math.PI; }
c.addEventListener('touchstart', e => {
    initAudio(); 
    if(e.touches.length===1) { cfg.lx = e.touches[0].clientX - cfg.x; cfg.ly = e.touches[0].clientY - cfg.y; }
    else if(e.touches.length===2) { lastDist = getDist(e.touches); lastAng = getAng(e.touches); }
}, {passive:false});
c.addEventListener('touchmove', e => {
    e.preventDefault();
    if(e.touches.length===1) { cfg.x = e.touches[0].clientX - cfg.lx; cfg.y = e.touches[0].clientY - cfg.ly; }
    else if(e.touches.length===2) {
        let d = getDist(e.touches); cfg.s *= (d / lastDist); lastDist = d;
        let a = getAng(e.touches); cfg.r += (a - lastAng); lastAng = a;
        zSl.value = cfg.s; zVal.innerText=Math.round(cfg.s*100)+"%";
        rVal.innerText=Math.round(cfg.r%360)+"¬∞";
    }
    d();
}, {passive:false});

function downloadPic() { if(!i.src && !f.src) return; let a=document.createElement('a'); a.download = 'Arcade_Export.png'; a.href=c.toDataURL(); a.click(); }
document.querySelectorAll('input[type=range]').forEach(el => { el.addEventListener('input', () => { updateSliderColor(el); }); updateSliderColor(el); });
</script>
</body>
</html>
