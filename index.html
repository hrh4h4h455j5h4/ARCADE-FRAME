<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>

<style>
  /* --- GLOBAL SETTINGS --- */
  html { scroll-behavior: smooth; overflow-y: auto; }
  body {
    background: #0a0a0c; color: white; font-family: sans-serif;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; margin: 0; padding-bottom: 150px; 
    -webkit-overflow-scrolling: touch; 
    background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 100% 4px; touch-action: pan-y; 
  }

  /* --- CUSTOM SCROLLBAR --- */
  ::-webkit-scrollbar { width: 12px; }
  ::-webkit-scrollbar-track { background: #0a0a0c; border-left: 1px solid #333; }
  ::-webkit-scrollbar-thumb { background: #333; border-radius: 6px; border: 2px solid #0a0a0c; }
  ::-webkit-scrollbar-thumb:hover { background: #00ffff; }

  /* --- NAVIGATION BUTTONS --- */
  .menu-toggle { 
    position: absolute; 
    top: 15px; left: 15px;
    height: 38px; box-sizing: border-box;
    display: flex; align-items: center; justify-content: center;
    background: rgba(20, 20, 20, 0.6); 
    color: rgba(255, 255, 255, 0.9); 
    border: 1px solid rgba(255, 255, 255, 0.15); 
    backdrop-filter: blur(4px);
    padding: 0 12px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    z-index: 100000; font-size: 12px; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.3); 
    transition: transform 0.1s ease, background 0.2s;
    text-shadow: 0 0 5px rgba(255,255,255,0.2);
  }
  .menu-toggle:active { transform: scale(0.90); background: rgba(255, 255, 255, 0.1); border-color: #fff; }

  /* --- SIDEBAR MENU --- */
  #menu-panel { 
    position: fixed; top: 0; left: -260px; width: 240px; height: 100%; 
    background: #1a1a1c; padding-top: 60px; 
    transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    z-index: 99999; display: flex; flex-direction: column; gap: 15px; 
    padding-left: 15px; padding-right: 15px; 
    box-shadow: 2px 0 15px rgba(0,0,0,0.5); 
    box-sizing: border-box; padding-bottom: 80px; 
  }
  #menu-panel.open { left: 0; }

  .switch-container { position: relative; width: 100%; }
  #switch-btn { 
    background: rgba(255,255,255,0.05); color: white; border: 2px solid #ff0000; 
    padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    font-size: 11px; text-transform: uppercase; width: 100%; text-align: center;
    box-shadow: 0 0 10px rgba(255,0,0,0.5); 
    transition: transform 0.1s ease;
  }
  #switch-btn:active { transform: scale(0.95); background: rgba(255,0,0,0.2); }

  #switch-menu { 
    position: absolute; top: 45px; right: 0; background: #1a1a1c; 
    border: 1px solid #ff0000; border-radius: 8px; width: 210px; 
    display: none; flex-direction: column; overflow: hidden; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.8); z-index: 100001;
  }
  #switch-menu button { 
    background: transparent; color: #aaa; border: none; padding: 14px; 
    text-align: left; font-weight: bold; font-size: 11px; cursor: pointer; 
    border-bottom: 1px solid rgba(255,255,255,0.05); text-transform: uppercase;
    transition: background 0.2s;
  }
  #switch-menu button:active { background: rgba(255,255,255,0.1); }
  #switch-menu button.active-link { color: #00ffff; background: rgba(0,255,255,0.1); border-left: 3px solid #00ffff; }

  .designed-by { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px 0; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 11px; font-weight: 900; color: #888; background: #1a1a1c; }
  .designed-by b { color: #ff0000; text-shadow: 0 0 8px rgba(255,0,0,0.6); }

  .music-section { border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
  
  .lnk { 
    display: flex; align-items: center; gap: 10px; padding: 12px; 
    text-decoration: none; color: white; font-size: 13px; font-weight: bold; 
    border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); 
    background: rgba(255,255,255,0.05); 
    transition: transform 0.1s ease;
  }
  .lnk:active { transform: scale(0.96); background: rgba(255,255,255,0.1); }
  .lnk svg { width: 18px; height: 18px; fill: white; }

  /* HEADERS */
  h1 { color: #fff; margin: 60px 0 0 0; font-family: "Arial Black", sans-serif; font-style: italic; font-size: 36px; text-transform: uppercase; letter-spacing: -1px; text-shadow: 2px 2px 0px #ff0000, -1px -1px 10px rgba(255, 0, 0, 0.8); animation: arcadeBounce 1.8s infinite ease-in-out; }
  @keyframes arcadeBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .sub { color: #fff; font-weight: bold; margin: 2px 0 15px 0; text-transform: uppercase; font-size: 11px; letter-spacing: 2px; text-align: center; }
  /* --- LAYOUT LOGIC --- */
  .studio-sec { display: none; width: 320px; flex-direction: column; align-items: center; }
  .active-sec { display: flex; }

  @media (min-width: 1024px) {
    body { justify-content: flex-start; padding-top: 40px; }
    .studio-sec { width: 90%; max-width: 1100px; flex-direction: row; align-items: flex-start; justify-content: center; gap: 60px; }
    #frame-studio, #gif-studio { align-items: center; }
    .ui, .ui-gif { width: 350px; margin-top: 0; }
    #font-studio { flex-direction: column; align-items: center; }
    #font-results { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-height: 70vh; overflow-y: scroll; padding-right: 10px; }
    .font-input { width: 50%; }
    #sym-studio { flex-direction: column; align-items: center; }
    .sym-box-container { width: 50%; }
    #sym-container { max-height: 70vh; overflow-y: scroll; padding-right: 10px; width: 100%; }
    .sym-btn { flex: 1 0 50px; }
  }

  /* --- üñºÔ∏è FRAME STUDIO CSS --- */
  #box { position: relative; width: 310px; height: 310px; border-radius: 50%; overflow: hidden; border: 3px solid #ff0000; box-sizing: border-box; background: transparent; z-index: 10; flex-shrink: 0; }
  canvas#c { position: absolute; top: 50%; left: 50%; width: 310px; height: 310px; transform: translate(-50%, -50%); z-index: 15; touch-action: pan-y; }
  
  #frame-btn-group { display: flex; flex-direction: column; gap: 6px; width: 100%; }
  #ui-toggle-btn { margin-bottom: 6px; }

  .ui { margin-top: 20px; width: 310px; display: flex; flex-direction: column; gap: 6px; background: transparent; }
  
  .btn { 
    background: #000; border: 2px solid #fff; color: white; padding: 12px; 
    text-align: center; border-radius: 8px; font-weight: 900; 
    display: block; font-size: 12px; cursor: pointer; 
    text-transform: uppercase; width: 100%; box-sizing: border-box; 
    transition: transform 0.1s ease, border-color 0.2s;
  }
  .btn:active { transform: scale(0.95); opacity: 0.8; }
  .btn:disabled { opacity: 0.3; cursor: not-allowed; border-color: #555; color: #555; transform: none; }
  .btn-r { border-color: #ff0000; }
  
  .lbl { font-size: 9px; color: #888; text-transform: uppercase; margin-top: 2px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
  .val-tag { color: #ff0000; font-weight: bold; font-family: monospace; font-size: 10px; }

  /* --- üé® NEW ADVANCED PALETTE CSS --- */
  /* Main Container for the Palette System */
  #palette-wrapper { display: none; flex-direction: column; width: 100%; margin-top: 5px; background: #000; border: 1px solid #333; border-radius: 8px; padding: 8px; box-sizing: border-box; }
  #palette-wrapper.active { display: flex; }
  
  /* Category Scroll Bar (Metallics, Reds, etc.) */
  .cat-scroll { display: flex; gap: 6px; overflow-x: auto; padding-bottom: 8px; margin-bottom: 5px; scrollbar-width: none; -webkit-overflow-scrolling: touch; }
  .cat-scroll::-webkit-scrollbar { display: none; }
  
  /* Category Buttons */
  .cat-btn { 
    flex: 0 0 auto; padding: 8px 12px; background: #1a1a1c; 
    border: 1px solid #444; border-radius: 20px; 
    font-size: 10px; font-weight: bold; cursor: pointer; color: #aaa; 
    transition: 0.2s ease; display: flex; align-items: center; gap: 5px;
  }
  .cat-btn:hover { background: #333; }
  .cat-btn.active-cat { background: #fff; color: #000; border-color: #fff; box-shadow: 0 0 10px rgba(255,255,255,0.3); }

  /* Grid Area for Small Squares */
  .color-grid-container { display: none; grid-template-columns: repeat(auto-fill, minmax(32px, 1fr)); gap: 6px; max-height: 220px; overflow-y: auto; padding-top: 5px; }
  .color-grid-container.show { display: grid; animation: fadeIn 0.2s ease; }
  
  /* The Small Color Squares */
  .c-sq { 
    height: 32px; border-radius: 6px; cursor: pointer; 
    border: 1px solid rgba(255,255,255,0.1); position: relative; box-sizing: border-box; 
  }
  .c-sq:active { transform: scale(0.9); border-color: #fff; }
  .c-sq.is-metal { border: 1px solid #fff; } /* Highlight for metallics */

  @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

  /* --- ‚úçÔ∏è FONT STUDIO CSS --- */
  .font-input { width: 100%; background: #111; border: 2px solid #00ffff; color: #fff; padding: 15px; border-radius: 8px; font-weight: bold; text-align: center; margin-bottom: 15px; font-size: 16px; outline: none; box-sizing: border-box; }
  .font-scroll { width: 100%; max-height: 500px; overflow-y: auto; display: flex; flex-direction: column; border-radius: 8px; overflow-x: hidden; border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; touch-action: pan-y; }
  .font-item { background: #1a1a1c; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 16px; width: 100%; text-align: center; cursor: pointer; color: #eee; font-size: 16px; white-space: pre-wrap; transition: transform 0.05s ease; }
  .font-item:active { transform: scale(0.98); background: #333; color: #fff; }
  
  /* --- ‚ú® SYMBOLS STUDIO CSS --- */
  .sym-box-container { width: 100%; margin-bottom: 15px; }
  .sym-input { width: 100%; background: #000; border: 1px solid #00ffff; color: #00ffff; padding: 12px; font-size: 18px; border-radius: 6px; text-align: center; box-sizing: border-box; outline: none; }
  .sym-input:focus { border-color: #ff00ff; box-shadow: 0 0 10px rgba(255,0,255,0.5); }
  .cat-title { width: 100%; color: #ff0000; font-size: 12px; font-weight: bold; margin: 20px 0 5px 0; text-transform: uppercase; padding-left: 5px; border-bottom: 1px solid rgba(255,0,0,0.2); padding-bottom: 5px; }
  .sym-grid { display: flex; flex-wrap: wrap; gap: 5px; width: 100%; padding: 5px; box-sizing: border-box; }
  .sym-btn { background: #1a1a1c; border: 1px solid #333; color: white; padding: 15px 0; font-size: 20px; border-radius: 6px; cursor: pointer; text-align: center; flex: 1 0 18%; min-width: 50px; transition: transform 0.05s ease; }
  .sym-btn:active { transform: scale(0.90); background: #ff0000; color: #000; }
  /* --- ‚ö° GIF STUDIO CSS --- */
  @keyframes rotate { 100% { transform: rotate(360deg); } }
  .stage { position: relative; width: 320px; height: 320px; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; touch-action: pan-y; flex-shrink: 0; }
  .led-ring { position: absolute; inset: -15px; border-radius: 50%; background: conic-gradient(from 0deg, #00f3ff, #bc13fe, #ff0055, #00f3ff); animation: rotate 1.0s linear infinite; filter: blur(20px); z-index: 1; pointer-events: none; }
  .viewport { position: relative; z-index: 5; width: 100%; height: 100%; border-radius: 50%; overflow: hidden; background-color: #000; display: flex; justify-content: center; align-items: center; box-shadow: inset 0 0 20px #000; touch-action: pan-y; }
  #v { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; will-change: transform; }
  #o { width: 100%; height: 100%; object-fit: contain; display: none; }
  
  .ui-gif { z-index: 10; background: transparent; padding: 25px; border-radius: 30px; width: 340px; border: none; margin-bottom: 20px; max-width: 90%; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; }
  .label-row { display: flex; justify-content: space-between; font-size: 11px; color: #888; margin-bottom: 8px; font-weight: 600; width: 100%; }
  input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; margin: 10px 0; cursor: pointer; }
  input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 8px; background: linear-gradient(to right, #ff0000 var(--v, 0%), #00ffff var(--v, 0%)); border-radius: 4px; }
  input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #ff0000; margin-top: -6px; border: 2px solid #ffffff; box-shadow: 0 0 10px #ff0000; }
  
  .ui-gif input[type="range"] { margin-bottom: 25px; -webkit-appearance: none; }
  .ui-gif input[type="range"]::-webkit-slider-runnable-track { background: #333; height: 6px; border-radius: 3px; }
  .ui-gif input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #00f3ff; box-shadow: 0 0 10px #00f3ff; border: 2px solid #fff; margin-top: -7px; }
  .ui-gif input[type="range"]:disabled { opacity: 0.3; cursor: not-allowed; }

  .status { margin-top: 20px; font-size: 14px; text-align: center; color: var(--neon); font-weight: 600; opacity: 0; transition: 0.3s; height: 20px; }
  .status.active { opacity: 1; }
  
  /* --- NEON BORDER BUTTONS --- */
  .neon-wrap { position: relative; width: 100%; margin-top: 15px; padding: 3px; border-radius: 50px; overflow: hidden; box-sizing: border-box; display: inline-block; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
  .neon-wrap::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; z-index: 0; animation: rotate 3s linear infinite; pointer-events: none; }
  .neon-wrap.blue::before { background: conic-gradient(transparent, transparent, #00f3ff, #bc13fe, #ff0055, #00f3ff, transparent, transparent); }
  .neon-wrap.red { margin-top: 20px; }
  .neon-wrap.red::before { background: conic-gradient(transparent, transparent, #ff0000, #ff5500, transparent, transparent); }
  
  .btn-inner { position: relative; z-index: 10; display: block; width: 100%; background: #000; color: white; padding: 15px 0; border-radius: 46px; font-weight: 900; font-size: 14px; text-align: center; text-decoration: none; border: none; cursor: pointer; box-sizing: border-box; pointer-events: auto; text-transform: uppercase; transition: transform 0.1s ease, background 0.1s; }
  .btn-inner:active { transform: scale(0.95); background: #111; }
  .btn-inner:disabled { opacity: 0.5; color: #555; cursor: not-allowed; transform: none; }

  input[type=file], #yt-player { display: none; }
</style>
</head>
<body onclick="startAudio()">

<button class="menu-toggle" onclick="toggleMenu(event)">MENU ‚ò∞</button>

<div id="menu-panel">
  <div class="switch-container">
    <button id="switch-btn" onclick="toggleSwitchMenu(event)">SWITCH TO üìÇ</button>
    <div id="switch-menu">
      <button id="nav-frame" class="active-link" onclick="changeStudio('frame')">üñºÔ∏è Frame Studio</button>
      <button id="nav-font" onclick="changeStudio('font')">‚úçÔ∏è Font Generator</button>
      <button id="nav-gif" onclick="changeStudio('gif')">‚ö° GIF Maker</button>
      <button id="nav-sym" onclick="changeStudio('sym')">‚ú® Symbols Studio</button>
    </div>
  </div>

  <div class="music-section">
    <div class="music-btn" style="display:flex; justify-content:space-between; font-size:12px; font-weight:bold; cursor:pointer;" onclick="toggleMusic()">
      <span>MUSIC PLAYER</span> <span id="m-status" style="color:#ff0000;">ON</span>
    </div>
    <select class="station-select" style="width:100%; margin-top:5px;" onchange="changeMusic(this.value)">
      <option value="jfKfPfyJRdk">Live Lofi Jazz</option>
      <option value="BrnDlRmW5hs">Nostalgic Lofi</option>
      <option value="tLYL_3NcJck">Cyber City Ambience</option>
      <option value="FKtzkolncnk">Night Drive 1985</option>
      <option value="_Ojv9Zu1IZY">1983 Arcade Feeling</option>
      <option value="OBoMLZTtqb8">Retro Systems Online</option>
      <option value="lT8JepVwxBQ">Echoes of the 80s</option>
    </select>
  </div>
  
  <a href="https://discord.gg/ardc" target="_blank" class="lnk" style="border-color:#5865F2;"><svg viewBox="0 0 127.14 96.36"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c2.36-24.44-5.42-48.18-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/></svg><span>Discord Server</span></a>
  <a href="https://platopedia.com/groups/arcade" target="_blank" class="lnk" style="border-color:#00ffff;"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg><span>Arcade Website</span></a>
  <div class="designed-by">DESIGNED BY <b>RISK</b></div>
</div>

<div id="yt-player"></div>
<h1 id="studio-name">ARCADE</h1>
<p class="sub" id="studio-sub">FRAME STUDIO</p>

<div id="frame-studio" class="studio-sec active-sec">
  <div id="box"><canvas id="c" width="800" height="800"></canvas></div>
  <div class="ui">
    <button id="ui-toggle-btn" class="btn" style="border-color:#ffcc00; color:#ffcc00; margin-bottom:10px;" onclick="toggleFrameUI()">üëÅÔ∏è HIDE MENU BUTTONS</button>
    
    <div id="frame-btn-group">
        <label class="btn" onclick="playClick()">CHOOSE IMAGE<input type="file" id="u1" accept="image/*" onchange="handleFile(event)" style="display:none"></label>
        <label class="btn btn-r" onclick="playClick()">APPLY FRAME<input type="file" id="u2" accept="image/*" onchange="handleFrame(event)" style="display:none"></label>
        
        <button class="btn" style="border-color:#ffffff; color:#ffffff;" onclick="togglePaletteUI()">COLOR PALETTE üé®</button>
        
        <div id="palette-wrapper">
            <div class="cat-scroll">
                <button class="cat-btn" onclick="renderCat('Basic')">BASIC</button>
                <button class="cat-btn" onclick="renderCat('Metallics')">METALLICS</button>
                <button class="cat-btn" onclick="renderCat('Grays')">GRAYS</button>
                <button class="cat-btn" onclick="renderCat('Reds')">REDS</button>
                <button class="cat-btn" onclick="renderCat('Oranges')">ORANGES</button>
                <button class="cat-btn" onclick="renderCat('Yellows')">YELLOWS</button>
                <button class="cat-btn" onclick="renderCat('Greens')">GREENS</button>
                <button class="cat-btn" onclick="renderCat('Cyans')">CYANS</button>
                <button class="cat-btn" onclick="renderCat('Blues')">BLUES</button>
                <button class="cat-btn" onclick="renderCat('Purples')">PURPLES</button>
                <button class="cat-btn" onclick="renderCat('Pinks')">PINKS</button>
            </div>
            <div id="color-grid" class="color-grid-container"></div>
        </div>

        <button id="lock-btn" class="btn" style="border-color:#00ff00; color:#00ff00;" onclick="toggleBoundaryLock()">BOUNDARY LOCK: ON üîí</button>
        <button class="btn" style="border-color:#00ffff; color:#00ffff;" onclick="centerSubject()">CENTER SUBJECT üéØ</button>
        <button class="btn" style="border-color:#ff0000; color:#ff0000;" onclick="resetProject()">RESET PROJECT ‚Üª</button>
    </div>

    <div class="lbl">ZOOM <span id="z-val" class="val-tag">100%</span></div>
    <input type="range" id="z" min="0.1" max="2.5" step="0.01" value="1" oninput="updateZ(this.value)">
    <div class="lbl">ROTATE <span id="r-val" class="val-tag">0¬∞</span></div>
    <input type="range" id="r" min="0" max="360" step="1" value="0" oninput="updateR(this.value)">
    <div class="lbl">CIRCLE SIZE <span id="m-val" class="val-tag">375px</span></div>
    <input type="range" id="m" min="300" max="400" step="1" value="375" oninput="updateM(this.value)">
    
    <button id="save" class="btn" onclick="downloadPic()" disabled>DOWNLOAD PICTURE</button>
  </div>
</div>
<div id="font-studio" class="studio-sec">
  <input type="text" id="font-input" class="font-input" placeholder="Type text here..." oninput="genFonts()">
  <div class="lbl">TAP TO COPY <span class="val-tag" id="font-count">0 STYLES</span></div>
  <div id="font-results" class="font-scroll"></div>
</div>

<div id="gif-studio" class="studio-sec">
    <div class="stage" id="stage">
        <div class="led-ring"></div>
        <div class="viewport" id="vp">
            <video id="v" muted playsinline loop></video>
            <img id="o">
        </div>
    </div>

    <div class="ui-gif" id="uiPanel">
        <div id="upWrapper" class="neon-wrap blue">
            <button class="btn-inner" id="upBtn" onclick="document.getElementById('gfInput').click()">UPLOAD YOUR VIDEO</button>
        </div>
        <input type="file" id="gfInput" accept="video/*" style="display:none">

        <div class="label-row" style="margin-top:20px;"><span>ZOOM / SCALE</span><span id="zv">100%</span></div>
        <input type="range" id="zoom" min="100" max="300" step="1" value="100">

        <div class="label-row"><span>PLAYBACK SPEED</span><span id="sv">1.0x</span></div>
        <input type="range" id="speed" min="0.5" max="3.0" step="0.1" value="1.0">

        <div id="goBox" class="neon-wrap blue">
            <button id="go" class="btn-inner" disabled>‚ö° CREATE HD GIF</button>
        </div>
        
        <div id="msg" class="status">Processing...</div>
        
        <div id="dlBox" class="neon-wrap blue" style="display:none;">
            <a id="dl" class="btn-inner">‚¨áÔ∏è DOWNLOAD GIF</a>
        </div>

        <div id="resetBox" class="neon-wrap red" style="display:none;">
            <button class="btn-inner" onclick="resetGifProject()">‚Üª RESET PROJECT</button>
        </div>
    </div>
</div>

<div id="sym-studio" class="studio-sec">
    <div class="lbl">TAP SYMBOLS TO BUILD BIO</div>
    <div class="sym-box-container">
        <input type="text" id="sym-box" class="sym-input" placeholder="Type or tap symbols here...">
    </div>
    <div id="sym-container" class="font-scroll"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
// --- CORE VARIABLES ---
const c=document.getElementById('c'), x=c.getContext('2d');
const zSl=document.getElementById('z'), rSl=document.getElementById('r'), mSl=document.getElementById('m');
const panel=document.getElementById('menu-panel'), mStat=document.getElementById('m-status');
const sName=document.getElementById('studio-name'), sSub=document.getElementById('studio-sub'), swMenu=document.getElementById('switch-menu');
const zVal=document.getElementById('z-val'), rVal=document.getElementById('r-val'), mVal=document.getElementById('m-val');

let i=new Image(), f=new Image();
// Config includes plain frame properties (pColor, pType)
let cfg={s:1, m:375, x:400, y:400, r:0, lx:0, ly:0, pColor: null, pType: null};
let player, musicOn=true, audioStarted=false;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// --- SIDEBAR MENU LOGIC ---
function toggleMenu(e) { e.stopPropagation(); initAudio(); panel.classList.toggle('open'); playClick(); }
function toggleSwitchMenu(e) { e.stopPropagation(); swMenu.style.display = swMenu.style.display === 'flex' ? 'none' : 'flex'; playClick(); }

window.onclick = e => {
  initAudio(); 
  if (panel.classList.contains('open') && !panel.contains(e.target) && !e.target.classList.contains('menu-toggle')) { panel.classList.remove('open'); playClick(); }
  if (swMenu.style.display === 'flex' && !document.querySelector('.switch-container').contains(e.target)) { swMenu.style.display = 'none'; playClick(); }
};

function changeStudio(mode) {
  playClick(); 
  document.querySelectorAll('.studio-sec').forEach(s => s.classList.remove('active-sec')); 
  swMenu.style.display = 'none'; panel.classList.remove('open'); 
  if(mode === 'frame') { document.getElementById('frame-studio').classList.add('active-sec'); sName.innerText = "ARCADE"; sSub.innerText = "FRAME STUDIO"; }
  else if(mode === 'font') { document.getElementById('font-studio').classList.add('active-sec'); sName.innerText = "FONTS"; sSub.innerText = "GENERATOR STUDIO"; }
  else if(mode === 'gif') { document.getElementById('gif-studio').classList.add('active-sec'); sName.innerText = "NEON"; sSub.innerText = "GIF STUDIO"; }
  else if(mode === 'sym') { document.getElementById('sym-studio').classList.add('active-sec'); sName.innerText = "SYMBOLS"; sSub.innerText = "STUDIO"; }
}

function toggleFrameUI() {
    const grp = document.getElementById('frame-btn-group'), btn = document.getElementById('ui-toggle-btn');
    if (window.getComputedStyle(grp).display === 'none') { grp.style.display = 'flex'; btn.innerHTML = "üëÅÔ∏è HIDE MENU BUTTONS"; btn.style.color = "#ffcc00"; btn.style.borderColor = "#ffcc00"; } 
    else { grp.style.display = 'none'; btn.innerHTML = "üëÅÔ∏è SHOW MENU BUTTONS"; btn.style.color = "#555"; btn.style.borderColor = "#555"; }
    playClick();
}

// --- ‚úçÔ∏è FONTS LOGIC (ALL 57 STYLES FIXED) ---
const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
const alphas = [
  // --- ORIGINAL FULL STYLES ---
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùêÄùêÅùêÇùêÉùêÑùêÖùêÜùêáùêàùêâùêäùêãùêåùêçùêéùêèùêêùêëùêíùêìùêîùêïùêñùêóùêòùêôùêöùêõùêúùêùùêûùêüùê†ùê°ùê¢ùê£ùê§ùê•ùê¶ùêßùê®ùê©ùê™ùê´ùê¨ùê≠ùêÆùêØùê∞ùê±ùê≤ùê≥ùüéùüèùüêùüëùüíùüìùüîùüïùüñùüó"},
  {m:"·ó©·ó∑·ëï·ó™E·ñ¥G·ïºI·íçK·í™·ó∞·ëéO·ë≠·ë´·ñá·îïT·ëå·êØ·óØ·ô≠Y·òîŒ±·ñøùñºùñΩùñæùñøùóÄùóÅùóÇùóÉùóÑùóÖùóÜùóáùóàùóâùóäùóãùóåùóçùóéùóèùóêùóëùóíùóì0123456789"},
  {m:"ùë®ùë©ùë™ùë´ùë¨ùë≠ùëÆùëØùë∞ùë±ùë≤ùë≥ùë¥ùëµùë∂ùë∑ùë∏ùëπùë∫ùëªùëºùëΩùëæùëøùíÄùíÅùíÇùíÉùíÑùíÖùíÜùíáùíàùíâùíäùíãùíåùíçùíéùíèùíêùíëùííùíìùíîùíïùíñùíóùíòùíôùíöùíõ0123456789"},
  {m:"ùíú‚Ñ¨ùíûùíü‚Ñ∞‚Ñ±ùí¢‚Ñã‚Ñêùí•ùí¶‚Ñí‚Ñ≥‚í©‚í™‚í´‚í¨‚ÑõùíÆùíØùí∞‚í±‚í≤‚í≥‚í¥‚íµùí∂‚í∑ùí∏ùíπ‚ÑØùíª‚ÑäùíΩùíæùíøùìÄùìÅùìÇùìÉ‚Ñ¥ùìÖùìÜùìáùìàùìâùíñ‚ìãùìåùìçùìéùìè0123456789"},
  {m:"ùìêùìëùìíùììùìîùìïùìñùìóùìòùìôùìöùìõùìúùìùùìûùìüùì†ùì°ùì¢ùì£ùì§ùì•ùì¶ùìßùì®ùì©ùì™ùì´ùì¨ùì≠ùìÆùìØùì∞ùì±ùì≤ùì≥ùì¥ùìµùì∂ùì∑ùì∏ùìπùì∫ùìªùìºùìΩùìæìãºùîÄùîÅùîÇùîÉ0123456789"},
  {m:"ùñ†ùñ°ùñ¢ùñ£ùñ§ùñ•ùñ¶ùñßùñ®ùñ©ùñ™ùñ´ùñ¨ùñ≠ùñÆùñØùñ∞ùñ±ùñ≤ùñ≥ùñ¥‚ìãùñÇùñÉùñÑùñÖùñ∫ùñªùñºùñΩùñæùñøùóÄùóÅùóÇùóÉùóÑùóÖùóÜùóáùóàùóâùóäùóãùóåùóçùóé‚ìãùóêùóëùóíùóìùü¢ùü£ùü§ùü•ùü¶ùüßùü®ùü©ùü™ùü´"},
  {m:"ùóîùóïÔº£ùóóùóòùóôùóöÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞ùó§ùó•ùó¶Ôº¥ùó®‚ìãùó™ùó´Ôºπùó≠ùóÆùóØùó∞ÔΩÑÔΩÖÔΩÜÔΩáùóµÔΩâùëóÔΩãÔΩåÔΩçÔΩéÔΩèÔΩêùóæÔΩíÔΩìÔΩîÔΩïùêØÔΩóùòÖÔΩôÔΩöùü¨ùü≠ùüÆùüØùü∞ùü±ùü≤ùü≥ùü¥ùüµ"},
  {m:"ùòàùòâùòäùòãùòåùòçùòéùòèùòêùòëùòíùòìùòîùòïùòñùòóùòòùòôùòöùòõùòúùòùùòûùòüùò†ùò°ùò¢ùò£ÔΩÉÔΩÑÔΩÖÔΩÜÔΩáÔΩàÔΩâùëóùëòÔΩåÔΩçÔΩéÔΩèÔΩêùò≤ùò≥ùò¥ùòµùë¢ùë£ùë§ùë•ùë¶ùòª0123456789"},
  {m:"ùòºùòΩÔº£Ôº§Ôº•ùôÅùôÇùôÉùôÑùôÖùôÜùôáùôàÔºÆÔºØÔº∞ùôåùôçùôéÔº¥ùôêùôëùôíùôìùôîùôïùôñùôóùôòÔΩÑÔΩÖÔΩÜùôúùôùùôûùôüùô†ùô°ùô¢ÔΩéÔΩèùô•ùô¶ùôßùô®ùë°ùô™ùô´ùô¨ùô≠ùôÆùôØ0123456789"},
  {m:"ùô∞ùô±Ôº£Ôº§Ôº•Ôº¶ùô∂Ôº®Ôº©ùôπùô∫ùôªÔº≠ÔºÆÔºØÔº∞ùöÄùöÅùöÇÔº¥ùöÑ‚ìãùöÜùöáÔºπùöâùöäùöãùöåùöçùöéùöèùöêùöëÔΩâùëóùöîùöïÔΩçÔΩéÔΩèùöôùööùöõùöúùòµùöûùë£ùö†ùö°ùö¢ùö£ùü∂ùü∑ùü∏ùüπùü∫ùüªùüºùüΩùüæùüø"},
  {m:"Ôº°Ôº¢Ôº£Ôº§Ôº•Ôº¶ÔºßÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞Ôº±Ôº≤Ôº≥Ôº¥ÔºµÔº∂Ôº∑Ôº∏ÔºπÔº∫ÔΩÅÔΩÇÔΩÉÔΩÑÔΩÖÔΩÜÔΩáÔΩàÔΩâÔΩäÔΩãÔΩåÔΩçÔΩéÔΩèÔΩêÔΩëÔΩíÔΩìÔΩîÔΩïÔΩñÔΩóÔΩòÔΩôÔΩöÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô"},
  {m:"‚í∂‚í∑‚í∏‚íπ‚í∫‚íª‚íº‚íΩ‚íæ‚íø‚ìÄ‚ìÅ‚ìÇ‚ìÉ‚ìÑ‚ìÖ‚ìÜ‚ìá‚ìà‚ìâ‚ìä‚ìã‚ìå‚ìç‚ìé‚ìè‚ìê‚ìë‚ìí‚ìì‚ìî‚ìï‚ìñ‚ìó‚ìò‚ìô‚ìö‚ìõ‚ìú‚ìù‚ìû‚ìü‚ì†‚ì°‚ì¢‚ì£‚ì§‚ì•‚ì¶‚ìß‚ì®‚ì©‚ì™‚ë†‚ë°‚ë¢‚ë£‚ë§‚ë•‚ë¶‚ëß‚ë®"},
  {m:"üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©‚ìø‚ûä‚ûã‚ûå‚ûç‚ûé‚ûè‚ûê‚ûë‚ûí"},
  {m:"‚íú‚íù‚íû‚íü‚í†‚í°‚í¢‚í£‚í§‚í•‚í¶‚íß‚í®‚í©‚í™‚í´‚í¨‚í≠‚íÆ‚íØ‚í∞‚í±‚í≤‚í≥‚í¥‚íµ‚íú‚íù‚íû‚íü‚í†‚í°‚í¢‚í£‚í§‚í•‚í¶‚íß‚í®‚í©‚í™‚í´‚í¨‚í≠‚íÆ‚íØ‚í∞‚í±‚í≤‚í≥‚í¥‚íµ0123456789"},
  {m:"üÑêüÑëüÑíüÑìüÑîüÑïüÑñüÑóüÑòüÑôüÑöüÑõüÑúüÑùüÑûüÑüüÑ†üÑ°üÑ¢üÑ£üÑ§üÑ•üÑ¶üÑßüÑ®üÑ©üÑêüÑëüÑíüÑìüÑîüÑïüÑñüÑóüÑòüÑôüÑöüÑõüÑúüÑùüÑûüÑüüÑ†üÑ°üÑ¢üÑ£üÑ§üÑ•üÑ¶üÑßüÑ®üÑ©0123456789"},
  {m:"üÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üÖπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâüÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üÖπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâ0123456789"},
  {m:"·¥Ä ô·¥Ñ·¥Ö·¥áÍú∞…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥òQ ÄÍú±·¥õ·¥ú·¥†·¥°x è·¥¢·¥Ä ô·¥Ñ·¥Ö·¥áÍú∞…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥òQ ÄÍú±·¥õ·¥ú·¥†·¥°x è·¥¢0123456789"},
  {m:"·¥¨·¥Æ·∂ú·¥∞·¥±·∂†·¥≥·¥¥·¥µ·¥∂·¥∑·¥∏·¥π·¥∫·¥º·¥æ·ë´·¥øÀ¢·µÄ·µÅ‚±Ω·µÇÀ£ ∏·∂ª·µÉ·µá·∂ú·µà·µâ·∂†·µç ∞‚Å± ≤·µèÀ°·µê‚Åø·µí·µñq ≥À¢·µó·µò·µõ ∑À£ ∏·∂ª0123456789"},
  {m:"ùî∏ùîπ‚ÑÇùîªùîºùîΩùîæ‚ÑçùïÄùïÅùïÇùïÉùïÑ‚ÑïùïÜ‚Ñô‚Ñö‚Ñùùïäùïãùïåùïçùïéùïèùïê‚Ñ§ùïíùïìùïîùïïùïñùïóùïòùïôùïöùïõùïúùïùùïûùïüùï†ùï°ùï¢ùï£ùï§ùï•ùï¶ùïßùï®ùï©ùï™ùï´ùüòùüôùüöùüõùüúùüùùüûùüüùü†ùü°"},
  {m:"ùîÑùîÖ‚Ñ≠ùîáùîàùîâùîä‚Ñå‚Ñëùîçùîéùîèùîêùîëùîíùîìùîî‚Ñúùîñùîóùîòùîôùîöùîõùîú‚Ñ®ùîûùîüùî†ùî°ùî¢ùî£ùî§ùî•ùî¶ùîßùî®ùî©ùî™ùî´ùî¨ùî≠ùîÆùîØùî∞≈ßùî≤ùî≥ùî¥ùîµùî∂ùî∑0123456789"},
  {m:"ùï¨ùï≠ùïÆùïØùï∞ùï±ùï≤ùï≥ùï¥ùïµùï∂ùï∑ùï∏ùïπùï∫ùïªùïºùïΩùïæùïøùñÄùñÅùñÇùñÉùñÑùñÖùñÜùñáùñàùñâùñäùñãùñåùñçùñéùñèùñêùñëùñíùñìùñîùñïùññùñóùñòùñôùñöùñõùñúùñùùñûùñü0123456789"},
  {m:"‚Ç≥‡∏ø‚Çµƒê…Ü‚Ç£‚Ç≤‚±ß≈ÇJ‚Ç≠‚±†‚Ç•‚Ç¶√ò‚Ç±Q‚±§‚Ç¥‚ÇÆ…ÑV‚Ç©”æ…é‚±´‚Ç≥‡∏ø‚Çµƒê…Ü‚Ç£‚Ç≤‚±ß≈ÇJ‚Ç≠‚±†‚Ç•‚Ç¶√ò‚Ç±Q‚±§‚Ç¥‚ÇÆ…ÑV‚Ç©”æ…é‚±´0123456789"},
  {m:"»∫∆Ä√ßƒê…áf«§ƒß…®…âÍùÅ≈ÇmN√∏·µΩÍùó…çs≈ß·µævwxy∆µ»∫∆Ä√ßƒê…áf«§ƒß…®…âÍùÅ≈ÇmN√∏·µΩÍùó…çs≈ß·µævwxy∆µ0123456789"},
  {m:"Œ±–≤c‚àÇ—î∆íg–ΩŒπ◊†–∫‚Ñì–º–∏œÉœÅq—è—ï—ÇœÖŒΩœâœá—ÉzŒ±–≤c‚àÇ—î∆íg–ΩŒπ◊†–∫‚Ñì–º–∏œÉœÅq—è—ï—ÇœÖŒΩœâœá—Éz0123456789"},
  {m:"ŒõB·ÑÉDŒ£FGŒâIJKLM–ü”®PQ–Ø∆ß∆¨–¶V–©XYZŒõB·ÑÉDŒ£FGŒâIJKLM–ü”®PQ–Ø∆ß∆¨–¶V–©XYZ0123456789"},
  {m:"–î–ëCDŒûFGH≈ÇJ“úLM–ò–§P«™–ØSŒì–¶V–©XYZ–¥—äcdŒæfg–ΩŒπjŒ∫l–ºn√∏pq—ès—Ç—Üvœâx—áz0123456789"},
  {m:"Ôæë‰πÉcd‰πáfG„ÇìÔæâj„Ç∫lmÂàÄoÔΩ±qÂ∞∫sÔΩ≤u‚àöwÔæíÔæòzÔæë‰πÉcd‰πáfG„ÇìÔæâj„Ç∫lmÂàÄoÔΩ±qÂ∞∫sÔΩ≤u‚àöwÔæíÔæòz0123456789"},
  // --- NEW HYBRID STYLES ---
  {m:"ùêÄùêÅùêÇùêÉùêÑùêÖùêÜùêáùêàùêâùêäùêãùêåùêçùêéùêèùêêùêëùêíùêìùêîùêïùêñùêóùêòùêôabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùë®ùë©ùë™ùë´ùë¨ùë≠ùëÆùëØùë∞ùë±ùë≤ùë≥ùë¥ùëµùë∂ùë∑ùë∏ùëπùë∫ùëªùëºùëΩùëæùëøùíÄùíÅabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùíú‚Ñ¨ùíûùíü‚Ñ∞‚Ñ±ùí¢‚Ñã‚Ñêùí•ùí¶‚Ñí‚Ñ≥ùí©ùí™ùí´ùí¨‚ÑõùíÆùíØùí∞ùí±ùí≤ùí≥ùí¥ùíµabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùìêùìëùìíùììùìîùìïùìñùìóùìòùìôùìöùìõùìúùìùùìûùìüùì†ùì°ùì¢ùì£ùì§ùì•ùì¶ùìßùì®ùì©abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùñ†ùñ°ùñ¢ùñ£ùñ§ùñ•ùñ¶ùñßùñ®ùñ©ùñ™ùñ´ùñ¨ùñ≠ùñÆùñØùñ∞ùñ±ùñ≤ùñ≥ùñ¥ùñµùñ∂ùñ∑ùñ∏ùñπabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùóîùóïÔº£ùóóùóòùóôùóöÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞ùó§ùó•ùó¶Ôº¥ùó®ùó©ùó™ùó´ùó¨ùó≠abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùòàùòâùòäùòãùòåùòçùòéùòèùòêùòëùòíùòìùòîùòïùòñùòóùòòùòôùòöùòõùòúùòùùòûùòüùò†ùò°abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùîÑùîÖ‚Ñ≠ùîáùîàùîâùîä‚Ñå‚Ñëùîçùîéùîèùîêùîëùîíùîìùîî‚Ñúùîñùîóùîòùîôùîöùîõùîú‚Ñ®abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùï¨ùï≠ùïÆùïØùï∞ùï±ùï≤ùï≥ùï¥ùïµùï∂ùï∑ùï∏ùïπùï∫ùïªùïºùïΩùïæùïøùñÄùñÅùñÇùñÉùñÑùñÖabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùî∏ùîπ‚ÑÇùîªùîºùîΩùîæ‚ÑçùïÄùïÅùïÇùïÉùïÑ‚ÑïùïÜ‚Ñô‚Ñö‚Ñùùïäùïãùïåùïçùïéùïèùïê‚Ñ§abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"Ôº°Ôº¢Ôº£Ôº§Ôº•Ôº¶ÔºßÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞Ôº±Ôº≤Ôº≥Ôº¥ÔºµÔº∂Ôº∑Ôº∏ÔºπÔº∫abcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZÔΩÅÔΩÇÔΩÉÔΩÑÔΩÖÔΩÜÔΩáÔΩàÔΩâÔΩäÔΩãÔΩåÔΩçÔΩéÔΩèÔΩêÔΩëÔΩíÔΩìÔΩîÔΩïÔΩñÔΩóÔΩòÔΩôÔΩö0123456789"},
  {m:"‚í∂‚í∑‚í∏‚íπ‚í∫‚íª‚íº‚íΩ‚íæ‚íø‚ìÄ‚ìÅ‚ìÇ‚ìÉ‚ìÑ‚ìÖ‚ìÜ‚ìá‚ìà‚ìâ‚ìä‚ìã‚ìå‚ìç‚ìé‚ìèabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"‚ìê‚ìë‚ìí‚ìì‚ìî‚ìï‚ìñ‚ìó‚ìò‚ìô‚ìö‚ìõ‚ìú‚ìù‚ìû‚ìü‚ì†‚ì°‚ì¢‚ì£‚ì§‚ì•‚ì¶‚ìß‚ì®‚ì©ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},
  {m:"üÑ∞üÑ±üÑ≤üÑ≥üÑ¥üÑµüÑ∂üÑ∑üÑ∏üÑπüÑ∫üÑªüÑºüÑΩüÑæüÑøüÖÄüÖÅüÖÇüÖÉüÖÑüÖÖüÖÜüÖáüÖàüÖâabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"·¥¨·¥Æ·∂ú·¥∞·¥±·∂†·¥≥·¥¥·¥µ·¥∂·¥∑·¥∏·¥π·¥∫·¥º·¥æQ·¥øÀ¢·µÄ·µÅ‚±Ω·µÇÀ£ ∏·∂ªabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZ·µÉ·µá·∂ú·µà·µâ·∂†·µç ∞‚Å± ≤·µèÀ°·µê‚Åø·µí·µñ·µ† ≥À¢·µó·µò·µõ ∑À£ ∏·∂ª0123456789"},
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzùüòùüôùüöùüõùüúùüùùüûùüüùü†ùü°"},
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô"},
  {m:"·ó©·ó∑·ëï·ó™E·ñ¥G·ïºI·íçK·í™·ó∞·ëéO·ë≠·ë´·ñá·îïT·ëå·êØ·óØ·ô≠Y·òîabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ŒõBCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"»∫∆Å∆á∆ä…Ü∆ë∆ìƒ¶…™ ù“†≈Å‚±Æ»†√ò‚±£Íùñ…å≈û≈¶…ÑV≈¥”æ…é∆µabcdefghijklmnopqrstuvwxyz0123456789"},
  {m:"ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâùöäùöãùöåùöçùöéùöèùöêùöëùöíùöìùöîùöïùöñùöóùöòùöôùööùöõùöúùöùùöûùë£ùö†ùö°ùö¢ùö£ùü∂ùü∑ùü∏ùüπùü∫ùüªùüºùüΩùüæùüø"},
  {m:"·¥¨ ô·¥Ñ·¥Ö·¥á“ì…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥òq Äs·¥õ·¥ú·¥†·¥°x è·¥¢abcdefghijklmnopqrstuvwxyz0123456789"}
];
function genFonts(){
  const val=document.getElementById('font-input').value, resBox=document.getElementById('font-results'); resBox.innerHTML=""; if(!val)return;
  let count=0; alphas.forEach(alph=>{ let txt=""; const mapArr=Array.from(alph.m); for(let char of val){ let idx=chars.indexOf(char); txt+=(idx!==-1&&mapArr[idx])?mapArr[idx]:char; }
  let d=document.createElement('div'); d.className="font-item"; d.innerText=txt; d.onclick=()=>{navigator.clipboard.writeText(txt);playShutter();}; resBox.appendChild(d); count++; });
  document.getElementById('font-count').innerText=count+" STYLES";
}

const symData = {
    "Hearts": ["÷∂÷¢÷∏","·µïÃà","‚ù£Ô∏é","-'‚ô°'-","·•´·≠°","„ÄÇ‚ô°","ÃÜÃà","‚ô°Ô∏é","·¢âê≠©","·•´·≠°.","ÀóÀãÀè ‚ô° ÀéÀäÀó","Àö‚Çä¬∑ ÕüÕüÕûÕû‚û≥‚ù•","ñ®Ü‚ô°ñ®Ü","ŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄŸÄÔÆ©Ÿ®ŸÄ‚ù§Ô∏èÔ∏è","‚ô° ·™≤·™≤·™≤","üñ§‚Éùü¶ã","êÄ∂"],
    "Sparkles & Stars": ["‚ú®","‚òÖ","‚òÜ","‚ú°","‚ú¶","‚úß","‚ú©","‚ú™","‚ú´","‚ú¨","‚ú≠","‚úÆ","‚úØ","‚ú∞","‚ÅÇ","‚Åé","‚Åë","‚ú¢","‚ú£","‚ú§","‚ú•","‚ú±","‚ú≤","‚ú≥","‚ú¥","‚úµ","‚ú∂","‚ú∑","‚ú∏","‚úπ","‚ú∫","‚úª","‚úº","‚úΩ","‚úæ","‚úø","‚ùÄ","‚ùÅ","‚ùÇ","‚ùÉ","‚ùÑ","‚ùÖ","‚ùÜ","‚ùá","‚ùà","‚ùâ","‚ùä","‚ùã"],
    "Hanging Stars": ["*Ã£Ã•‚òÜ¬∑ÕôÃ•","‚ÄßÕô‚Å∫Àö*ÔΩ•‡ºì‚òæ","‚òΩ‡ºìÔΩ•*Àö‚Å∫‚ÄßÕô","‚òÖ*","*‚òÖ","‚òÜ.","¬∏.¬∑","¬∑.¬∏","*","**","***"],
    "Arrows": ["‚Üê","‚Üí","‚Üì","‚Üë","‚Üñ","‚Üó","‚Üò","‚Üô","‚Üî","‚Üï","‚Üö","‚Üõ","‚Üú","‚Üù","‚Üû","‚Üü","‚Ü†","‚Ü°","‚Ü¢","‚Ü£","‚Ü§","‚Ü•","‚Ü¶","‚Üß","‚Ü®","‚Ü©","‚Ü™","‚Ü´","‚Ü¨","‚Ü≠","‚ÜÆ","‚ÜØ","‚Ü∞","‚Ü±","‚Ü≤","‚Ü≥","‚Ü¥","‚Ü∂","‚Ü∑","‚Ü∏","‚Üπ","‚Ü∫","‚Üª","‚Üº","‚ÜΩ","‚Üæ","‚Üø","‚áÄ","‚áÅ","‚áÇ","‚áÉ","‚áÑ","‚áÖ","‚áÜ","‚áá","‚áà","‚áâ","‚áä","‚áã","‚áå","‚áç","‚áé","‚áè","‚áï","‚áñ","‚áó","‚áò","‚áô","‚áö","‚áõ","‚áú","‚áù","‚áû","‚áü","‚á†","‚á°","‚á¢","‚á£","‚á§","‚á•","‚á¶","‚áß","‚á®","‚á©","‚á™","‚åÖ","‚åÜ","‚å§","‚èé","‚ñ∂","‚òá","‚òà","‚òä","‚òã","‚òå","‚òç","‚ûî","‚ûò","‚ûô","‚ûö","‚ûõ","‚ûú","‚ûù","‚ûû","‚ûü","‚û†","‚û°","‚û¢","‚û£","‚û§","‚û•","‚û¶","‚ûß","‚û®","‚û©","‚û™","‚û´","‚û¨","‚û≠","‚ûÆ","‚ûØ","‚û±","‚û≤","‚û≥","‚û¥","‚ûµ","‚û∂","‚û∑","‚û∏","‚ûπ","‚û∫","‚ûª","‚ûº","‚ûΩ","‚ûæ","‚§¥","‚§µ","‚Üµ","‚á∞","‚á´","‚á¨","‚á≠","‚á≥","‚áÆ","‚áØ","‚á±","‚á≤","‚á¥","‚áµ","‚á∑","‚á∏","‚áπ","‚á∫","‚áë","‚áì","‚§™","‚§®","‚§ß","‚§©","‚§≠","‚§Æ","‚§Ø","‚§∞","‚§±","‚§≤","‚§´","‚§¨","‚áΩ","‚áæ","‚áø","‚¨≥","‚üø","‚§â","‚§à","‚áª","‚áº","‚¨¥","‚§Ä","‚¨µ","‚§Å","‚¨π","‚§î","‚¨∫","‚§ï","‚¨∂","‚§Ö","‚¨ª","‚§ñ","‚¨∑","‚§ê","‚¨º","‚§ó","‚¨Ω","‚§ò","‚§ù","‚§û","‚§ü","‚§†","‚§°","‚§¢","‚§£","‚§§","‚§•","‚§¶","‚¨ê","‚¨é","‚¨ë","‚¨è","‚§∂","‚§∑","‚•Ç","‚•É","‚•Ñ","‚≠Ä","‚•±","‚•∂","‚•∏","‚≠Ç","‚≠à","‚≠ä","‚•µ","‚≠Å","‚≠á","‚≠â","‚•≤","‚≠ã","‚≠å","‚•≥","‚•¥","‚•Ü","‚•Ö","‚•π","‚•ª","‚¨∞","‚•à","‚¨æ","‚•á","‚¨≤","‚ü¥","‚•∑","‚≠É","‚•∫","‚≠Ñ","‚•â","‚•∞","‚¨ø","‚§≥","‚•ä","‚•ã","‚•å","‚•ç","‚•é","‚•è","‚•ê","‚•ë","‚•í","‚•ì","‚•î","‚•ï","‚•ñ","‚•ó","‚•§","‚•£","‚••","‚•¶","‚•®","‚•ß","‚•©","‚•Æ","‚•Ø","‚•™","‚•¨","‚•´","‚•≠","‚§å","‚§ç","‚§é","‚§è","‚¨∏","‚§ë","‚üµ","‚ü∂","‚ü∑","‚¨Ö","‚¨Ü","‚¨á","‚¨à","‚¨â","‚¨ä","‚¨ã","‚¨å","‚¨ç","‚¨Ñ","‚¨Ä","‚¨Å","‚¨Ç","‚¨É","‚üª","‚üº","‚§í","‚§ì","‚§ô","‚§ö","‚§õ","‚§ú","‚•º","‚•Ω","‚•æ","‚•ø","‚§º","‚§Ω","‚§æ","‚§ø","‚§∏","‚§∫","‚§π","‚§ª","‚•Ä","‚•Å","‚ü≤","‚ü≥","‚¨±","‚ü∏","‚üπ","‚ü∫","‚§Ç","‚§É","‚§Ñ","‚§Ü","‚§á","‚§ä","‚§ã","‚áê","‚áí","‚áî","‚á∂","‚≠Ö","‚≠Ü","‚ü∞","‚ü±"],
    "Astrological": ["‚òâ","‚äï","‚ôÅ","‚òΩ","‚òø","‚ôÄÔ∏é","‚ôÇÔ∏é","‚ôÉ","‚ôÑ","‚ôÖ","‚õ¢","‚ôÜ","‚Øì","‚ôá","‚Øî","‚Øï","‚Øñ","üåëÔ∏é","üåíÔ∏é","üåìÔ∏é","üåîÔ∏é","üåïÔ∏é","üåñÔ∏é","üåóÔ∏é","üåòÔ∏é","‚ö≥","‚ö¥","‚öµ","‚ö∂","‚Øô","‚öï","‚Øö","‚ö∑","‚òÑÔ∏é","‚Ø∞","‚Øò","‚Øó","‚äó","‚ö∏","‚Øû","‚òä","‚òã","‚òø"],
    "Bracket": ["Ôºà","Ôºâ","[","]","„Äê","„Äë","„Äé","„Äè","„Äå","„Äç","„Ää","„Äã","„Äà","„Äâ","„Äî","„Äï","Ô∏π","Ô∏∫","Ô∏∑","Ô∏∏","Ô∏µ","Ô∏∂","Ô∏ª","Ô∏º","Ô∏Ω","Ô∏æ","Ô∏ø","ÔπÄ","ÔπÅ","ÔπÇ","ÔπÉ","ÔπÑ","„õõ","„ôô","„Äñ","„Äó","ÔΩõ","ÔΩù","Ôºú","Ôºû","Ôπ§","Ôπ•","Ôπô","Ôπö","Ôπù","Ôπû","Ôπõ","Ôπú","‚å©","‚å™","¬´","¬ª","‚Äπ","‚Ä∫"],
    "Check Marks": ["‚úì","‚úî","‚úîÔ∏è","‚úÖ","‚úò","‚úó","‚òì","‚à®","‚àö","‚òê","‚òí","‚òë","„§§","„§•","‚úá","üíØ","‚ùå","‚ùé"],
    "Cross": ["‚µú","ê§ï","ê§≤","ìè∂","‚Ä†","‚úù","‚úû","‚úü","‚ò®","‚ò¶","‚ô±","‚ò•","‚ô∞","‚Ä°","‚äπ","‚ò©","‚úô"],
    "Email": ["‚úâÔ∏è","üì®","üìß","üíå","üì©","üì•","üì§","üì´","üì™","üì¨","üì≠","üìÆ","üì¶"],
    "Flowers": ["‚ùÅ","‚ùÉ","‚ùÄ","‚úø","üå∫","üåº","üçÄ","üå∏","üåª","üíÆ","‚úø","‚öò","‚úæ","‚öú","üíê","üå∑","üåπ","‚òò","‚ú•","‚ú§","‚ú£","‚ùà","‚ùâ","‚ùä","‚ùá","‚ùã","‚úΩ","‚úª","‚úº","Íï§","Íï•","üèµÔ∏è","ÍßÅ","ÍßÇ","‚Åï","ÍôÆ","·™•","÷é","ü•Ä","ìáã","ìÅô","ìÜπ","ìáë","ìãá","ìáó","ìáö","ìÜ∏","ìáä","ìá¨","ìÜ±","ìá£","ìÜº","ìáï","ìáõ","ìáü","ìÜ≠","ìÜ∞","ìÅã"],
    "Lines": ["‚îÉ","‚ïΩ","‚ïø","‚ïè","‚ïë","‚ïé","‚îá","Ô∏±","‚îä","Ô∏≥","‚îã","‚îÜ","‚ïµ","„Ä°","‚ïπ","‚ïª","‚ï∑","„Ä¢","„Ä£","‚ò¥","‚òµ","‚ò∂","‚ò∑","‚ò∞","‚ò±","‚ò≤","‚ò≥","Ôπâ","Ôπç","Ôπä","Ôπé","‚â°","‚ïê","‚îÅ","‚îÄ","‚îÑ","‚îà","‚ïå","‚ïç","‚îÖ","‚îâ","‚ï¥","‚ï∂","‚ï∏","‚ï∫","‚ïº","‚ïæ","Ô∏≤","‚ëÜ","‚ëá","‚ëà","‚ëâ","‚ëä","‚ëÑ","‚ëÄ","Ô∏¥","Ôπè","Ôπå","Ôπã","‚ï≤","‚ï±","Ô∏∂","Ô∏µ","„Äµ","„Ä¥","„ÄÜ","`","·êü","‚Äê","‚ÅÉ","‚éØ"],
    "Music": ["‚ô©","‚ô™","‚ô¨","‚ô´","‚ô≠","‚ôÆ","‚ôØ","¬∞","√∏","ÿÇ","‚â†","‚â≠","üé∂","üéµ","üéº","üé§","üéß","üìª","üé∏","üé∑","üéπ","üéª","üé∫","üì£","üì¢","üîä"],
    "Peace": ["‚úå","‚úô","‚úö","‚úõ","‚úú","‚úù","‚úû","‚úü","‚Ä†","‚äπ","‚Ä°","‚òÆ","‚ò∏","‚ò®","‚ò©","‚ò´","‚ò¨","‚ò≠","‚òØ","‚òΩ","‚òæ","‚ôÅ","‚öî","‚ùñ","‚ùÜ","‚ôÖ","‚ú†","‚ú°","‚ú¢","Âçç","Âçê","„Ä∑","‚ò†","‚ò¢","‚ò£","‚ò¶","‚öñ"],
    "Punctuation": ["‚Äí","‚Äì","‚Äî","‚Äï","¬∑","‚Äë","‚Äñ","‚Ä†","‚Ä°","‚Ä∞","‚Ä±"," ∞"," ±"," ≤"," ≥"," ¥"," µ"," ∂"," ∑"," ∏","‚Äó","‚Äò","‚Äô","‚Äö","‚Äõ","‚Äú","‚Äù","‚Äû","‚Äü","‚Ä¢","‚Ä£","‚Ä§","‚Ä•","‚Ä¶","‚Äß","‚Ä≤","‚Ä≥","‚Ä¥","‚Äµ","‚Ä∂","‚Ä∑","‚ùõ","‚ùú","‚ùù","‚ùû"," π"," ∫"," ª"," º"," Ω"," æ"," ø","ÀÄ","ÀÅ","ÀÇ","ÀÉ","ÀÑ","ÀÖ","ÀÜ","Àá","Àê","Àë","Àí","Àì","Àî","Àï","Àñ","Àó","Àò","Àô","Àà","Àâ","Àä","Àã","Àå","Àç","Àé","Àè","Àö","Àõ","Àú","Àù","À†","ÔΩû","¬ø","„ÄÉ","„Äù","„Äû","Ô∏∞","ÔºÅ","Ôπê","Ôπí","Ôπî","Ôπï","Ôºå","Ôºé","Ôºö","Ôºõ","„ÄÅ","„ÄÇ"],
    "Rectangle": ["‚ñÅ","‚ñÇ","‚ñÉ","‚ñÑ","‚ñÄ","‚ñÖ","‚ñÜ","‚ñá","‚ñâ","‚ñä","‚ñã","‚ñà","‚ñå","‚ñê","‚ñç","‚ñé","‚ñè","‚ñï","‚ùò","‚ùô","‚ùö","‚ñî","‚ñ¨","‚ñ≠","‚ñÆ","‚ñØ","‚ñë","‚ñí","‚ñì"],
    "Time & Calendar": ["‚è∞","üïê","üïë","üïí","üïì","üïî","üïï","üïü","üï†","üï°","üï¢","üï£","üï§","üï•","üï¶","üïñ","üïó","üïò","üïô","üïö","üïõ","üïú","üïù","üïû","‚è≥","‚ßñ","‚ßó","‚ãà","‚ßë","‚ßí","‚ßì","‚ßî","‚ßï","‚åõ","üìÖ","üìÜ","üóì","‚åö","‚è±","ùçÑ"],
    "Degree & Weather": ["‚õÖ","‚òÄ","‚òÅ","üåÄ","üåà","‚òÇ","üåÇ","‚òî","‚õÑ","üî•","üíß","üí¶","üåä","üåë","üåì","üåî","üåï","üåô","üåõ","üåå","¬∞","‚ÑÉ","‚Ñâ","œü","‚ö°","‚òÉ","‚òâ","‚òº","‚òΩ","‚òæ","‚ôÅ","‚ô®","‚ùÑ","‚ùÖ","‚ùÜ","‚òá","‚òà","‚òÑ"],
    "Zodiac": ["‚ôàÔ∏é","‚ôâÔ∏é","‚ôäÔ∏é","‚ôãÔ∏é","‚ôåÔ∏é","‚ôçÔ∏é","‚ôéÔ∏é","‚ôèÔ∏é","‚ôêÔ∏é","‚ôëÔ∏é","‚ôíÔ∏é","‚ôìÔ∏é"],
    "Writing": ["‚úê","‚úé","‚úçÔ∏é","‚úè","üìù","‚úí","‚úë","‚úíÔ∏è","‚úâ","üîè"],
    "Dividers": ["„Ä∞","Ôπè","‚Äî","‚îÄ","‚îÅ","‚îÇ","‚îÉ","‚îÑ","‚îÖ","‚îÜ","‚îá","‚îà","‚îâ","‚îä","‚îã","‚ïå","‚ïç","‚ïé","‚ïè","‚ïê","‚ïë","‚ïí","‚ïì","‚ïî","‚ïï","‚ïñ","‚ïó","‚ïò","‚ïô","‚ïö","‚ïõ","‚ïú","‚ïù","‚ïû","‚ïü","‚ï†","‚ï°","‚ï¢","‚ï£","‚ï§","‚ï•","‚ï¶","‚ïß","‚ï®","‚ï©","‚ï™","‚ï´","‚ï¨"],
    "Borders": ["‚ïî","‚ïó","‚ïö","‚ïù","‚ï†","‚ï£","‚ïê","‚ïë","‚ï¨","‚ï≠","‚ïÆ","‚ïØ","‚ï∞","‚ï±","‚ï≤","‚ï≥","‚ñè","‚ñï","‚ññ","‚ñó","‚ñò","‚ñô","‚ñö","‚ñõ","‚ñú","‚ñù","‚ñû","‚ñü"],
    "Triangles": ["‚ñ≤","‚ñ≥","‚ñ¥","‚ñµ","‚ñ∂","‚ñ∑","‚ñ∏","‚ñπ","‚ñ∫","‚ñª","‚ñº","‚ñΩ","‚ñæ","‚ñø","‚óÄ","‚óÅ","‚óÇ","‚óÉ","‚óÑ","‚óÖ","‚ó¢","‚ó£","‚ó§","‚ó•","‚ó¨","‚ó≠","‚óÆ"],
    "Circles & Dots": ["‚Ä¢","‚óã","‚óå","‚óç","‚óé","‚óè","‚óê","‚óë","‚óí","‚óì","‚óî","‚óï","‚óñ","‚óó","‚óò","‚óô","‚óö","‚óõ","‚óú","‚óù","‚óû","‚óü","‚ó†","‚ó°","‚ó¶","‚óß","‚ó®","‚ó©","‚ó™","‚ó´","‚óØ","‚ó∞","‚ó±","‚ó≤","‚ó≥","‚ó¥","‚óµ","‚ó∂","‚ó∑"],
    "Dice": ["‚öÄ","‚öÅ","‚öÇ","‚öÉ","‚öÑ","‚öÖ"],
    "Dominos": ["üÄ∞","üÄ±","üÄ≤","üÄ≥","üÄ¥","üÄµ","üÄ∂","üÄ∑","üÄ∏","üÄπ","üÄ∫","üÄª","üÄº","üÄΩ","üÄæ","üÄø","üÅÄ","üÅÅ","üÅÇ","üÅÉ","üÅÑ","üÅÖ","üÅÜ","üÅá","üÅà","üÅâ","üÅä","üÅã","üÅå","üÅç","üÅé","üÅè","üÅê","üÅë","üÅí","üÅì","üÅî","üÅï","üÅñ","üÅó","üÅò","üÅô","üÅö","üÅõ","üÅú","üÅù","üÅû","üÅü","üÅ†","üÅ°","üÅ¢","üÅ£","üÅ§","üÅ•","üÅ¶","üÅß","üÅ®","üÅ©","üÅ™","üÅ´","üÅ¨","üÅ≠","üÅÆ","üÅØ","üÅ∞","üÅ±","üÅ≤","üÅ≥"],
    "Chess & Cards": ["‚ôî","‚ôï","‚ôñ","‚ôó","‚ôò","‚ôô","‚ôö","‚ôõ","‚ôú","‚ôù","‚ôû","‚ôü","‚ô†","‚ô°","‚ô¢","‚ô£","‚ô§","‚ô•","‚ô¶","‚ôß"]
  ,
    "Others": ["ñ†ö","‚õæ","‚ô®","ìêê","‚òïÔ∏é","ìä§","‚Äß‚ÇäÀö ‚ãÖ","ìêêìé©","‚Äß‚ÇäÀö ‚ãÖ","‚ãÜÀö‚úøÀñ¬∞","ü§é‡æÄ‡Ω≤‡æÄ‡Ω≤‚òïÔ∏é·ù∞.·êü","‚ãÜ‚òïÔ∏é","Àñ","Àô‚úßÀñ¬∞‚òï","‡ºò ‚ãÜÔΩ°","Àö","‚Äß‚ÇäÀö ‚ãÖ","‚òïÔ∏é","ìé©","‚Äß‚ÇäÀö ‚ãÖ"]

};
function renderSymbols(){ const b=document.getElementById('sym-container'); b.innerHTML=""; for(const[c,s]of Object.entries(symData)){ let t=document.createElement('div'); t.className="cat-title"; t.innerText=c; b.appendChild(t); let g=document.createElement('div'); g.className="sym-grid"; s.forEach(sym=>{ let btn=document.createElement('div'); btn.className="sym-btn"; btn.innerText=sym; btn.onclick=()=>{ const tb=document.getElementById('sym-box'), st=tb.selectionStart, en=tb.selectionEnd; tb.value=tb.value.substring(0,st)+sym+tb.value.substring(en); tb.selectionStart=tb.selectionEnd=st+sym.length; tb.focus(); playClick(); }; g.appendChild(btn); }); b.appendChild(g); } }
renderSymbols();

// --- üéµ AUDIO ---
const playlist = ["jfKfPfyJRdk", "BrnDlRmW5hs", "tLYL_3NcJck", "FKtzkolncnk", "_Ojv9Zu1IZY", "OBoMLZTtqb8", "lT8JepVwxBQ"];
function initAudio(){ if(!audioStarted){ audioCtx.resume().then(()=>{ audioStarted=true; if(player&&musicOn){ player.unMute(); player.playVideo(); }});}}
function onYouTubeIframeAPIReady(){ const rId = playlist[Math.floor(Math.random() * playlist.length)]; const sel = document.querySelector('.station-select'); if(sel) sel.value = rId; player=new YT.Player('yt-player',{height:'0',width:'0',videoId:rId,playerVars:{'autoplay':1,'loop':1,'playlist':rId,'mute':0},events:{'onReady':e=>{e.target.setVolume(25);}}});}
function changeMusic(id){ if(player)player.loadVideoById(id); playShutter(); }
function toggleMusic(){ initAudio(); playClick(); musicOn=!musicOn; if(musicOn){ player.playVideo(); mStat.innerText="ON"; mStat.style.color="#ff0000"; }else{ player.pauseVideo(); mStat.innerText="OFF"; mStat.style.color="#888"; }}
function playClick(){ if(audioCtx.state!=='running')audioCtx.resume(); const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.frequency.setValueAtTime(800, audioCtx.currentTime); g.gain.setValueAtTime(0.08, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.1); }
function playShutter(){ if(audioCtx.state!=='running')audioCtx.resume(); const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type='square'; o.frequency.setValueAtTime(150, audioCtx.currentTime); g.gain.setValueAtTime(0.08, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.1); }
// --- üé® ADVANCED COLOR PALETTE DATA & LOGIC ---
const colorData = {
    'Basic': [
        {c:'#000000'}, {c:'#FFFFFF'}, {c:'#FF0000'}, {c:'#00FF00'}, {c:'#0000FF'}, 
        {c:'#FFFF00'}, {c:'#00FFFF'}, {c:'#FF00FF'}, {c:'#FFA500'}, {c:'#800080'}, 
        {c:'#A52A2A'}, {c:'#808080'}
    ],
    'Metallics': [
        {c:'#FFD700', t:'gold'}, {c:'#C0C0C0', t:'silver'}, {c:'#CD7F32', t:'bronze'},
        {c:'#D4AF37', t:'gold'}, {c:'#B8860B', t:'gold'}, {c:'#E5E4E2', t:'silver'}
    ],
    'Grays': [
        {c:'#000000'}, {c:'#1a1a1a'}, {c:'#333333'}, {c:'#4d4d4d'}, {c:'#666666'}, 
        {c:'#808080'}, {c:'#999999'}, {c:'#b3b3b3'}, {c:'#cccccc'}, {c:'#e6e6e6'}, 
        {c:'#ffffff'}
    ],
    'Reds': [
        {c:'#5b0000'}, {c:'#800000'}, {c:'#a52a2a'}, {c:'#b22222'}, {c:'#dc143c'}, 
        {c:'#ff0000'}, {c:'#ff4d4d'}, {c:'#ff6666'}, {c:'#fa8072'}, {c:'#e9967a'}, 
        {c:'#ff6347'}, {c:'#cd5c5c'}
    ],
    'Oranges': [
        {c:'#8b4500'}, {c:'#a0522d'}, {c:'#d2691e'}, {c:'#cd853f'}, {c:'#f4a460'}, 
        {c:'#ff8c00'}, {c:'#ffa500'}, {c:'#ffb347'}, {c:'#ffcc80'}, {c:'#ffe5b4'}
    ],
    'Yellows': [
        {c:'#ffd700'}, {c:'#daa520'}, {c:'#b8860b'}, {c:'#bdb76b'}, {c:'#f0e68c'}, 
        {c:'#khaki'}, {c:'#ffff00'}, {c:'#ffff33'}, {c:'#ffff66'}, {c:'#ffff99'}, 
        {c:'#lightyellow'}, {c:'#ffffe0'}
    ],
    'Greens': [
        {c:'#006400'}, {c:'#008000'}, {c:'#228b22'}, {c:'#2e8b57'}, {c:'#3cb371'}, 
        {c:'#32cd32'}, {c:'#00ff00'}, {c:'#7cfc00'}, {c:'#7fff00'}, {c:'#adff2f'}, 
        {c:'#90ee90'}, {c:'#98fb98'}, {c:'#00fa9a'}, {c:'#00ff7f'}, {c:'#66cdaa'}
    ],
    'Cyans': [
        {c:'#008080'}, {c:'#008b8b'}, {c:'#20b2aa'}, {c:'#48d1cc'}, {c:'#00ced1'}, 
        {c:'#40e0d0'}, {c:'#00ffff'}, {c:'#00ffff'}, {c:'#7fffd4'}, {c:'#afeeee'}, 
        {c:'#e0ffff'}
    ],
    'Blues': [
        {c:'#000080'}, {c:'#00008b'}, {c:'#0000cd'}, {c:'#0000ff'}, {c:'#1e90ff'}, 
        {c:'#4169e1'}, {c:'#6495ed'}, {c:'#87cefa'}, {c:'#87ceeb'}, {c:'#add8e6'}, 
        {c:'#b0c4de'}, {c:'#f0f8ff'}
    ],
    'Purples': [
        {c:'#4b0082'}, {c:'#483d8b'}, {c:'#6a5acd'}, {c:'#7b68ee'}, {c:'#800080'}, 
        {c:'#8b008b'}, {c:'#9400d3'}, {c:'#9932cc'}, {c:'#ba55d3'}, {c:'#dda0dd'}, 
        {c:'#e6e6fa'}
    ],
    'Pinks': [
        {c:'#8b0000'}, {c:'#c71585'}, {c:'#db7093'}, {c:'#ff1493'}, {c:'#ff69b4'}, 
        {c:'#ffb6c1'}, {c:'#ffc0cb'}, {c:'#fff0f5'}
    ]
};

function togglePaletteUI() {
    const el = document.getElementById('palette-wrapper');
    const btn = document.querySelector("button[onclick='togglePaletteUI()']");
    if(el.style.display === 'flex') {
        el.style.display = 'none';
        btn.innerHTML = "COLOR PALETTE üé®";
        btn.style.color = "#ffffff"; btn.style.borderColor = "#ffffff";
    } else {
        el.style.display = 'flex';
        el.classList.add('active');
        btn.innerHTML = "CLOSE PALETTE ‚úñ";
        btn.style.color = "#ffcc00"; btn.style.borderColor = "#ffcc00";
        renderCat('Basic'); // Load Basic by default
    }
    playClick();
}

function renderCat(cat) {
    playClick();
    
    // Highlight active category button
    document.querySelectorAll('.cat-btn').forEach(b => {
        b.classList.remove('active-cat');
        if(b.innerText === cat.toUpperCase()) b.classList.add('active-cat');
    });

    const grid = document.getElementById('color-grid');
    grid.innerHTML = ''; // Clear existing
    grid.classList.remove('show');
    
    // Slight delay for animation effect
    setTimeout(() => {
        const list = colorData[cat];
        list.forEach(item => {
            const d = document.createElement('div');
            d.className = 'c-sq';
            
            // Handle Metallics display
            if(item.t) {
                d.classList.add('is-metal');
                if(item.t==='gold') d.style.background = 'linear-gradient(135deg, #FFD700, #FDB931)';
                if(item.t==='silver') d.style.background = 'linear-gradient(135deg, #E0E0E0, #B0B0B0)';
                if(item.t==='bronze') d.style.background = 'linear-gradient(135deg, #CD7F32, #A0522D)';
            } else {
                d.style.backgroundColor = item.c;
            }

            d.onclick = () => {
                setPlainFrame(item.c, item.t || null);
            };
            grid.appendChild(d);
        });
        grid.classList.add('show');
    }, 10);
}

function setPlainFrame(color, type=null) {
    f = new Image(); // Clear custom frame
    document.getElementById('u2').value = ''; 
    cfg.pColor = color; 
    cfg.pType = type; 
    d(); 
    playClick();
}

// --- üñºÔ∏è FRAME ENGINE & DRAWING ---
let isBoundaryLocked = true;
function toggleBoundaryLock() {
    isBoundaryLocked = !isBoundaryLocked;
    const btn = document.getElementById('lock-btn');
    if (isBoundaryLocked) { 
        btn.innerHTML = "BOUNDARY LOCK: ON üîí"; btn.style.borderColor = "#00ff00"; btn.style.color = "#00ff00"; 
        if(i.src) {
            const rad = cfg.r * Math.PI / 180, cos = Math.abs(Math.cos(rad)), sin = Math.abs(Math.sin(rad));
            const reqW = (cfg.m*2*cos + cfg.m*2*sin), reqH = (cfg.m*2*sin + cfg.m*2*cos);
            const minS = Math.max(reqW/i.width, reqH/i.height);
            zSl.min = minS; if(cfg.s < minS) { cfg.s = minS; zSl.value = minS; zVal.innerText=Math.round((minS/zSl.min)*100)+"%"; }
        }
    } else { btn.innerHTML = "BOUNDARY LOCK: OFF üîì"; btn.style.borderColor = "#ff0000"; btn.style.color = "#ff0000"; zSl.min = 0.1; }
    d(); playClick();
}

function d(){ 
  x.clearRect(0,0,800,800); 
  
  // 1. Calculate Constraints
  if(i.src){
      if (isBoundaryLocked) {
          const rad = cfg.r*Math.PI/180, cos = Math.abs(Math.cos(rad)), sin = Math.abs(Math.sin(rad));
          const reqW = (cfg.m*2*cos + cfg.m*2*sin), reqH = (cfg.m*2*sin + cfg.m*2*cos);
          const minS = Math.max(reqW/i.width, reqH/i.height);
          if(cfg.s < minS) { cfg.s = minS; zSl.value = minS; zVal.innerText=Math.round((minS/zSl.min)*100)+"%"; }
          const rangeX = (i.width*cfg.s - reqW)/2, rangeY = (i.height*cfg.s - reqH)/2;
          cfg.x = Math.max(400-rangeX, Math.min(400+rangeX, cfg.x)); cfg.y = Math.max(400-rangeY, Math.min(400+rangeY, cfg.y));
      } 
  }

  // 2. Draw Image (Clipped)
  x.save(); x.beginPath(); x.arc(400,400,cfg.m,0,6.28); x.clip(); 
  if(i.src){ let w=i.width*cfg.s, h=i.height*cfg.s; x.save(); x.translate(cfg.x,cfg.y); x.rotate(cfg.r*Math.PI/180); x.drawImage(i,-w/2,-h/2,w,h); x.restore(); } 
  x.restore(); 

  // 3. Draw Plain Frame (From New Palette)
  if (cfg.pColor) {
      x.save(); x.beginPath(); x.arc(400, 400, cfg.m, 0, Math.PI * 2); x.lineWidth = 25; 
      if (cfg.pType) {
          // Metadata for Metallics
          let g = x.createLinearGradient(0, 0, 800, 800);
          if (cfg.pType === 'gold') { g.addColorStop(0, '#FFD700'); g.addColorStop(0.25, '#FDB931'); g.addColorStop(0.5, '#FFD700'); g.addColorStop(0.75, '#FDB931'); g.addColorStop(1, '#FFD700'); }
          else if (cfg.pType === 'silver') { g.addColorStop(0, '#E0E0E0'); g.addColorStop(0.5, '#B0B0B0'); g.addColorStop(1, '#E0E0E0'); }
          else if (cfg.pType === 'bronze') { g.addColorStop(0, '#CD7F32'); g.addColorStop(0.5, '#A0522D'); g.addColorStop(1, '#CD7F32'); }
          x.strokeStyle = g;
      } else { 
          // Standard Colors (including Black/Gray/Red etc)
          x.strokeStyle = cfg.pColor; 
      }
      x.stroke(); x.restore();
  }

  // 4. Draw Custom PNG Frame
  if(f.src) x.drawImage(f,0,0,800,800); 
}

function handleFile(e){ 
  let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{
      i=n; let minScale = Math.max(800/i.width,800/i.height); cfg.s = minScale; cfg.x=400; cfg.y=400; cfg.r=0; 
      if (isBoundaryLocked) { zSl.min = minScale; } else { zSl.min = 0.1; } zSl.max = minScale * 2.5; zSl.value = cfg.s; 
      d(); playClick(); updS(zSl); document.getElementById('save').disabled = false;
    }; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); 
}
function handleFrame(e){ let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{f=n; cfg.pColor=null; cfg.pType=null; d(); playClick();}; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); }
function updateZ(v){ cfg.s=parseFloat(v); zVal.innerText=Math.round((v/zSl.min)*100)+"%"; d(); }
function updateR(v){ cfg.r=parseInt(v); rVal.innerText=v+"¬∞"; d(); }
function updateM(v){ cfg.m=parseInt(v); mVal.innerText=v+"px"; d(); }
function centerSubject(){ cfg.x=400; cfg.y=400; cfg.r=0; rSl.value=0; d(); playShutter(); }
function resetProject(){ i=new Image(); f=new Image(); cfg={s:1,m:375,x:400,y:400,r:0, pColor:null, pType:null}; zSl.value=1; rSl.value=0; mSl.value=375; d(); playShutter(); document.getElementById('save').disabled = true;}
function downloadPic(){ if(!i.src) return; d(); let a=document.createElement('a'); a.download=`Arcade_${Date.now()}.png`; a.href=c.toDataURL(); a.click(); playShutter(); }
function updS(el){ if(el.parentElement.classList.contains('ui-gif')) return; el.style.setProperty('--v', ((el.value-el.min)/(el.max-el.min)*100)+'%'); }
document.querySelectorAll('input[type=range]').forEach(el => { el.addEventListener('input', () => updS(el)); updS(el); });
// --- üïπÔ∏è FRAME DRAG LOGIC (MOUSE & TOUCH) ---
let isP=false, tStart={x:0,y:0}, initialDist=0, initialScale=1, initialAngle=0, initialRot=0;

// Prevent default browser drag behaviors on the canvas
c.addEventListener('dragover', (e) => { e.preventDefault(); e.stopPropagation(); });
c.addEventListener('drop', (e) => {
    e.preventDefault(); e.stopPropagation();
    if (e.dataTransfer.files && e.dataTransfer.files[0]) {
        const file = e.dataTransfer.files[0];
        if (file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (v) => {
                let n = new Image();
                n.onload = () => {
                    i = n; let minScale = Math.max(800 / i.width, 800 / i.height);
                    cfg.s = minScale; cfg.x = 400; cfg.y = 400; cfg.r = 0;
                    if(isBoundaryLocked) zSl.min = minScale; else zSl.min = 0.1;
                    zSl.max = minScale * 2.5; zSl.value = minScale;
                    d(); playClick(); updS(zSl); document.getElementById('save').disabled = false;
                }; n.src = v.target.result;
            }; reader.readAsDataURL(file);
        }
    }
});

// Mouse Events
c.onmousedown=e=>{isP=true; tStart={x:e.offsetX,y:e.offsetY};}
c.onmousemove=e=>{ 
    if(!isP)return; 
    let scale = 800 / c.offsetWidth; 
    cfg.x += (e.offsetX - tStart.x) * scale; 
    cfg.y += (e.offsetY - tStart.y) * scale; 
    tStart={x:e.offsetX,y:e.offsetY}; 
    d(); 
}
window.onmouseup=()=>{isP=false;}

// Touch Events (Pan, Zoom, Rotate)
c.ontouchstart=e=>{ 
    if(i.src) { e.preventDefault(); } 
    if(e.touches.length===1){ 
        isP=true; tStart={x:e.touches[0].clientX, y:e.touches[0].clientY}; 
    } else if(e.touches.length===2){ 
        isP=false; 
        const dx = e.touches[0].clientX - e.touches[1].clientX; 
        const dy = e.touches[0].clientY - e.touches[1].clientY; 
        initialDist = Math.sqrt(dx*dx + dy*dy); 
        initialScale = cfg.s; 
        initialAngle = Math.atan2(dy, dx); 
        initialRot = cfg.r; 
    }
}

c.ontouchmove=e=>{ 
    if(i.src) { e.preventDefault(); } 
    if(e.touches.length===1 && isP){ 
        let scale = 800 / c.offsetWidth; 
        let dx = e.touches[0].clientX - tStart.x; 
        let dy = e.touches[0].clientY - tStart.y; 
        cfg.x += dx * scale; 
        cfg.y += dy * scale; 
        tStart={x:e.touches[0].clientX, y:e.touches[0].clientY}; 
        d(); 
    } else if(e.touches.length===2){ 
        const dx = e.touches[0].clientX - e.touches[1].clientX; 
        const dy = e.touches[0].clientY - e.touches[1].clientY; 
        const dist = Math.sqrt(dx*dx + dy*dy); 
        const scaleFactor = dist / initialDist; 
        let newScale = initialScale * scaleFactor; 
        newScale = Math.max(zSl.min, Math.min(zSl.max, newScale)); 
        cfg.s = newScale; zSl.value = newScale; zVal.innerText=Math.round((newScale/zSl.min)*100)+"%"; updS(zSl); 
        
        const angle = Math.atan2(dy, dx); 
        let rotationDiff = (angle - initialAngle) * (180/Math.PI); 
        cfg.r = (initialRot + rotationDiff) % 360; 
        rSl.value = (cfg.r % 360 + 360) % 360; 
        rVal.innerText = Math.round(cfg.r) + "¬∞"; updS(rSl); 
        d(); 
    }
}
window.ontouchend=()=>{isP=false;}

// --- ‚ö° GIF ENGINE ---
const workerBlob = new Blob([`importScripts('https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js');`], { type: 'application/javascript' });
const workerUrl = URL.createObjectURL(workerBlob);

const gfInput=document.getElementById('gfInput'), upBtn=document.getElementById('upBtn'), v=document.getElementById('v'), o=document.getElementById('o'), vp=document.getElementById('vp');
const speed=document.getElementById('speed'), sv=document.getElementById('sv'), zoom=document.getElementById('zoom'), zv=document.getElementById('zv'), go=document.getElementById('go'), msg=document.getElementById('msg');
const dlBox=document.getElementById('dlBox'), dl=document.getElementById('dl'), resetBox=document.getElementById('resetBox');

let gifX=0, gifY=0, vidW=0, vidH=0, renderW, renderH;

function resetGifProject() { 
    v.src=''; o.style.display='none'; v.style.display='none'; 
    dlBox.style.display='none'; resetBox.style.display='none'; 
    document.getElementById('goBox').style.display='inline-block'; 
    go.disabled=false; upBtn.disabled=false; zoom.disabled=false; speed.disabled=false; 
    msg.classList.remove('active'); zoom.value=100; zv.innerText="100%"; 
    gfInput.value = ''; gifX = 0; gifY = 0; 
    v.style.transform = `translate(-50%, -50%) scale(1)`; 
    vp.style.pointerEvents = 'auto'; 
    document.getElementById('upWrapper').style.display='inline-block'; 
}

gfInput.onchange=(e)=>{ 
    const file=e.target.files[0]; if(!file)return; 
    v.style.display='block'; o.style.display='none'; dlBox.style.display='none'; resetBox.style.display='none'; 
    v.src=URL.createObjectURL(file); v.playbackRate=parseFloat(speed.value); 
    go.disabled = false; 
    v.onloadedmetadata=()=>{ vidW = v.videoWidth; vidH = v.videoHeight; setCoverSize(); v.play(); }; 
};

function setCoverSize() { 
    const boxSize = 320; const aspect = vidW / vidH; 
    if(aspect > 1) { renderH = boxSize; renderW = boxSize * aspect; } else { renderW = boxSize; renderH = boxSize / aspect; } 
    v.style.width = renderW + 'px'; v.style.height = renderH + 'px'; 
    updateGifTransform(); 
}

function updateGifTransform() { 
    if(!v.src) return; 
    const z = parseInt(zoom.value) / 100; 
    const currentW = renderW * z; const currentH = renderH * z; 
    const maxX = Math.max(0, (currentW - 320) / 2); const maxY = Math.max(0, (currentH - 320) / 2); 
    gifX = Math.max(-maxX, Math.min(maxX, gifX)); gifY = Math.max(-maxY, Math.min(maxY, gifY)); 
    v.style.transform = `translate(calc(-50% + ${gifX}px), calc(-50% + ${gifY}px)) scale(${z})`; 
}

zoom.oninput = function() { zv.innerText = this.value + '%'; updateGifTransform(); };
speed.oninput=()=>{ sv.innerText=speed.value+'x'; if(v.src)v.playbackRate=parseFloat(speed.value); };

// GIF Draggable Logic
let isGifDrag = false, startX, startY, initX, initY;
vp.addEventListener('touchstart', e => { 
    if(!v.src || v.style.display === 'none' || v.getAttribute('src') === '') return; 
    isGifDrag = true; startX = e.touches[0].clientX; startY = e.touches[0].clientY; initX = gifX; initY = gifY; 
}, {passive: false});

vp.addEventListener('touchmove', e => { 
    if(!v.src || v.style.display === 'none' || v.getAttribute('src') === '') return; 
    if(!isGifDrag) return; e.preventDefault(); 
    const dx = e.touches[0].clientX - startX; const dy = e.touches[0].clientY - startY; 
    gifX = initX + dx; gifY = initY + dy; updateGifTransform(); 
}, {passive: false});

vp.addEventListener('mousedown', e => { 
    if(!v.src) return; isGifDrag = true; startX = e.clientX; startY = e.clientY; initX = gifX; initY = gifY; 
});
window.addEventListener('mousemove', e => { 
    if(!isGifDrag) return; 
    const dx = e.clientX - startX; const dy = e.clientY - startY; 
    gifX = initX + dx; gifY = initY + dy; updateGifTransform(); 
});
window.addEventListener('mouseup', () => isGifDrag = false); 
window.addEventListener('touchend', () => isGifDrag = false);

// Render GIF
go.onclick=()=>{
    if(!v.src)return;
    go.disabled = true; upBtn.disabled = true; zoom.disabled = true; speed.disabled = true;
    vp.style.pointerEvents = 'none'; msg.innerText="Processing..."; msg.classList.add('active');
    
    const gif=new GIF({workers:30, quality:20, width:480, height:480, workerScript:workerUrl, dither: false});
    const canvas=document.createElement('canvas'); canvas.width=480; canvas.height=480; const ctx=canvas.getContext('2d');
    const fps=15, duration=v.duration, playbackSpeed=parseFloat(speed.value), capVid=document.createElement('video');
    
    capVid.src=v.src; capVid.muted=true; capVid.playsInline=true; capVid.crossOrigin = "anonymous";
    
    capVid.onloadeddata=()=>{
        let cTime=0; 
        const scale = parseInt(zoom.value) / 100; 
        const aspect = capVid.videoWidth / capVid.videoHeight; 
        let drawW, drawH;
        if (aspect > 1) { drawH = 480; drawW = 480 * aspect; } else { drawW = 480; drawH = 480 / aspect; }
        drawW *= scale; drawH *= scale; 
        const dragScale = 480 / 320; 
        const finalX = gifX * dragScale; const finalY = gifY * dragScale; 
        let dx = (480 - drawW) / 2 + finalX; let dy = (480 - drawH) / 2 + finalY;
        
        const captureFrame=()=>{ 
            if(cTime>=duration){ msg.innerText="Encoding..."; gif.render(); return; } 
            capVid.currentTime=cTime; 
        };
        
        capVid.onseeked=()=>{ 
            ctx.fillStyle = '#000000'; ctx.fillRect(0, 0, 480, 480); 
            ctx.drawImage(capVid, dx, dy, drawW, drawH); 
            gif.addFrame(ctx,{copy:true, delay:(1000/fps)/playbackSpeed}); 
            cTime+=(1/fps); setTimeout(captureFrame, 10); 
        };
        captureFrame();
    };
    
    gif.on('finished', blob=>{ 
        const url=URL.createObjectURL(blob), rNum=Math.floor(Math.random()*90000)+10000; 
        v.style.display='none'; o.src=url; o.style.display='block'; 
        dl.download=`neon_focus_${rNum}.gif`; dl.href=url; 
        dlBox.style.display='inline-block'; resetBox.style.display='inline-block'; 
        msg.classList.remove('active'); 
        document.getElementById('goBox').style.display='none'; 
        upBtn.parentElement.style.display='none'; 
        vp.style.pointerEvents = 'auto'; 
    });
};
</script>
</body>
</html>

