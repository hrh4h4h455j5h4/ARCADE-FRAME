<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>

<style>
  /* --- GLOBAL SETTINGS --- */
  html { scroll-behavior: smooth; overflow-y: auto; }
  body {
    background: #0a0a0c; color: white; font-family: sans-serif;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; margin: 0; padding-bottom: 150px; 
    -webkit-overflow-scrolling: touch; 
    background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 100% 4px; touch-action: pan-y; overflow-x: hidden;
  }

  /* --- NEON CLOCK --- */
  #arcade-clock {
    margin-top: 15px; font-family: monospace; font-size: 24px; font-weight: bold;
    color: #ff0000; text-shadow: 0 0 10px #ff0000;
    background: rgba(255, 0, 0, 0.05); padding: 5px 15px; border-radius: 4px;
    border: 1px solid rgba(255, 0, 0, 0.3);
  }

  /* --- ABOUT OVERLAY --- */
  #about-overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 200000;
    display: none; align-items: center; justify-content: center; padding: 20px;
  }
  .about-content {
    background: #1a1a1c; border: 2px solid #00ffff; border-radius: 15px;
    padding: 30px; max-width: 500px; line-height: 1.6; position: relative;
    box-shadow: 0 0 30px rgba(0,255,255,0.3);
  }
  .about-content h2 { color: #00ffff; margin-top: 0; }
  .close-about { position: absolute; top: 15px; right: 15px; cursor: pointer; color: #888; }

  /* --- TOUCH RIPPLE --- */
  .ripple {
    position: fixed; border: 2px solid #ff0000; border-radius: 50%;
    transform: scale(0); animation: rippleEffect 0.5s linear;
    pointer-events: none; z-index: 999999;
  }
  @keyframes rippleEffect {
    to { transform: scale(3.5); opacity: 0; }
  }

  /* --- NAVIGATION --- */
  .menu-toggle { position: fixed; top: 15px; left: 15px; background: #1a1a1c; color: #fff; border: 1px solid rgba(255,255,255,0.1); padding: 8px 12px; border-radius: 4px; font-weight: bold; cursor: pointer; z-index: 100000; }
  #view-toggle { position: fixed; top: 15px; right: 15px; background: #1a1a1c; border: 1px solid #00ffff; padding: 8px 12px; border-radius: 4px; z-index: 100000; cursor: pointer; }

  #menu-panel { 
    position: fixed; top: 0; left: -260px; width: 240px; height: 100%; 
    background: #1a1a1c; padding-top: 60px; transition: 0.3s ease; 
    z-index: 99999; display: flex; flex-direction: column; gap: 12px; 
    padding-left: 15px; padding-right: 15px; box-sizing: border-box; padding-bottom: 80px; 
  }
  #menu-panel.open { left: 0; }

  .menu-section { border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 5px; }
  .menu-lbl { font-size: 10px; font-weight: 900; color: #00ffff; text-transform: uppercase; }

  .switch-container { position: relative; width: 100%; }
  #switch-btn { background: rgba(255,255,255,0.05); color: white; border: 2px solid #ff0000; padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 11px; width: 100%; }
  #switch-menu { position: absolute; top: 45px; left: 0; background: #1a1a1c; border: 1px solid #ff0000; border-radius: 8px; width: 100%; display: none; flex-direction: column; z-index: 100001; }
  #switch-menu button { background: transparent; color: #aaa; border: none; padding: 12px; text-align: left; font-size: 11px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.05); }

  .lnk { display: flex; align-items: center; gap: 10px; padding: 12px; text-decoration: none; color: white; font-size: 13px; font-weight: bold; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); }
  .lnk svg { width: 18px; height: 18px; fill: white; }

  /* HEADERS */
  h1 { color: #fff; margin: 20px 0 0 0; font-family: "Arial Black", sans-serif; font-style: italic; font-size: 36px; text-shadow: 2px 2px 0px #ff0000; animation: arcadeBounce 1.8s infinite ease-in-out; }
  @keyframes arcadeBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .sub { font-weight: bold; margin-bottom: 15px; font-size: 11px; letter-spacing: 2px; }
  
  .studio-sec { display: none; width: 320px; flex-direction: column; align-items: center; }
  .active-sec { display: flex; }

  /* --- üñºÔ∏è FRAME STUDIO CSS --- */
  #box { position: relative; width: 310px; height: 310px; border-radius: 50%; overflow: hidden; border: 3px solid #ff0000; z-index: 10; }
  canvas#c { width: 310px; height: 310px; touch-action: none; }
  .ui { margin-top: 20px; width: 310px; display: flex; flex-direction: column; gap: 6px; }
  .btn { background: #111; border: 2px solid #ffffff; color: white; padding: 10px; text-align: center; border-radius: 8px; font-weight: bold; font-size: 12px; cursor: pointer; width: 100%; box-sizing: border-box; }
  .btn-r { border-color: #ff0000; }
  .lbl { font-size: 9px; color: #888; text-transform: uppercase; display: flex; justify-content: space-between; width: 100%; }
  .val-tag { color: #ff0000; font-weight: bold; }

  /* --- ‚ö° GIF STUDIO CSS --- */
  .viewport { position: relative; width: 320px; height: 320px; border-radius: 50%; overflow: hidden; background: #000; display: flex; justify-content: center; align-items: center; }
  #v { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
  #o { width: 100%; height: 100%; object-fit: contain; display: none; }
  .ui-gif { background: rgba(10, 10, 10, 0.9); padding: 25px; border-radius: 30px; width: 340px; border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; }

  /* --- FONT & SYMBOLS --- */
  .font-input { width: 100%; background: #111; border: 2px solid #00ffff; color: #fff; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 15px; outline: none; }
  .font-scroll { width: 100%; max-height: 400px; overflow-y: auto; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; }
  .font-item { background: #1a1a1c; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 16px; text-align: center; cursor: pointer; }
  .sym-grid { display: flex; flex-wrap: wrap; gap: 5px; padding: 10px; }
  .sym-btn { background: #1a1a1c; border: 1px solid #333; color: white; padding: 15px 0; font-size: 20px; border-radius: 6px; cursor: pointer; flex: 1 0 18%; text-align: center; }

  input[type=file], #yt-player { display: none; }
</style>
</head>
<body onclick="createRipple(event)">

<div id="arcade-clock">00:00:00</div>

<button class="menu-toggle" onclick="toggleMenu(event)">MENU ‚ò∞</button>
<button id="view-toggle" onclick="toggleViewMode()">üñ•Ô∏è</button>

<div id="menu-panel">
  <div class="menu-section">
    <div class="menu-lbl">Studio Selection</div>
    <div class="switch-container">
      <button id="switch-btn" onclick="toggleSwitchMenu(event)">SELECT TOOL üìÇ</button>
      <div id="switch-menu">
        <button onclick="changeStudio('frame')">üñºÔ∏è Frame Studio</button>
        <button onclick="changeStudio('font')">‚úçÔ∏è Font Generator</button>
        <button onclick="changeStudio('gif')">‚ö° GIF Maker</button>
        <button onclick="changeStudio('sym')">‚ú® Symbols Studio</button>
      </div>
    </div>
  </div>

  <div class="menu-section">
    <div class="menu-lbl">Music Player</div>
    <div onclick="toggleMusic()" style="display:flex; justify-content:space-between; font-size:12px; cursor:pointer;">
      <span>POWER</span> <span id="m-status" style="color:#ff0000;">ON</span>
    </div>
    <select id="track-select" style="width:100%; margin-top:5px; background:#222; color:white; border:1px solid #444;" onchange="changeMusic(this.value)">
      <option value="jfKfPfyJRdk">‚òï Lofi Focus</option>
      <option value="nv_2rz5BFDA">üïπÔ∏è Retro Wave</option>
    </select>
  </div>

  <div class="menu-section">
    <div class="menu-lbl">Button SFX</div>
    <select id="sfx-select" style="width:100%; background:#222; color:white; border:1px solid #444;">
      <option value="arcade">üïπÔ∏è Arcade Click</option>
      <option value="bubble">ü´ß Soft Pop</option>
      <option value="switch">‚å®Ô∏è Quiet Switch</option>
      <option value="bit">üëæ 8-Bit Tone</option>
    </select>
  </div>

  <button class="btn" style="border-color:#00ffff; color:#00ffff;" onclick="showAbout()">ABOUT STUDIO ‚ÑπÔ∏è</button>

  <a href="https://discord.gg/ardc" target="_blank" class="lnk" style="border-color:#5865F2;">
    <svg viewBox="0 0 127.14 96.36"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c2.36-24.44-5.42-48.18-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/></svg>
    <span>Join Discord</span>
  </a>
</div>

<div id="about-overlay" onclick="hideAbout()">
    <div class="about-content" onclick="event.stopPropagation()">
        <span class="close-about" onclick="hideAbout()">‚úñ</span>
        <h2 style="font-style:italic;">ARCADE STUDIO ‚ÑπÔ∏è</h2>
        <p>A professional HUD built for the elite gaming community. <b>Arcade Studio</b> delivers high-speed creative tools for Discord profiles and tournament winners.</p>
        <p><b>‚ö° Engine:</b> Our HD GIF processor handles heavy video files with instant real-time encoding.</p>
        <p><b>üñºÔ∏è Logic:</b> Custom <b>Constraint Logic</b> ensures your profile frames are locked perfectly to the circle. No black gaps, ever.</p>
        <p><b>üéÆ Status:</b> Stand out in tournaments and giveaways with pixel-perfect profile aesthetics.</p>
    </div>
</div>

<div id="yt-player"></div>

<h1 id="studio-name">ARCADE</h1>
<p class="sub" id="studio-sub">FRAME STUDIO</p>

<div id="frame-studio" class="studio-sec active-sec">
  <div id="box"><canvas id="c" width="800" height="800"></canvas></div>
  <div class="ui">
    <label class="btn">CHOOSE IMAGE<input type="file" id="u1" accept="image/*" onchange="handleFile(event)"></label>
    <label class="btn btn-r">APPLY FRAME<input type="file" id="u2" accept="image/*" onchange="handleFrame(event)"></label>
    <button class="btn" style="border-color:#00ffff; color:#00ffff;" onclick="centerSubject()">CENTER SUBJECT üéØ</button>
    <button class="btn" style="border-color:#ff0000; color:#ff0000;" onclick="resetProject()">RESET PROJECT ‚Üª</button>
    <div class="lbl">ZOOM <span id="z-val" class="val-tag">100%</span></div>
    <input type="range" id="z" min="0.1" max="4" step="0.01" value="1" oninput="updateZ(this.value)">
    <div class="lbl">ROTATE <span id="r-val" class="val-tag">0¬∞</span></div>
    <input type="range" id="r" min="0" max="360" step="1" value="0" oninput="updateR(this.value)">
    <button id="save" class="btn" onclick="downloadPic()" disabled>DOWNLOAD PICTURE</button>
  </div>
</div>

<div id="font-studio" class="studio-sec">
  <input type="text" id="font-input" class="font-input" placeholder="Type text here..." oninput="genFonts()">
  <div id="font-results" class="font-scroll"></div>
</div>

<div id="gif-studio" class="studio-sec">
    <div class="viewport" id="vp"><video id="v" muted playsinline loop></video><img id="o"></div>
    <div class="ui-gif" style="margin-top:20px;">
        <button class="btn-upload" onclick="document.getElementById('gfInput').click()">UPLOAD VIDEO</button>
        <input type="file" id="gfInput" accept="video/*">
        <div class="neon-wrap"><button id="go" class="btn-inner">‚ö° CREATE HD GIF</button></div>
        <div id="dlBox" class="neon-wrap" style="display:none;"><a id="dl" class="btn-inner">‚¨áÔ∏è DOWNLOAD</a></div>
    </div>
</div>

<div id="sym-studio" class="studio-sec">
    <input type="text" id="sym-box" class="font-input" placeholder="Tapped symbols appear here...">
    <div id="sym-container" class="font-scroll"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const c=document.getElementById('c'),x=c.getContext('2d'),zSl=document.getElementById('z'),rSl=document.getElementById('r'),panel=document.getElementById('menu-panel'),mStat=document.getElementById('m-status'), sName=document.getElementById('studio-name'), sSub=document.getElementById('studio-sub'), swMenu=document.getElementById('switch-menu');
const zVal=document.getElementById('z-val'),rVal=document.getElementById('r-val');
let i=new Image(),f=new Image(),cfg={s:1,m:375,x:400,y:400,r:0},player,musicOn=true,audioStarted=false;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

// --- ‚è∞ CLOCK ---
function updateClock() { const now = new Date(); document.getElementById('arcade-clock').innerText = now.toTimeString().split(' ')[0]; }
setInterval(updateClock, 1000); updateClock();

// --- üåä DYNAMIC RIPPLES ---
function createRipple(e) {
    playClick();
    const ripple = document.createElement("div");
    ripple.className = "ripple";
    let color = "#ff0000"; // Default Red
    if (musicOn && player) {
        const track = document.getElementById('track-select').value;
        if (track === 'jfKfPfyJRdk') color = "#ff00ff"; // Lofi Pink
        if (track === 'nv_2rz5BFDA') color = "#00ffff"; // Retro Cyan
    }
    ripple.style.borderColor = color;
    ripple.style.boxShadow = `0 0 15px ${color}`;
    ripple.style.left = e.clientX - 25 + "px";
    ripple.style.top = e.clientY - 25 + "px";
    ripple.style.width = ripple.style.height = "50px";
    document.body.appendChild(ripple);
    ripple.onanimationend = () => ripple.remove();
}

// --- üîä CALMER SFX ---
function playClick() {
    if (!audioStarted) return;
    const type = document.getElementById('sfx-select').value;
    const o = audioCtx.createOscillator(), g = audioCtx.createGain();
    o.connect(g); g.connect(audioCtx.destination);
    if (type === 'arcade') { o.frequency.setValueAtTime(600, audioCtx.currentTime); g.gain.setValueAtTime(0.04, audioCtx.currentTime); }
    else if (type === 'bubble') { o.type='sine'; o.frequency.setValueAtTime(300, audioCtx.currentTime); o.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime+0.05); g.gain.setValueAtTime(0.03, audioCtx.currentTime); }
    else if (type === 'switch') { o.type='square'; o.frequency.setValueAtTime(100, audioCtx.currentTime); g.gain.setValueAtTime(0.02, audioCtx.currentTime); }
    else { o.frequency.setValueAtTime(1200, audioCtx.currentTime); o.frequency.exponentialRampToValueAtTime(400, audioCtx.currentTime+0.1); g.gain.setValueAtTime(0.02, audioCtx.currentTime); }
    o.start(); o.stop(audioCtx.currentTime + 0.1);
}
function playShutter() { const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type='square'; o.frequency.setValueAtTime(150, audioCtx.currentTime); g.gain.setValueAtTime(0.05, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.1); }

// --- üìª MUSIC ---
function initAudio(){ if(!audioStarted){ audioCtx.resume().then(()=>{ audioStarted=true; if(player&&musicOn){ player.unMute(); player.playVideo(); }});}}
function onYouTubeIframeAPIReady(){ player=new YT.Player('yt-player',{height:'0',width:'0',videoId:'jfKfPfyJRdk',playerVars:{'autoplay':1,'loop':1,'playlist':'jfKfPfyJRdk'},events:{'onReady':e=>{e.target.setVolume(25);}}});}
function changeMusic(id){ if(player)player.loadVideoById(id); playShutter(); }
function toggleMusic(){ initAudio(); musicOn=!musicOn; if(musicOn){ player.playVideo(); mStat.innerText="ON"; mStat.style.color="#ff0000"; }else{ player.pauseVideo(); mStat.innerText="OFF"; mStat.style.color="#888"; }}

// --- ‚ÑπÔ∏è HELPERS ---
function showAbout(){ document.getElementById('about-overlay').style.display='flex'; }
function hideAbout(){ document.getElementById('about-overlay').style.display='none'; }
function toggleMenu(e){ e.stopPropagation(); initAudio(); panel.classList.toggle('open'); }
function toggleSwitchMenu(e){ e.stopPropagation(); swMenu.style.display = swMenu.style.display==='flex'?'none':'flex'; }
function toggleViewMode(){ document.body.classList.toggle('pc-mode'); }

// --- üñºÔ∏è FRAME ENGINE (CONSTRAINT LOGIC) ---
function d(){ 
  x.clearRect(0,0,800,800); 
  if(i.src) {
     let w = i.width * cfg.s, h = i.height * cfg.s;
     let minDim = Math.min(w, h);
     let maxDist = (minDim > 800) ? (minDim - 800) / 2 : 0;
     if(cfg.x < 400 - maxDist) cfg.x = 400 - maxDist;
     if(cfg.x > 400 + maxDist) cfg.x = 400 + maxDist;
     if(cfg.y < 400 - maxDist) cfg.y = 400 - maxDist;
     if(cfg.y > 400 + maxDist) cfg.y = 400 + maxDist;
  }
  x.save(); x.beginPath(); x.arc(400,400,375,0,6.28); x.clip(); 
  if(i.src){ let w=i.width*cfg.s, h=i.height*cfg.s; x.save(); x.translate(cfg.x,cfg.y); x.rotate(cfg.r*Math.PI/180); x.drawImage(i,-w/2,-h/2,w,h); x.restore(); } 
  x.restore(); if(f.src) x.drawImage(f,0,0,800,800); 
}

function handleFile(e){ 
  let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{
    i=n; let minScale = Math.max(800/i.width, 800/i.height);
    cfg.s = minScale; cfg.x = 400; cfg.y = 400; cfg.r = 0; 
    zSl.min = minScale; zSl.max = minScale * 5; zSl.value = minScale;
    zVal.innerText = "100%"; d(); document.getElementById('save').disabled = false;
  }; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); 
}
function handleFrame(e){ let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{f=n; d();}; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); }
function updateZ(v){ cfg.s=parseFloat(v); zVal.innerText=Math.round((v/zSl.min)*100)+"%"; d(); }
function updateR(v){ cfg.r=parseInt(v); rVal.innerText=v+"¬∞"; d(); }
function centerSubject(){ cfg.x=400; cfg.y=400; cfg.r=0; rSl.value=0; d(); }
function resetProject(){ i=new Image(); f=new Image(); cfg={s:1,x:400,y:400,r:0}; d(); document.getElementById('save').disabled=true;}
function downloadPic(){ d(); let a=document.createElement('a'); a.download=`Arcade_${Date.now()}.png`; a.href=c.toDataURL(); a.click(); playShutter(); }

// --- üïπÔ∏è TOUCH ---
let isP=false, tStart={x:0,y:0};
c.onmousedown=e=>{isP=true; tStart={x:e.offsetX,y:e.offsetY};}
c.onmousemove=e=>{ if(!isP)return; let scale = 800 / c.offsetWidth; cfg.x += (e.offsetX - tStart.x) * scale; cfg.y += (e.offsetY - tStart.y) * scale; tStart={x:e.offsetX,y:e.offsetY}; d(); }
window.onmouseup=()=>{isP=false;}

function changeStudio(mode) {
  document.querySelectorAll('.studio-sec').forEach(s => s.classList.remove('active-sec')); 
  swMenu.style.display = 'none'; panel.classList.remove('open');
  if(mode === 'frame') { document.getElementById('frame-studio').classList.add('active-sec'); sName.innerText = "ARCADE"; sSub.innerText = "FRAME STUDIO"; }
  else if(mode === 'font') { document.getElementById('font-studio').classList.add('active-sec'); sName.innerText = "FONTS"; sSub.innerText = "GENERATOR"; }
  else if(mode === 'gif') { document.getElementById('gif-studio').classList.add('active-sec'); sName.innerText = "NEON"; sSub.innerText = "GIF STUDIO"; }
  else if(mode === 'sym') { document.getElementById('sym-studio').classList.add('active-sec'); sName.innerText = "SYMBOLS"; sSub.innerText = "STUDIO"; }
}
</script>
</body>
</html>
