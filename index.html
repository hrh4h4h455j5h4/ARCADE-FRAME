<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>
<style>
  /* BACKGROUND: Clean Black */
  body {
    background: #0a0a0c;
    color: white;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    overscroll-behavior: none;
  }

  /* HEADER: White Text with Red Glow */
  h1{color:#ffffff;margin:50px 0 0 0;text-shadow:0 0 15px #ff0000, 0 0 30px #ff0000;letter-spacing:2px;text-transform:uppercase;font-size:24px;}
  /* FRAME STUDIO: Changed to White */
  p{color:#ffffff;font-weight:bold;margin:2px 0 10px 0;text-transform:uppercase;font-size:11px;letter-spacing:1px;}
  
  /* Studio Box */
  #box{position:relative;width:310px;height:310px;border-radius:50%;overflow:hidden;background-image:linear-gradient(45deg,#111 25%,transparent 25%),linear-gradient(-45deg,#111 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#111 75%),linear-gradient(-45deg,transparent 75%,#111 75%);background-size:20px 20px;box-shadow:0 0 20px rgba(0,0,0,0.5);-webkit-mask-image:-webkit-radial-gradient(white,black);}
  canvas{position:absolute;top:0;left:0;width:310px;height:310px;touch-action:none;}
  
  /* CONTROLS */
  .ui{margin-top:10px;width:300px;display:flex;flex-direction:column;gap:6px;}
  
  /* Buttons */
  .btn{background:#111;border:2px solid #ffffff;color:white;padding:10px;text-align:center;border-radius:8px;font-weight:bold;display:block;font-size:12px;}
  .btn-r{border-color:#ff0000;} /* Red Border */
  
  .lbl{font-size:9px;color:#888;text-transform:uppercase;margin-top:2px;display:flex;justify-content:space-between;}
  
  /* Sliders: Red Accent */
  input[type=range]{width:100%;accent-color:#ff0000;margin:2px 0;cursor:pointer;}
  
  /* Download Button: Red Background */
  #save{background:#ff0000;border:none;font-size:14px;color:white;padding:12px;border-radius:8px;font-weight:bold;margin-top:4px;cursor:pointer;}
  
  input[type=file]{display:none;}
  
  /* MENU SYSTEM */
  .menu{position:absolute;top:10px;left:10px;display:flex;flex-direction:column;gap:8px;z-index:99;}
  .lnk{display:flex;align-items:center;gap:6px;padding:6px 10px;border-radius:50px;text-decoration:none;color:white;font-size:10px;font-weight:bold;backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,0.2);background:rgba(0,0,0,0.5);}
  .dsc{border-color:#5865F2;background:rgba(88,101,242,0.15);} 
  .web{border-color:#00ffff;background:rgba(0,255,255,0.15);}
  .lnk svg{width:14px;height:14px;fill:white;}
</style>
</head>
<body>

<div class="menu">
  <a href="https://discord.gg/ardc" target="_blank" class="lnk dsc">
    <svg viewBox="0 0 127.14 96.36"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c2.36-24.44-5.42-48.18-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/></svg>
    <span>Discord Server</span>
  </a>

  <a href="https://platopedia.com/groups/arcade" target="_blank" class="lnk web">
    <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
    <span>Arcade Website</span>
  </a>
</div>

<h1>ARCADE</h1>
<p>FRAME STUDIO</p>

<div id="box"><canvas id="c" width="800" height="800"></canvas></div>

<div class="ui">
  <label class="btn">STEP 1: CHOOSE PHOTO<input type="file" id="u1" accept="image/*"></label>
  <label class="btn btn-r">STEP 2: UPLOAD FRAME<input type="file" id="u2" accept="image/*"></label>
  
  <div class="lbl">ZOOM PHOTO</div>
  <input type="range" id="z" min="0.1" max="4" step="0.01" value="1">
  
  <div class="lbl"><span style="color:#ff0000;">CIRCLE SIZE (FIX GAPS)</span></div>
  <input type="range" id="m" min="300" max="400" step="1" value="375">

  <button id="save">DOWNLOAD PFP</button>
</div>

<script>
const c=document.getElementById('c'),x=c.getContext('2d'),z=document.getElementById('z'),m=document.getElementById('m');
let i=new Image(),f=new Image(),cfg={s:1,m:375,x:400,y:400,d:false,lx:0,ly:0};

function d(){
  x.clearRect(0,0,800,800);
  x.save();x.beginPath();x.arc(400,400,cfg.m,0,6.28);x.clip();
  if(i.src){let w=i.width*cfg.s,h=i.height*cfg.s;x.drawImage(i,cfg.x-w/2,cfg.y-h/2,w,h);}
  x.restore();
  if(f.src)x.drawImage(f,0,0,800,800);
}

document.getElementById('u1').onchange=e=>{
  let r=new FileReader();r.onload=v=>{i.src=v.target.result;i.onload=()=>{
    cfg.s=Math.max(800/i.width,800/i.height);z.value=cfg.s;cfg.x=400;cfg.y=400;d();
  }};r.readAsDataURL(e.target.files[0]);
};

document.getElementById('u2').onchange=e=>{
  let r=new FileReader();r.onload=v=>{f.src=v.target.result;f.onload=d;};r.readAsDataURL(e.target.files[0]);
};

z.oninput=e=>{cfg.s=parseFloat(e.target.value);d();};
m.oninput=e=>{cfg.m=parseInt(e.target.value);d();};

function gp(e){let r=c.getBoundingClientRect(),t=e.touches?e.touches[0]:e;return{x:(t.clientX-r.left)*(800/r.width),y:(t.clientY-r.top)*(800/r.height)};}
function st(e){if(e.target==c){e.preventDefault();cfg.d=true;let p=gp(e);cfg.lx=p.x-cfg.x;cfg.ly=p.y-cfg.y;}}
function mv(e){if(cfg.d){e.preventDefault();let p=gp(e);cfg.x=p.x-cfg.lx;cfg.y=p.y-cfg.ly;d();}}
function en(){cfg.d=false;}

c.ontouchstart=st;window.ontouchmove=mv;window.ontouchend=en;
c.onmousedown=st;window.onmousemove=mv;window.onmouseup=en;

document.getElementById('save').onclick=()=>{let a=document.createElement('a');a.download='Arcade_PFP.png';a.href=c.toDataURL();a.click();};
</script>
</body>
</html>
