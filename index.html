<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Arcade Studio</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
  /* --- GLOBAL SETTINGS --- */
  html { scroll-behavior: smooth; overflow-y: auto; }
  body {
    background: #0a0a0c; color: white; font-family: sans-serif;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh; margin: 0; padding-bottom: 150px; 
    -webkit-overflow-scrolling: touch; 
    background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px);
    background-size: 100% 4px; touch-action: pan-y; 
  }

  /* --- NAVIGATION --- */
  .menu-toggle { 
    position: fixed; top: 15px; left: 15px; 
    background: #1a1a1c; color: #fff; border: 1px solid rgba(255,255,255,0.1); 
    padding: 8px 12px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    z-index: 100000; font-size: 12px; box-shadow: 0 2px 5px rgba(0,0,0,0.5); 
  }

  #menu-panel { 
    position: fixed; top: 0; left: -260px; width: 240px; height: 100%; 
    background: #1a1a1c; padding-top: 60px; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    z-index: 99999; display: flex; flex-direction: column; gap: 15px; 
    padding-left: 15px; padding-right: 15px; box-shadow: 2px 0 15px rgba(0,0,0,0.5); 
    box-sizing: border-box; padding-bottom: 80px; 
  }
  #menu-panel.open { left: 0; }

  .switch-container { position: relative; width: 100%; }
  #switch-btn { 
    background: rgba(255,255,255,0.05); color: white; border: 2px solid #ff0000; 
    padding: 10px; border-radius: 4px; font-weight: bold; cursor: pointer; 
    font-size: 11px; text-transform: uppercase; width: 100%; text-align: center;
    box-shadow: 0 0 10px rgba(255,0,0,0.5); 
  }
  #switch-menu { 
    position: absolute; top: 45px; right: 0; background: #1a1a1c; 
    border: 1px solid #ff0000; border-radius: 8px; width: 210px; 
    display: none; flex-direction: column; overflow: hidden; 
    box-shadow: 0 10px 20px rgba(0,0,0,0.8); z-index: 100001;
  }
  #switch-menu button { 
    background: transparent; color: #aaa; border: none; padding: 14px; 
    text-align: left; font-weight: bold; font-size: 11px; cursor: pointer; 
    border-bottom: 1px solid rgba(255,255,255,0.05); text-transform: uppercase;
  }
  #switch-menu button.active-link { color: #00ffff; background: rgba(0,255,255,0.1); border-left: 3px solid #00ffff; }

  .designed-by { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px 0; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 11px; font-weight: 900; color: #888; background: #1a1a1c; }
  .designed-by b { color: #ff0000; text-shadow: 0 0 8px rgba(255,0,0,0.6); }

  .music-section { border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
  .lnk { display: flex; align-items: center; gap: 10px; padding: 12px; text-decoration: none; color: white; font-size: 13px; font-weight: bold; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05); }
  .lnk svg { width: 18px; height: 18px; fill: white; }

  /* HEADERS */
  h1 { color: #fff; margin: 60px 0 0 0; font-family: "Arial Black", sans-serif; font-style: italic; font-size: 36px; text-transform: uppercase; letter-spacing: -1px; text-shadow: 2px 2px 0px #ff0000, -1px -1px 10px rgba(255, 0, 0, 0.8); animation: arcadeBounce 1.8s infinite ease-in-out; }
  @keyframes arcadeBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  .sub { color: #fff; font-weight: bold; margin: 2px 0 15px 0; text-transform: uppercase; font-size: 11px; letter-spacing: 2px; text-align: center; }
  
  .studio-sec { display: none; width: 320px; flex-direction: column; align-items: center; }
  .active-sec { display: flex; }

  /* --- üñºÔ∏è FRAME STUDIO CSS --- */
  @keyframes neonPulse {
    0% { box-shadow: 0 0 20px #ff0000, inset 0 0 10px #ff0000; border-color: #ff0000; }
    50% { box-shadow: 0 0 35px #ff0000, inset 0 0 20px #ff0000; border-color: #ff3333; }
    100% { box-shadow: 0 0 20px #ff0000, inset 0 0 10px #ff0000; border-color: #ff0000; }
  }
  
  /* GIF NEON PULSE (BLUE/PURPLE) */
  @keyframes neonPulseBlue {
    0% { box-shadow: 0 0 20px #00f3ff, inset 0 0 10px #00f3ff; border-color: #00f3ff; }
    50% { box-shadow: 0 0 35px #bc13fe, inset 0 0 20px #bc13fe; border-color: #bc13fe; }
    100% { box-shadow: 0 0 20px #00f3ff, inset 0 0 10px #00f3ff; border-color: #00f3ff; }
  }

  #box { 
    position: relative; width: 310px; height: 310px; border-radius: 50%; overflow: hidden; 
    border: 3px solid #ff0000; box-sizing: border-box; 
    background-image: linear-gradient(45deg, #1a1a1c 25%, transparent 25%), linear-gradient(-45deg, #1a1a1c 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #1a1a1c 75%), linear-gradient(-45deg, transparent 75%, #1a1a1c 75%);
    background-color: transparent; background-size: 20px 20px;
    animation: neonPulse 2s infinite ease-in-out;
    z-index: 10; 
  }
  canvas#c { position: absolute; top: 0; left: 0; width: 310px; height: 310px; z-index: 15; touch-action: none; }
  .ui { margin-top: 20px; width: 310px; display: flex; flex-direction: column; gap: 6px; }
  .btn { background: #111; border: 2px solid #ffffff; color: white; padding: 10px; text-align: center; border-radius: 8px; font-weight: bold; display: block; font-size: 12px; cursor: pointer; text-transform: uppercase; width: 100%; box-sizing: border-box; }
  .btn:disabled { opacity: 0.3; cursor: not-allowed; border-color: #555; color: #555; }
  .btn-r { border-color: #ff0000; }
  .lbl { font-size: 9px; color: #888; text-transform: uppercase; margin-top: 2px; display: flex; justify-content: space-between; align-items: center; width: 100%; }
  .val-tag { color: #ff0000; font-weight: bold; font-family: monospace; font-size: 10px; }
  
  /* --- ‚úçÔ∏è FONT STUDIO CSS --- */
  .font-input { width: 100%; background: #111; border: 2px solid #00ffff; color: #fff; padding: 15px; border-radius: 8px; font-weight: bold; text-align: center; margin-bottom: 15px; font-size: 16px; outline: none; box-sizing: border-box; }
  .font-scroll { width: 100%; max-height: 500px; overflow-y: auto; display: flex; flex-direction: column; border-radius: 8px; overflow-x: hidden; border: 1px solid rgba(255,255,255,0.1); box-sizing: border-box; touch-action: pan-y; }
  .font-item { background: #1a1a1c; border-bottom: 1px solid rgba(255,255,255,0.1); padding: 16px; width: 100%; text-align: center; cursor: pointer; color: #eee; font-size: 16px; white-space: pre-wrap; }
  .sep-line { width: 100%; padding: 10px; background: #111; color: #555; font-size: 10px; font-weight: bold; text-align: center; letter-spacing: 2px; border-bottom: 1px solid #333; }

  /* --- ‚ú® SYMBOLS STUDIO CSS --- */
  .sym-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; width: 100%; max-height: 500px; overflow-y: auto; padding: 5px; box-sizing: border-box; }
  .sym-btn { background: #1a1a1c; border: 1px solid #333; color: white; padding: 15px 0; font-size: 20px; border-radius: 6px; cursor: pointer; text-align: center; }
  .sym-btn:active { background: #00ffff; color: #000; }
  .cat-title { width: 100%; color: #00ffff; font-size: 12px; font-weight: bold; margin: 15px 0 5px 0; text-transform: uppercase; padding-left: 5px; }

  /* --- ‚ö° GIF STUDIO CSS --- */
  :root { --neon: #00f3ff; --purple: #bc13fe; --red: #ff0055; }
  .stage { position: relative; width: 320px; height: 320px; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; touch-action: none; }
  
  .viewport { 
    position: relative; z-index: 5; width: 100%; height: 100%; border-radius: 50%; overflow: hidden; background-color: #000; touch-action: none; display: flex; justify-content: center; align-items: center;
    border: 3px solid #00f3ff; 
    animation: neonPulseBlue 2s infinite ease-in-out; /* RESTORED NEON ANIMATION */
  }
  
  #v { 
    max-width: 100%; max-height: 100%; 
    width: 320px; height: 320px; 
    pointer-events: none; 
    object-fit: cover;
    will-change: transform; 
  }
  #o { width: 100%; height: 100%; object-fit: cover; display: none; }

  .ui-gif { 
      z-index: 10; background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(20px); 
      padding: 25px; border-radius: 30px; width: 340px; border: 1px solid rgba(255,255,255,0.1); 
      box-shadow: 0 20px 50px rgba(0,0,0,0.5); margin-bottom: 20px; max-width: 90%; box-sizing: border-box;
      display: flex; flex-direction: column; align-items: center;
  }
  
  .btn-upload { background: linear-gradient(90deg, var(--neon), var(--purple)); color: #000; border: none; padding: 15px; border-radius: 50px; font-weight: 800; cursor: pointer; width: 100%; margin-bottom: 25px; font-size: 14px; letter-spacing: 0.5px; box-shadow: 0 0 25px rgba(0, 243, 255, 0.2); }
  .btn-upload:disabled { opacity: 0.3; cursor: not-allowed; filter: grayscale(1); }

  .label-row { display: flex; justify-content: space-between; font-size: 11px; color: #888; margin-bottom: 8px; font-weight: 600; width: 100%; }
  
  /* Shared Range Slider Styles */
  input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; margin: 10px 0; cursor: pointer; }
  input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 8px; background: linear-gradient(to right, #ff0000 var(--v, 0%), #00ffff var(--v, 0%)); border-radius: 4px; }
  input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: #ff0000; margin-top: -6px; border: 2px solid #ffffff; box-shadow: 0 0 10px #ff0000; }
  
  /* GIF Studio Specific Sliders */
  .ui-gif input[type="range"] { margin-bottom: 25px; accent-color: var(--neon); }
  .ui-gif input[type="range"]::-webkit-slider-runnable-track { background: #333; height: 6px; }
  .ui-gif input[type="range"]::-webkit-slider-thumb { background: var(--neon); box-shadow: 0 0 10px var(--neon); border: none; }
  .ui-gif input[type="range"]:disabled { opacity: 0.3; cursor: not-allowed; }

  .btn-go { background: transparent; color: white; border: 1px solid var(--neon); padding: 15px; width: 100%; border-radius: 15px; cursor: pointer; font-weight: bold; font-size: 14px; transition: 0.2s; }
  .btn-go:disabled { opacity: 0.4; cursor: not-allowed; background: #1a1a1a; border-color: #333; color: #666; }

  .status { margin-top: 20px; font-size: 14px; text-align: center; color: var(--neon); font-weight: 600; opacity: 0; transition: 0.3s; height: 20px; }
  .status.active { opacity: 1; }
  
  .neon-wrap { position: relative; display: none; margin-top: 20px; padding: 3px; border-radius: 50px; overflow: hidden; width: fit-content; }
  .neon-wrap.blue::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(transparent, transparent, var(--neon), var(--purple), transparent, transparent); animation: rotate 2s linear infinite; z-index: 0; }
  
  /* Reset Button Style */
  .neon-wrap.red { margin-top: 20px; }
  .neon-wrap.red::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(transparent, transparent, var(--red), #ff5500, transparent, transparent); animation: rotate 2s linear infinite; z-index: 0; }
  
  .btn-inner { position: relative; display: block; text-decoration: none; text-align: center; color: white; background: #000; padding: 12px 30px; border-radius: 48px; font-weight: 900; font-size: 14px; z-index: 1; cursor: pointer; border: none; width: 100%; box-sizing: border-box; }
  input[type=file], #yt-player { display: none; }

  /* --- üì± NEON QR CSS --- */
  #qr-result { margin-top: 20px; padding: 15px; background: white; border-radius: 10px; display: none; margin-bottom: 20px; }
  .color-opts { display: flex; gap: 10px; margin-bottom: 20px; width: 100%; justify-content: center; }
  .c-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }
</style>
</head>
<body onclick="startAudio()">

<button class="menu-toggle" onclick="toggleMenu(event)">MENU ‚ò∞</button>

<div id="menu-panel">
  <div class="switch-container">
    <button id="switch-btn" onclick="toggleSwitchMenu(event)">SWITCH TO üìÇ</button>
    <div id="switch-menu">
      <button id="nav-frame" class="active-link" onclick="changeStudio('frame')">üñºÔ∏è Frame Studio</button>
      <button id="nav-font" onclick="changeStudio('font')">‚úçÔ∏è Font Generator</button>
      <button id="nav-gif" onclick="changeStudio('gif')">‚ö° GIF Maker</button>
      <button id="nav-qr" onclick="changeStudio('qr')">üì± Neon QR Studio</button>
      <button id="nav-sym" onclick="changeStudio('sym')">‚ú® Symbols Studio</button>
    </div>
  </div>

  <div class="music-section">
    <div class="music-btn" style="display:flex; justify-content:space-between; font-size:12px; font-weight:bold; cursor:pointer;" onclick="toggleMusic()">
      <span>MUSIC PLAYER</span> <span id="m-status" style="color:#ff0000;">ON</span>
    </div>
    <select class="station-select" style="width:100%; margin-top:5px;" onchange="changeMusic(this.value)">
      <option value="jfKfPfyJRdk" selected>‚òï Lofi Focus</option>
      <option value="nv_2rz5BFDA">üïπÔ∏è Retro Wave</option>
    </select>
  </div>
  
  <a href="https://discord.gg/ardc" target="_blank" class="lnk" style="border-color:#5865F2;">
    <svg viewBox="0 0 127.14 96.36"><path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c2.36-24.44-5.42-48.18-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/></svg>
    <span>Discord Server</span>
  </a>

  <a href="https://platopedia.com/groups/arcade" target="_blank" class="lnk" style="border-color:#00ffff;">
    <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
    <span>Arcade Website</span>
  </a>
  
  <div class="designed-by">DESIGNED BY <b>RISK</b></div>
</div>

<div id="yt-player"></div>

<h1 id="studio-name">ARCADE</h1>
<p class="sub" id="studio-sub">FRAME STUDIO</p>

<div id="frame-studio" class="studio-sec active-sec">
  <div id="box"><canvas id="c" width="800" height="800"></canvas></div>
  <div class="ui">
    <label class="btn" onclick="playClick()">CHOOSE IMAGE<input type="file" id="u1" accept="image/*" onchange="handleFile(event)" style="display:none"></label>
    <label class="btn btn-r" onclick="playClick()">APPLY FRAME<input type="file" id="u2" accept="image/*" onchange="handleFrame(event)" style="display:none"></label>
    <button class="btn" style="border-color:#00ffff; color:#00ffff;" onclick="centerSubject()">CENTER SUBJECT üéØ</button>
    <button class="btn" style="border-color:#ff0000; color:#ff0000;" onclick="resetProject()">RESET PROJECT ‚Üª</button>
    <div class="lbl">ZOOM <span id="z-val" class="val-tag">100%</span></div>
    <input type="range" id="z" min="0.1" max="4" step="0.01" value="1" oninput="updateZ(this.value)">
    <div class="lbl">ROTATE <span id="r-val" class="val-tag">0¬∞</span></div>
    <input type="range" id="r" min="0" max="360" step="1" value="0" oninput="updateR(this.value)">
    <div class="lbl">CIRCLE SIZE <span id="m-val" class="val-tag">375px</span></div>
    <input type="range" id="m" min="300" max="400" step="1" value="375" oninput="updateM(this.value)">
    <button id="save" class="btn" onclick="downloadPic()" disabled>DOWNLOAD PICTURE</button>
  </div>
</div>

<div id="font-studio" class="studio-sec">
  <input type="text" id="font-input" class="font-input" placeholder="Type text here..." oninput="genFonts()">
  <div class="lbl">TAP TO COPY <span class="val-tag" id="font-count">0 STYLES</span></div>
  <div id="font-results" class="font-scroll"></div>
</div>

<div id="gif-studio" class="studio-sec">
    <div class="stage" id="stage">
        <div class="led-ring"></div>
        <div class="viewport" id="vp">
            <video id="v" muted playsinline loop></video>
            <img id="o">
        </div>
    </div>

    <div class="ui-gif" id="uiPanel">
        <button class="btn-upload" id="upBtn" onclick="document.getElementById('gfInput').click()">UPLOAD YOUR VIDEO</button>
        <input type="file" id="gfInput" accept="video/*" style="display:none">

        <div class="label-row"><span>ZOOM / SCALE</span><span id="zv">100%</span></div>
        <input type="range" id="zoom" min="100" max="300" step="1" value="100">

        <div class="label-row"><span>PLAYBACK SPEED</span><span id="sv">1.0x</span></div>
        <input type="range" id="speed" min="0.5" max="3.0" step="0.1" value="1.0">

        <button id="go" class="btn-go">‚ö° CREATE HD GIF</button>
        
        <div id="msg" class="status">Processing...</div>
        
        <div id="dlBox" class="neon-wrap blue">
            <a id="dl" class="btn-inner">‚¨áÔ∏è DOWNLOAD GIF</a>
        </div>

        <div id="resetBox" class="neon-wrap blue" style="margin-top:20px;">
            <button class="btn-inner" onclick="resetGifProject()">‚Üª RESET PROJECT</button>
        </div>
    </div>
</div>

<div id="qr-studio" class="studio-sec">
    <input type="text" id="qr-input" class="font-input" placeholder="Enter URL or Text" style="border-color:#00ff00;">
    
    <div class="label-row" style="justify-content:center;">NEON COLOR</div>
    <div class="color-opts">
        <div class="c-btn" style="background:#00ffff;" onclick="setQrColor('#00ffff')"></div>
        <div class="c-btn" style="background:#ff00ff;" onclick="setQrColor('#ff00ff')"></div>
        <div class="c-btn" style="background:#00ff00;" onclick="setQrColor('#00ff00')"></div>
        <div class="c-btn" style="background:#ffff00;" onclick="setQrColor('#ffff00')"></div>
    </div>

    <button class="btn-go" style="border-color:#00ff00; color:#00ff00;" onclick="genQR()">GENERATE QR CODE</button>
    <div id="qr-result"></div>
    
    <button id="save-qr" class="btn" style="border-color:#00ff00; color:#00ff00; margin-top:15px; display:none;" onclick="downloadQR()">SAVE NEON QR</button>
</div>

<div id="sym-studio" class="studio-sec">
    <div class="lbl">TAP SYMBOL TO COPY</div>
    <div id="sym-container" class="font-scroll"></div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
const c=document.getElementById('c'),x=c.getContext('2d'),zSl=document.getElementById('z'),rSl=document.getElementById('r'),mSl=document.getElementById('m'),panel=document.getElementById('menu-panel'),mStat=document.getElementById('m-status'), sName=document.getElementById('studio-name'), sSub=document.getElementById('studio-sub'), swMenu=document.getElementById('switch-menu');
const zVal=document.getElementById('z-val'),rVal=document.getElementById('r-val'),mVal=document.getElementById('m-val');
let i=new Image(),f=new Image(),cfg={s:1,m:375,x:400,y:400,r:0,lx:0,ly:0},player,musicOn=true,audioStarted=false;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function changeStudio(mode) {
  playClick(); document.querySelectorAll('.studio-sec').forEach(s => s.classList.remove('active-sec')); 
  swMenu.style.display = 'none'; panel.classList.remove('open');
  if(mode === 'frame') { document.getElementById('frame-studio').classList.add('active-sec'); sName.innerText = "ARCADE"; sSub.innerText = "FRAME STUDIO"; }
  else if(mode === 'font') { document.getElementById('font-studio').classList.add('active-sec'); sName.innerText = "FONTS"; sSub.innerText = "GENERATOR STUDIO"; }
  else if(mode === 'gif') { document.getElementById('gif-studio').classList.add('active-sec'); sName.innerText = "NEON"; sSub.innerText = "GIF STUDIO"; }
  else if(mode === 'qr') { document.getElementById('qr-studio').classList.add('active-sec'); sName.innerText = "NEON"; sSub.innerText = "QR STUDIO"; }
  else if(mode === 'sym') { document.getElementById('sym-studio').classList.add('active-sec'); sName.innerText = "SYMBOLS"; sSub.innerText = "STUDIO"; }
}

window.onclick = e => {
  initAudio(); 
  if (panel.classList.contains('open') && !panel.contains(e.target) && !e.target.classList.contains('menu-toggle')) { panel.classList.remove('open'); playClick(); }
  if (swMenu.style.display === 'flex' && !document.querySelector('.switch-container').contains(e.target)) { swMenu.style.display = 'none'; playClick(); }
};

function toggleSwitchMenu(e) { e.stopPropagation(); swMenu.style.display = swMenu.style.display === 'flex' ? 'none' : 'flex'; playClick(); }
function toggleMenu(e) { e.stopPropagation(); initAudio(); panel.classList.toggle('open'); playClick(); }

// --- ‚úçÔ∏è CLEAN FONT ENGINE (NO INVERTED, NO DIAMONDS, SEPARATED DECORATORS) ---
const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

// 1. CLEAN ALPHABETS ONLY (Verified English Readable)
const alphas = [
  {m:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"}, // Normal
  {m:"ùêÄùêÅùêÇùêÉùêÑùêÖùêÜùêáùêàùêâùêäùêãùêåùêçùêéùêèùêêùêëùêíùêìùêîùêïùêñùêóùêòùêôùêöùêõùêúùêùùêûùêüùê†ùê°ùê¢ùê£ùê§ùê•ùê¶ùêßùê®ùê©ùê™ùê´ùê¨ùê≠ùêÆùêØùê∞ùê±ùê≤ùê≥ùüéùüèùüêùüëùüíùüìùüîùüïùüñùüó"}, // Bold
  {m:"ùê¥ùêµùê∂ùê∑ùê∏ùêπùê∫ùêªùêºùêΩÔº´Ôº¨Ôº≠ùëÅùëÇùëÉùëÑùëÖùëÜùëáùëàùëâùëäùëãùëåùëçùëéùëèùëêùëëùëíùëìùëî‚Ñéùëñùëóùëòùëôùëöùëõùëúùëùùëûùëüùë†ùë°ùë¢ùë£ùë§ùë•ùë¶ùëß0123456789"}, // Italic
  {m:"ùë®ùë©ùë™ùë´ùë¨ùë≠ùëÆùëØùë∞ùë±ùë≤ùë≥ùë¥ùëµùë∂ùë∑ùë∏ùëπùë∫ùëªùëºùëΩùëæùëøùíÄùíÅùíÇùíÉùíÑùíÖùíÜùíáùíàùíâùíäùíãùíåùíçùíéùíèùíêùíëùííùíìùíîùíïùíñùíóùíòùíôùíöùíõ0123456789"}, // Bold Italic
  {m:"ùíú‚Ñ¨ùíûùíü‚Ñ∞‚Ñ±ùí¢‚Ñã‚Ñêùí•ùí¶‚Ñí‚Ñ≥ùí©ùí™ùí´ùí¨‚ÑõùíÆùíØùí∞ùí±ùí≤ùí≥ùí¥ùíµùí∂ùí∑ùí∏ùíπ‚ÑØùíª‚ÑäùíΩùíæùíøùìÄùìÅùìÇùìÉ‚Ñ¥ùìÖùìÜùìáùìàùìâùìäùìãùìåùìçùìéùìè0123456789"}, // Script
  {m:"ùìêùìëùìíùììùìîùìïùìñùìóùìòùìôùìöùìõùìúùìùùìûùìüùì†ùì°ùì¢ùì£ùì§ùì•ùì¶ùìßùì®ùì©ùì™ùì´ùì¨ùì≠ùìÆùìØùì∞ùì±ùì≤ùì≥ùì¥ùìµùì∂ùì∑ùì∏ùìπùì∫ùìªùìºùìΩùìæùìøùîÄùîÅùîÇùîÉ0123456789"}, // Bold Script
  {m:"ùîÑùîÖ‚Ñ≠ùîáùîàùîâùîä‚Ñå‚Ñëùîçùîéùîèùîêùîëùîíùîìùîî‚Ñúùîñùîóùîòùîôùîöùîõùîúùîùùîûùîüùî†ùî°ùî¢ùî£ùî§ùî•ùî¶ùîßùî®ùî©ùî™ùî´ùî¨ùî≠ùîÆùîØùî∞ùî±ùî≤ùî≥ùî¥ùîµùî∂ùî∑0123456789"}, // Fraktur
  {m:"ùï¨ùï≠ùïÆùïØùï∞ùï±ùï≤ùï≥ùï¥ùïµùï∂ùï∑ùï∏ùïπùï∫ùïªùïºùïΩùïæùïøùñÄùñÅùñÇùñÉùñÑùñÖùñÜùñáùñàùñâùñäùñãùñåùñçùñéùñèùñêùñëùñíùñìùñîùñïùññùñóùñòùñôùñöùñõùñúùñùùñûùñü0123456789"}, // Bold Fraktur
  {m:"ùî∏ùîπ‚ÑÇùîªùîºùîΩùîæ‚ÑçùïÄùïÅùïÇùïÉùïÑ‚ÑïùïÜ‚Ñô‚Ñö‚Ñùùïäùïãùïåùïçùïéùïèùïê‚Ñ§ùïíùïìùïîùïïùïñùïóùïòùïôùïöùïõùïúùïùùïûùïüùï†ùï°ùï¢ùï£ùï§ùï•ùï¶ùïßùï®ùï©ùï™ùï´ùüòùüôùüöùüõùüúùüùùüûùüüùü†ùü°"}, // Double
  {m:"ùñ†ùñ°ùñ¢ùñ£ùñ§ùñ•ùñ¶ùñßùñ®ùñ©ùñ™ùñ´ùñ¨ùñ≠ùñÆùñØùñ∞ùñ±ùñ≤ùñ≥ùñ¥ùñµùñ∂ùñ∑ùñ∏ùñπùñ∫ùñªùñºùñΩùñæùñøùóÄùóÅùóÇùóÉùóÑùóÖùóÜùóáùóàùóâùóäùóãùóåùóçùóéùóèùóêùóëùóíùóìùü¢ùü£ùü§ùü•ùü¶ùüßùü®ùü©ùü™ùü´"}, // Sans
  {m:"ùóîùóïùóñùóóùóòùóôùóöùóõùóúÔº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞ùó§ùó•ùó¶ùóßùó®ùó©ùó™ùó´ùó¨ùó≠ùóÆùóØùó∞ùó±ùó≤ùó≥ùó¥ùóµùó∂ùó∑ùó∏ùóπùó∫ùóªùóºùóΩùóæùóøùòÄùòÅùòÇùòÉùòÑùòÖùòÜùòáùü¨ùü≠ùüÆùüØùü∞ùü±ùü≤ùü≥ùü¥ùüµ"}, // Bold Sans
  {m:"ùô∞ùô±ùô≤ùô≥ùô¥ùôµùô∂ùô∑ùô∏ùôπùô∫ùôªùôºùôΩùôæùôøùöÄùöÅùöÇùöÉùöÑùöÖùöÜùöáùöàùöâùöäùöãùöåùöçùöéùöèùöêùöëùöíùöìùöîùöïùöñùöóùöòùöôùööùöõùöúùöùùöûùöüùö†ùö°ùö¢ùö£ùü∂ùü∑ùü∏ùüπùü∫ùüªùüºùüΩùüæùüø"}, // Mono
  {m:"‚í∂‚í∑‚í∏‚íπ‚í∫‚íª‚íº‚íΩ‚íæ‚íø‚ìÄ‚ìÅ‚ìÇ‚ìÉ‚ìÑ‚ìÖ‚ìÜ‚ìá‚ìà‚ìâ‚ìä‚ìã‚ìå‚ìç‚ìé‚ìè‚ìê‚ìë‚ìí‚ìì‚ìî‚ìï‚ìñ‚ìó‚ìò‚ìô‚ìö‚ìõ‚ìú‚ìù‚ìû‚ìü‚ì†‚ì°‚ì¢‚ì£‚ì§‚ì•‚ì¶‚ìß‚ì®‚ì©‚ì™‚ë†‚ë°‚ë¢‚ë£‚ë§‚ë•‚ë¶‚ëß‚ë®"}, // Circled
  {m:"üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©üÖêüÖëüÖíüÖìüÖîüÖïüÖñüÖóüÖòüÖôüÖöüÖõüÖúüÖùüÖûüÖüüÖ†üÖ°üÖ¢üÖ£üÖ§üÖ•üÖ¶üÖßüÖ®üÖ©‚ìø‚ûä‚ûã‚ûå‚ûç‚ûé‚ûè‚ûê‚ûë‚ûí"}, // Black Circled
  {m:"Ôº°Ôº¢Ôº£Ôº§Ôº•Ôº¶ÔºßÔº®Ôº©Ôº™Ôº´Ôº¨Ôº≠ÔºÆÔºØÔº∞Ôº±Ôº≤Ôº≥Ôº¥ÔºµÔº∂Ôº∑Ôº∏ÔºπÔº∫ÔΩÅÔΩÇÔΩÉÔΩÑÔΩÖÔΩÜÔΩáÔΩàÔΩâÔΩäÔΩãÔΩåÔΩçÔΩéÔΩèÔΩêÔΩëÔΩíÔΩìÔΩîÔΩïÔΩñÔΩóÔΩòÔΩôÔΩöÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô"}, // Wide
  {m:"‚íú‚íù‚íû‚íü‚í†‚í°‚í¢‚í£‚í§‚í•‚í¶‚íß‚í®‚í©‚í™‚í´‚í¨‚í≠‚íÆ‚íØ‚í∞‚í±‚í≤‚í≥‚í¥‚íµ‚íú‚íù‚íû‚íü‚í†‚í°‚í¢‚í£‚í§‚í•‚í¶‚íß‚í®‚í©‚í™‚í´‚í¨‚í≠‚íÆ‚íØ‚í∞‚í±‚í≤‚í≥‚í¥‚íµ0123456789"}, // Parens
  {m:"ùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉùÑÉ0123456789"}, // Barcode
  {m:"üÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üÖπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâüÖ∞üÖ±üÖ≤üÖ≥üÖ¥üÖµüÖ∂üÖ∑üÖ∏üÖπüÖ∫üÖªüÖºüÖΩüÖæüÖøüÜÄüÜÅüÜÇüÜÉüÜÑüÜÖüÜÜüÜáüÜàüÜâ0123456789"}, // Block
  {m:"·¥¨·¥Æ·∂ú·¥∞·¥±·∂†·¥≥·¥¥·¥µ·¥∂·¥∑·¥∏·¥π·¥∫·¥º·¥æ·ë´·¥øÀ¢·µÄ·µÅ‚±Ω·µÇÀ£ ∏·∂ª·µÉ·µá·∂ú·µà·µâ·∂†·µç ∞‚Å± ≤·µèÀ°·µê‚Åø·µí·µñq ≥À¢·µó·µò·µõ ∑À£ ∏·∂ª0123456789"}, // Tiny
  {m:"‚Çêbcd‚Çëfg‚Çï·µ¢‚±º‚Çñ‚Çó‚Çò‚Çô‚Çí‚Çöq·µ£‚Çõ‚Çú·µ§·µ•w‚Çìyz‚Çêbcd‚Çëfg‚Çï·µ¢‚±º‚Çñ‚Çó‚Çò‚Çô‚Çí‚Çöq·µ£‚Çõ‚Çú·µ§·µ•w‚Çìyz0123456789"}, // Sub
  {m:"·¥Ä ô·¥Ñ·¥Ö·¥áÍú∞…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥òQ ÄÍú±·¥õ·¥ú·¥†·¥°x è·¥¢·¥Ä ô·¥Ñ·¥Ö·¥áÍú∞…¢ ú…™·¥ä·¥ã ü·¥ç…¥·¥è·¥òQ ÄÍú±·¥õ·¥ú·¥†·¥°x è·¥¢0123456789"}, // Small Caps
];

// 2. SEPARATE DECORATORS (Applied ONLY to Normal Text)
const decorators = [
  (s)=>`[${s}]`, (s)=>`[[${s}]]`, (s)=>`[ ${s} ]`, (s)=>`[[ ${s} ]]`,
  (s)=>`(${s})`, (s)=>`(( ${s} ))`, (s)=>`{${s}}`, (s)=>`{{ ${s} }}`, 
  (s)=>`<${s}>`, (s)=>`<< ${s} >>`, (s)=>`<<< ${s} >>>`, 
  (s)=>`|${s}|`, (s)=>`|| ${s} ||`, (s)=>`// ${s} //`, (s)=>`\\\\ ${s} \\\\`,
  (s)=>`/ ${s} /`, (s)=>`\\ ${s} \\`, (s)=>`+ ${s} +`, (s)=>`++ ${s} ++`,
  (s)=>`* ${s} *`, (s)=>`** ${s} **`, (s)=>`*** ${s} ***`,
  (s)=>`- ${s} -`, (s)=>`-- ${s} --`, (s)=>`--- ${s} ---`,
  (s)=>`_ ${s} _`, (s)=>`__ ${s} __`, (s)=>`___ ${s} ___`,
  (s)=>`= ${s} =`, (s)=>`== ${s} ==`, (s)=>`=== ${s} ===`,
  (s)=>`~ ${s} ~`, (s)=>`~~ ${s} ~~`, (s)=>`~~~ ${s} ~~~`,
  (s)=>`! ${s} !`, (s)=>`!! ${s} !!`, (s)=>`? ${s} ?`, (s)=>`?? ${s} ??`,
  (s)=>`x ${s} x`, (s)=>`X ${s} X`, (s)=>`xX ${s} Xx`, (s)=>`Xx ${s} xX`,
  (s)=>`o ${s} o`, (s)=>`O ${s} O`, (s)=>`oO ${s} Oo`, (s)=>`Oo ${s} oO`,
  (s)=>`> ${s} <`, (s)=>`>> ${s} <<`, (s)=>`-> ${s} <-`, (s)=>`=> ${s} <=`,
  (s)=>`.: ${s} :.`, (s)=>`... ${s} ...`, (s)=>`::: ${s} :::`, (s)=>`# ${s} #`,
  (s)=>`$ ${s} $`, (s)=>`% ${s} %`, (s)=>`& ${s} &`, (s)=>`@ ${s} @`
];

function genFonts(){
  const val=document.getElementById('font-input').value, resBox=document.getElementById('font-results');
  resBox.innerHTML="";
  if(!val) return;
  let count=0;
  
  // 1. ADD PURE FONTS FIRST (No mixing with decorations)
  alphas.forEach(alph => {
    let txt = "";
    const mapArr = Array.from(alph.m);
    for(let char of val){
      let idx = chars.indexOf(char);
      txt += (idx !== -1 && mapArr[idx]) ? mapArr[idx] : char;
    }
    addF(txt, resBox);
    count++;
  });

  // SEPARATOR
  let sep = document.createElement('div'); sep.className="sep-line"; sep.innerText="--- DECORATIONS ---"; resBox.appendChild(sep);

  // 2. ADD DECORATIONS (Only on Normal Text)
  decorators.forEach(dec => {
    addF(dec(val), resBox);
    count++;
  });
  
  document.getElementById('font-count').innerText=count+" STYLES";
}
function addF(t,b){let d=document.createElement('div');d.className="font-item";d.innerText=t;d.onclick=()=>{navigator.clipboard.writeText(t);playShutter();};b.appendChild(d);}

// --- ‚ú® SYMBOLS STUDIO DATA ---
const symData = {
    "Arrows": ["‚Üê","‚Üë","‚Üí","‚Üì","‚Üî","‚Üï","‚Üñ","‚Üó","‚Üò","‚Üô","‚Üö","‚Üõ","‚Üú","‚Üù","‚Üû","‚Üü","‚Ü†","‚Ü°","‚Ü¢","‚Ü£","‚Ü§","‚Ü•","‚Ü¶","‚Üß","‚Ü®","‚Ü©","‚Ü™","‚Ü´","‚Ü¨","‚Ü≠","‚ÜÆ","‚ÜØ","‚Ü∞","‚Ü±","‚Ü≤","‚Ü≥","‚Ü¥","‚Üµ","‚Ü∂","‚Ü∑","‚Ü∏","‚Üπ","‚Ü∫","‚Üª","‚Üº","‚ÜΩ","‚Üæ","‚Üø","‚áÄ","‚áÅ","‚áÇ","‚áÉ","‚áÑ","‚áÖ","‚áÜ","‚áá","‚áà","‚áâ","‚áä","‚áã","‚áå","‚áç","‚áé","‚áè","‚áê","‚áë","‚áí","‚áì","‚áî","‚áï","‚áñ","‚áó","‚áò","‚áô","‚áö","‚áõ","‚áú","‚áù","‚áû","‚áü","‚á†","‚á°","‚á¢","‚á£","‚á§","‚á•","‚á¶","‚áß","‚á®","‚á©","‚á™","‚á´","‚á¨","‚á≠","‚áÆ","‚áØ","‚á∞","‚á±","‚á≤","‚á≥","‚á¥","‚áµ","‚á∂","‚á∑","‚á∏","‚áπ","‚á∫","‚áª","‚áº","‚áΩ","‚áæ","‚áø"],
    "Stars & Sparkles": ["‚òÖ","‚òÜ","‚ú°","‚ú¶","‚úß","‚ú©","‚ú™","‚ú´","‚ú¨","‚ú≠","‚úÆ","‚úØ","‚ú∞","‚ÅÇ","‚Åé","‚Åë","‚ú¢","‚ú£","‚ú§","‚ú•","‚ú±","‚ú≤","‚ú≥","‚ú¥","‚úµ","‚ú∂","‚ú∑","‚ú∏","‚úπ","‚ú∫","‚úª","‚úº","‚úΩ","‚úæ","‚úø","‚ùÄ","‚ùÅ","‚ùÇ","‚ùÉ","‚ùÑ","‚ùÖ","‚ùÜ","‚ùá","‚ùà","‚ùâ","‚ùä","‚ùã"],
    "Hands": ["‚òö","‚òõ","‚òú","‚òù","‚òû","‚òü","‚úå","‚úç","‚úë","‚úí"],
    "Chess & Cards": ["‚ôî","‚ôï","‚ôñ","‚ôó","‚ôò","‚ôô","‚ôö","‚ôõ","‚ôú","‚ôù","‚ôû","‚ôü","‚ô†","‚ô°","‚ô¢","‚ô£","‚ô§","‚ô•","‚ô¶","‚ôß"],
    "Music": ["‚ô©","‚ô™","‚ô´","‚ô¨","‚ô≠","‚ôÆ","‚ôØ"],
    "Weather & Astro": ["‚òÄ","‚òÅ","‚òÇ","‚òÉ","‚òÑ","‚òæ","‚òΩ","‚òâ","‚òä","‚òã","‚òå","‚òç","‚òé","‚òè","‚òê","‚òë","‚òí","‚òì","‚òî","‚òï","‚òñ","‚òó","‚òò","‚òô","‚òö","‚òõ","‚òú","‚òù","‚òû","‚òü","‚ò†","‚ò°","‚ò¢","‚ò£","‚ò§","‚ò•","‚ò¶","‚òß","‚ò®","‚ò©","‚ò™","‚ò´","‚ò¨","‚ò≠","‚òÆ","‚òØ","‚ò∞","‚ò±","‚ò≤","‚ò≥","‚ò¥","‚òµ","‚ò∂","‚ò∑","‚ò∏","‚òπ","‚ò∫","‚òª","‚òº","‚òΩ","‚òæ","‚òø","‚ôÄ","‚ôÅ","‚ôÇ","‚ôÉ","‚ôÑ","‚ôÖ","‚ôÜ","‚ôá","‚ôà","‚ôâ","‚ôä","‚ôã","‚ôå","‚ôç","‚ôé","‚ôè","‚ôê","‚ôë","‚ôí","‚ôì"],
    "Shapes": ["‚ñÄ"," ","‚ñÇ","‚ñÉ","‚ñÑ","‚ñÖ","‚ñÜ","‚ñá","‚ñà","‚ñâ","‚ñä","‚ñã","‚ñå","‚ñç","‚ñé","‚ñè","‚ñê","‚ñë","‚ñí","‚ñì","‚ñî","‚ñï","‚ññ","‚ñó","‚ñò","‚ñô","‚ñö","‚ñõ","‚ñú","‚ñù","‚ñû","‚ñü","‚ñ†","‚ñ°","‚ñ¢","‚ñ£","‚ñ§","‚ñ•","‚ñ¶","‚ñß","‚ñ®","‚ñ©","‚ñ™","‚ñ´","‚ñ¨","‚ñ≠","‚ñÆ","‚ñØ","‚ñ∞","‚ñ±","‚ñ≤","‚ñ≥","‚ñ¥","‚ñµ","‚ñ∂","‚ñ∑","‚ñ∏","‚ñπ","‚ñ∫","‚ñª","‚ñº","‚ñΩ","‚ñæ","‚ñø","‚óÄ","‚óÅ","‚óÇ","‚óÉ","‚óÑ","‚óÖ","‚óÜ","‚óá","‚óà","‚óâ","‚óä","‚óã","‚óå","‚óç","‚óé","‚óè","‚óê","‚óë","‚óí","‚óì","‚óî","‚óï","‚óñ","‚óó","‚óò","‚óô","‚óö","‚óõ","‚óú","‚óù","‚óû","‚óü","‚ó†","‚ó°","‚ó¢","‚ó£","‚ó§","‚ó•","‚ó¶","‚óß","‚ó®","‚ó©","‚ó™","‚ó´","‚ó¨","‚ó≠","‚óÆ","‚óØ","‚ó∞","‚ó±","‚ó≤","‚ó≥","‚ó¥","‚óµ","‚ó∂","‚ó∑","‚ó∏","‚óπ","‚ó∫","‚óª","‚óº","‚óΩ","‚óæ","‚óø"],
    "Math & Tech": ["‚àÄ","‚àÅ","‚àÇ","‚àÉ","‚àÑ","‚àÖ","‚àÜ","‚àá","‚àà","‚àâ","‚àä","‚àã","‚àå","‚àç","‚àé","‚àè","‚àê","‚àë","‚àí","‚àì","‚àî","‚àï","‚àñ","‚àó","‚àò","‚àô","‚àö","‚àõ","‚àú","‚àù","‚àû","‚àü","‚à†","‚à°","‚à¢","‚à£","‚à§","‚à•","‚à¶","‚àß","‚à®","‚à©","‚à™","‚à´","‚à¨","‚à≠","‚àÆ","‚àØ","‚à∞","‚à±","‚à≤","‚à≥","‚à¥","‚àµ","‚à∂","‚à∑","‚à∏","‚àπ","‚à∫","‚àª","‚àº","‚àΩ","‚àæ","‚àø","‚âÄ","‚âÅ","‚âÇ","‚âÉ","‚âÑ","‚âÖ","‚âÜ","‚âá","‚âà","‚ââ","‚âä","‚âã","‚âå","‚âç","‚âé","‚âè","‚âê","‚âë","‚âí","‚âì","‚âî","‚âï","‚âñ","‚âó","‚âò","‚âô","‚âö","‚âõ","‚âú","‚âù","‚âû","‚âü","‚â†","‚â°","‚â¢","‚â£","‚â§","‚â•","‚â¶","‚âß","‚â®","‚â©","‚â™","‚â´","‚â¨","‚â≠","‚âÆ","‚âØ","‚â∞","‚â±","‚â≤","‚â≥","‚â¥","‚âµ","‚â∂","‚â∑","‚â∏","‚âπ","‚â∫","‚âª","‚âº","‚âΩ","‚âæ","‚âø","‚äÄ","‚äÅ","‚äÇ","‚äÉ","‚äÑ","‚äÖ","‚äÜ","‚äá","‚äà","‚äâ","‚ää","‚äã","‚äå","‚äç","‚äé","‚äè","‚äê","‚äë","‚äí","‚äì","‚äî","‚äï","‚äñ","‚äó","‚äò","‚äô","‚äö","‚äõ","‚äú","‚äù","‚äû","‚äü","‚ä†","‚ä°","‚ä¢","‚ä£","‚ä§","‚ä•","‚ä¶","‚äß","‚ä®","‚ä©","‚ä™","‚ä´","‚ä¨","‚ä≠","‚äÆ","‚äØ","‚ä∞","‚ä±","‚ä≤","‚ä≥","‚ä¥","‚äµ","‚ä∂","‚ä∑","‚ä∏","‚äπ","‚ä∫","‚äª","‚äº","‚äΩ","‚äæ","‚äø","‚ãÄ","‚ãÅ","‚ãÇ","‚ãÉ","‚ãÑ","‚ãÖ","‚ãÜ","‚ãá","‚ãà","‚ãâ","‚ãä","‚ãã","‚ãå","‚ãç","‚ãé","‚ãè","‚ãê","‚ãë","‚ãí","‚ãì","‚ãî","‚ãï","‚ãñ","‚ãó","‚ãò","‚ãô","‚ãö","‚ãõ","‚ãú","‚ãù","‚ãû","‚ãü","‚ã†","‚ã°","‚ã¢","‚ã£","‚ã§","‚ã•","‚ã¶","‚ãß","‚ã®","‚ã©","‚ã™","‚ã´","‚ã¨","‚ã≠","‚ãÆ","‚ãØ","‚ã∞","‚ã±"]
};

function renderSymbols(){
    const box = document.getElementById('sym-container');
    box.innerHTML = "";
    
    for (const [category, symbols] of Object.entries(symData)) {
        // Title
        let title = document.createElement('div');
        title.className = "cat-title";
        title.innerText = category;
        box.appendChild(title);
        
        // Grid
        let grid = document.createElement('div');
        grid.className = "sym-grid";
        
        symbols.forEach(s => {
            let btn = document.createElement('div');
            btn.className = "sym-btn";
            btn.innerText = s;
            btn.onclick = () => { navigator.clipboard.writeText(s); playShutter(); };
            grid.appendChild(btn);
        });
        
        box.appendChild(grid);
    }
}
// Render on load
renderSymbols();

// --- ‚ö° NEON GIF ENGINE (CENTERED & STABLE) ---
const workerBlob = new Blob([`importScripts('https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js');`], { type: 'application/javascript' });
const workerUrl = URL.createObjectURL(workerBlob);

const gfInput=document.getElementById('gfInput'), upBtn=document.getElementById('upBtn'), v=document.getElementById('v'), o=document.getElementById('o'), vp=document.getElementById('vp');
const speed=document.getElementById('speed'), sv=document.getElementById('sv'), zoom=document.getElementById('zoom'), zv=document.getElementById('zv'), go=document.getElementById('go'), msg=document.getElementById('msg');
const dlBox=document.getElementById('dlBox'), dl=document.getElementById('dl'), resetBox=document.getElementById('resetBox');

function resetGifProject() {
  v.src=''; o.style.display='none'; v.style.display='none';
  dlBox.style.display='none'; resetBox.style.display='none';
  go.style.display='block'; go.disabled=false; 
  upBtn.disabled=false; zoom.disabled=false; speed.disabled=false;
  msg.classList.remove('active');
  zoom.value=100; zv.innerText="100%";
  gfInput.value = '';
  v.style.transform = `scale(1)`;
}

gfInput.onchange=(e)=>{ 
    const file=e.target.files[0]; if(!file)return;
    v.style.display='block'; o.style.display='none'; dlBox.style.display='none'; resetBox.style.display='none';
    v.src=URL.createObjectURL(file); v.playbackRate=parseFloat(speed.value);
    v.onloadedmetadata=()=>{ v.play(); };
};

zoom.oninput = function() {
    if(!v.src) return;
    zv.innerText = this.value + '%';
    const z = parseInt(this.value) / 100;
    v.style.transform = `scale(${z})`;
};

speed.oninput=()=>{ sv.innerText=speed.value+'x'; if(v.src)v.playbackRate=parseFloat(speed.value); };

// GIF PROCESSING (CENTER CROP LOGIC)
go.onclick=()=>{
    if(!v.src)return;
    go.disabled = true; upBtn.disabled = true; zoom.disabled = true; speed.disabled = true;
    msg.innerText="Processing..."; msg.classList.add('active');
    
    const gif=new GIF({workers:2, quality:10, width:480, height:480, workerScript:workerUrl});
    const canvas=document.createElement('canvas'); canvas.width=480; canvas.height=480; const ctx=canvas.getContext('2d');
    const fps=15, duration=v.duration, playbackSpeed=parseFloat(speed.value), capVid=document.createElement('video');
    
    capVid.src=v.src; capVid.muted=true; capVid.playsInline=true;
    
    capVid.onloadeddata=()=>{
        let cTime=0;
        const scale = parseInt(zoom.value) / 100;
        
        // Calculate Draw Dimensions for Center Crop
        const vw = capVid.videoWidth;
        const vh = capVid.videoHeight;
        const aspect = vw / vh;
        let drawW, drawH;
        
        if (aspect > 1) { drawH = 480; drawW = 480 * aspect; }
        else { drawW = 480; drawH = 480 / aspect; }
        
        drawW *= scale;
        drawH *= scale;
        
        const dx = (480 - drawW) / 2;
        const dy = (480 - drawH) / 2;

        const captureFrame=()=>{
            if(cTime>=duration){ msg.innerText="Encoding..."; gif.render(); return; }
            capVid.currentTime=cTime;
        };
        capVid.onseeked=()=>{
            ctx.fillStyle = '#000000'; 
            ctx.fillRect(0, 0, 480, 480);
            ctx.drawImage(capVid, dx, dy, drawW, drawH);
            gif.addFrame(ctx,{copy:true, delay:(1000/fps)/playbackSpeed});
            cTime+=(1/fps);
            setTimeout(captureFrame, 10);
        };
        captureFrame();
    };
    
    gif.on('finished', blob=>{
        const url=URL.createObjectURL(blob), rNum=Math.floor(Math.random()*90000)+10000;
        v.style.display='none'; o.src=url; o.style.display='block';
        dl.download=`neon_focus_${rNum}.gif`; dl.href=url;
        dlBox.style.display='inline-block'; resetBox.style.display='inline-block';
        msg.classList.remove('active'); go.style.display='none';
    });
};

// --- QR LOGIC (WITH DOWNLOAD) ---
let qrColor = "#00ffff";
function setQrColor(c){ qrColor=c; document.getElementById('qr-input').style.borderColor=c; }
function genQR(){
    const val = document.getElementById('qr-input').value;
    const box = document.getElementById('qr-result');
    const saveBtn = document.getElementById('save-qr');
    box.innerHTML = "";
    if(!val) return;
    box.style.display="block";
    new QRCode(box, {
        text: val,
        width: 200,
        height: 200,
        colorDark : qrColor,
        colorLight : "#ffffff",
        correctLevel : QRCode.CorrectLevel.H
    });
    saveBtn.style.display = "block"; // Show save button
    playShutter();
}

function downloadQR(){
    const box = document.getElementById('qr-result');
    const img = box.querySelector('img');
    if(img && img.src){
        const a = document.createElement('a');
        a.href = img.src;
        a.download = 'Neon_QR.png';
        a.click();
        playShutter();
    }
}

// --- AUDIO & CORE ---
function initAudio(){ if(!audioStarted){ audioCtx.resume().then(()=>{ audioStarted=true; if(player&&musicOn){ player.unMute(); player.playVideo(); }});}}
function onYouTubeIframeAPIReady(){ player=new YT.Player('yt-player',{height:'0',width:'0',videoId:'jfKfPfyJRdk',playerVars:{'autoplay':1,'loop':1,'playlist':'jfKfPfyJRdk','mute':0},events:{'onReady':e=>{e.target.setVolume(25);}}});}
function changeMusic(id){ if(player)player.loadVideoById(id); playShutter(); }
function toggleMusic(){ initAudio(); playClick(); musicOn=!musicOn; if(musicOn){ player.playVideo(); mStat.innerText="ON"; mStat.style.color="#ff0000"; }else{ player.pauseVideo(); mStat.innerText="OFF"; mStat.style.color="#888"; }}
function playClick(){ if(audioCtx.state!=='running')audioCtx.resume(); const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.frequency.setValueAtTime(800, audioCtx.currentTime); g.gain.setValueAtTime(0.08, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.1); }
function playShutter(){ if(audioCtx.state!=='running')audioCtx.resume(); const o=audioCtx.createOscillator(), g=audioCtx.createGain(); o.type='square'; o.frequency.setValueAtTime(150, audioCtx.currentTime); g.gain.setValueAtTime(0.08, audioCtx.currentTime); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.1); }

// --- üñºÔ∏è FRAME ENGINE ---
function d(){ x.clearRect(0,0,800,800); x.save(); x.beginPath(); x.arc(400,400,cfg.m,0,6.28); x.clip(); if(i.src){ let w=i.width*cfg.s, h=i.height*cfg.s; x.save(); x.translate(cfg.x,cfg.y); x.rotate(cfg.r*Math.PI/180); x.drawImage(i,-w/2,-h/2,w,h); x.restore(); } x.restore(); if(f.src) x.drawImage(f,0,0,800,800); }
function handleFile(e){ 
  let r=new FileReader(); 
  r.onload=v=>{ 
    let n=new Image(); 
    n.onload=()=>{
      i=n; 
      cfg.s=Math.max(800/i.width,800/i.height); 
      cfg.x=400; cfg.y=400; cfg.r=0; 
      d(); playClick();
      document.getElementById('save').disabled = false;
    }; 
    n.src=v.target.result; 
  }; 
  r.readAsDataURL(e.target.files[0]); 
}
function handleFrame(e){ let r=new FileReader(); r.onload=v=>{ let n=new Image(); n.onload=()=>{f=n; d(); playClick();}; n.src=v.target.result; }; r.readAsDataURL(e.target.files[0]); }
function updateZ(v){ cfg.s=parseFloat(v); zVal.innerText=Math.round(v*100)+"%"; d(); }
function updateR(v){ cfg.r=parseInt(v); rVal.innerText=v+"¬∞"; d(); }
function updateM(v){ cfg.m=parseInt(v); mVal.innerText=v+"px"; d(); }
function centerSubject(){ cfg.x=400; cfg.y=400; cfg.r=0; rSl.value=0; d(); playShutter(); }
function resetProject(){ i=new Image(); f=new Image(); cfg={s:1,m:375,x:400,y:400,r:0}; zSl.value=1; rSl.value=0; mSl.value=375; d(); playShutter(); document.getElementById('save').disabled = true;}
function downloadPic(){ 
  if(!i.src) return; 
  d(); 
  let a=document.createElement('a'); a.download=`Arcade_${Date.now()}.png`; a.href=c.toDataURL(); a.click(); playShutter(); 
}
function updS(el){ if(el.parentElement.classList.contains('ui-gif')) return; el.style.setProperty('--v', ((el.value-el.min)/(el.max-el.min)*100)+'%'); }
document.querySelectorAll('input[type=range]').forEach(el => { el.addEventListener('input', () => updS(el)); updS(el); });

// --- üïπÔ∏è FRAME STUDIO TOUCH CONTROLS ---
let isP=false, tStart={x:0,y:0}, tAng=0, initR=0;
c.onmousedown=e=>{isP=true; tStart={x:e.offsetX,y:e.offsetY};}
c.onmousemove=e=>{
  if(!isP)return;
  let scale = 800 / c.offsetWidth;
  cfg.x += (e.offsetX - tStart.x) * scale;
  cfg.y += (e.offsetY - tStart.y) * scale;
  tStart={x:e.offsetX,y:e.offsetY};
  d();
}
window.onmouseup=()=>{isP=false;}

c.ontouchstart=e=>{
  e.preventDefault();
  if(e.touches.length===1){
    isP=true;
    tStart={x:e.touches[0].clientX, y:e.touches[0].clientY};
  } else if(e.touches.length===2){
    isP=false; 
    let dx = e.touches[1].clientX - e.touches[0].clientX;
    let dy = e.touches[1].clientY - e.touches[0].clientY;
    tAng = Math.atan2(dy, dx);
    initR = cfg.r;
  }
}
c.ontouchmove=e=>{
  e.preventDefault();
  if(e.touches.length===1 && isP){
    let scale = 800 / c.offsetWidth;
    let dx = e.touches[0].clientX - tStart.x;
    let dy = e.touches[0].clientY - tStart.y;
    cfg.x += dx * scale;
    cfg.y += dy * scale;
    tStart={x:e.touches[0].clientX, y:e.touches[0].clientY};
    d();
  }
  else if(e.touches.length===2){
    let dx = e.touches[1].clientX - e.touches[0].clientX;
    let dy = e.touches[1].clientY - e.touches[0].clientY;
    let curAng = Math.atan2(dy, dx);
    let rotDiff = (curAng - tAng) * (180/Math.PI);
    cfg.r = initR + rotDiff;
    rSl.value = (cfg.r % 360 + 360) % 360;
    rVal.innerText = Math.round(cfg.r) + "¬∞";
    d();
  }
}
window.ontouchend=()=>{isP=false;}
</script>
</body>
</html>
